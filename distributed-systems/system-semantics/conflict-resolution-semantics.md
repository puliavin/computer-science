# Conflict Resolution Semantics (–°–µ–º–∞–Ω—Ç–∏–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤)

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–í–≤–µ–¥–µ–Ω–∏–µ –≤ –ø—Ä–æ–±–ª–µ–º—É –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤](#–≤–≤–µ–¥–µ–Ω–∏–µ-–≤-–ø—Ä–æ–±–ª–µ–º—É-–∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤)
2. [Last-Write-Wins (LWW)](#last-write-wins-lww)
3. [Version-Vector-Based Resolution](#version-vector-based-resolution)
4. [Causal Merge](#causal-merge)
5. [Application-Defined Resolution](#application-defined-resolution)
6. [CRDT Merge Semantics](#crdt-merge-semantics)
7. [Tombstone Semantics](#tombstone-semantics)
8. [–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–¥—Ö–æ–¥–æ–≤](#—Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è-—Ç–∞–±–ª–∏—Ü–∞-–ø–æ–¥—Ö–æ–¥–æ–≤)
9. [–í—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤](#–≤—ã–±–æ—Ä-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏-—Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è-–∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤)

---

## –í–≤–µ–¥–µ–Ω–∏–µ –≤ –ø—Ä–æ–±–ª–µ–º—É –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

### –ß—Ç–æ —Ç–∞–∫–æ–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö?

–ö–æ–Ω—Ñ–ª–∏–∫—Ç (conflict) –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É–∑–ª–æ–≤ (nodes) –∏–ª–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω—è—é—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ, –∏ —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Ä–µ—à–∏—Ç—å, –∫–∞–∫—É—é –≤–µ—Ä—Å–∏—é —Å—á–∏—Ç–∞—Ç—å "–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π" –∏–ª–∏ –∫–∞–∫ –∏—Ö –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å.

**–ü—Ä–æ—Å—Ç–∞—è –∞–Ω–∞–ª–æ–≥–∏—è:** –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –∏ —Ç–≤–æ–π –∫–æ–ª–ª–µ–≥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –Ω–∞–¥ –æ–¥–Ω–∏–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–º Google Docs, –Ω–æ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞. –ö–∞–∂–¥—ã–π –∏–∑ –≤–∞—Å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Å–≤–æ—é –ª–æ–∫–∞–ª—å–Ω—É—é –∫–æ–ø–∏—é. –ö–æ–≥–¥–∞ –≤—ã –æ–±–∞ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ —Å–≤—è–∑—å, —Å–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–≤–µ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–∏ –æ–¥–Ω–æ–≥–æ –∞–±–∑–∞—Ü–∞. –≠—Ç–æ –∏ –µ—Å—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç.

### –ü–æ—á–µ–º—É –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –Ω–µ–∏–∑–±–µ–∂–Ω—ã?

–í —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –Ω–µ–∏–∑–±–µ–∂–Ω—ã –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:

üî∏ **Network partitions (—Å–µ—Ç–µ–≤—ã–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è):** –£–∑–ª—ã —Ç–µ—Ä—è—é—Ç —Å–≤—è–∑—å –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º, –Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–ø–∏—Å–∏.

üî∏ **Concurrent writes (–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏):** –î–∞–∂–µ –±–µ–∑ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è, –¥–≤–∞ –∫–ª–∏–µ–Ω—Ç–∞ –º–æ–≥—É—Ç –∑–∞–ø–∏—Å–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ä–∞–∑–Ω—ã–µ —Ä–µ–ø–ª–∏–∫–∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

üî∏ **CAP-—Ç–µ–æ—Ä–µ–º–∞:** –ï—Å–ª–∏ —Ç—ã –≤—ã–±–∏—Ä–∞–µ—à—å Availability (–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å) –≤ —É—Å–ª–æ–≤–∏—è—Ö Partition (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è), —Ç—ã –∂–µ—Ä—Ç–≤—É–µ—à—å Consistency (—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å—é), —á—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

### –ë–∞–∑–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞

```
–í—Ä–µ–º—è T0: –ó–Ω–∞—á–µ–Ω–∏–µ X = 100 (—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–æ –Ω–∞ –≤—Å–µ—Ö —Ä–µ–ø–ª–∏–∫–∞—Ö)

–í—Ä–µ–º—è T1:
  - –£–∑–µ–ª A: –∫–ª–∏–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç X = 150
  - –£–∑–µ–ª B: –∫–ª–∏–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç X = 200
  (—É–∑–ª—ã –Ω–µ –∑–Ω–∞—é—Ç –¥—Ä—É–≥ –æ –¥—Ä—É–≥–µ –∏–∑-–∑–∞ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ —Å–µ—Ç–∏)

–í—Ä–µ–º—è T2:
  - –£–∑–ª—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç
  - –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Ä–µ—à–∏—Ç—å: X = 150, X = 200, –∏–ª–∏ —á—Ç–æ-—Ç–æ –µ—â–µ?
```

**–†–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä:** –í MongoDB —Å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π –≤ —Ä–∞–∑–Ω—ã—Ö –¥–∞—Ç–∞—Ü–µ–Ω—Ç—Ä–∞—Ö, –µ—Å–ª–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç network partition, –∫–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –ø–∏—Å–∞—Ç—å –≤ —Ä–∞–∑–Ω—ã–µ —Ä–µ–ø–ª–∏–∫–∏. –ö–æ–≥–¥–∞ —Å–≤—è–∑—å –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, MongoDB –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –≤–µ—Ä—Å–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ –∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—é –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏** (LWW, version vectors)
2. **–°—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏** (CRDTs, causal merge)
3. **–†—É—á–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ** (application-defined)
4. **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã** (tombstones –¥–ª—è —É–¥–∞–ª–µ–Ω–∏–π)

---

## Last-Write-Wins (LWW)

### –°—É—Ç—å –ø–æ–¥—Ö–æ–¥–∞

Last-Write-Wins (–ø–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–ø–∏—Å—å –ø–æ–±–µ–∂–¥–∞–µ—Ç) ‚Äî —ç—Ç–æ —Å–∞–º–∞—è –ø—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—Å—Ç–æ –≤—ã–±–∏—Ä–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Å —Å–∞–º–æ–π –ø–æ–∑–¥–Ω–µ–π timestamp (–≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–æ–π) –∏ –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ.

**–ü—Ä–∏–Ω—Ü–∏–ø:** "–ö—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –Ω–∞–ø–∏—Å–∞–ª, —Ç–æ–≥–æ –∏ —Ç–∞–ø–∫–∏."

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å –ø–æ–ª—É—á–∞–µ—Ç timestamp (–æ–±—ã—á–Ω–æ —Å —É–∑–ª–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω—è–ª –∑–∞–ø–∏—Å—å)
2. –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è timestamps
3. –ó–∞–ø–∏—Å—å —Å –±–æ–ª—å—à–∏–º timestamp –ø–æ–±–µ–∂–¥–∞–µ—Ç, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ—Ç–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è LWW

```
–£–∑–µ–ª A: X = 150 (timestamp: 10:00:01.500)
–£–∑–µ–ª B: X = 200 (timestamp: 10:00:01.800)

–ö–æ–Ω—Ñ–ª–∏–∫—Ç! –°—Ä–∞–≤–Ω–µ–Ω–∏–µ timestamps:
10:00:01.800 > 10:00:01.500

–†–µ–∑—É–ª—å—Ç–∞—Ç: X = 200 (–∑–∞–ø–∏—Å—å —Å —É–∑–ª–∞ B –ø–æ–±–µ–∂–¥–∞–µ—Ç)
–ó–∞–ø–∏—Å—å X = 150 –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ –ø–æ—Ç–µ—Ä—è–Ω–∞
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

**Cassandra:**
Cassandra –∏—Å–ø–æ–ª—å–∑—É–µ—Ç LWW –∫–∞–∫ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å –ø–æ–ª—É—á–∞–µ—Ç timestamp (–ª–∏–±–æ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞, –ª–∏–±–æ –æ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–∞), –∏ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Å–∏—Å—Ç–µ–º–∞ –≤—ã–±–∏—Ä–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Å —Å–∞–º—ã–º –±–æ–ª—å—à–∏–º timestamp.

**Redis —Å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π:**
–í –ø—Ä–æ—Å—Ç—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ Redis —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–¥—Ö–æ–¥, –±–ª–∏–∑–∫–∏–π –∫ LWW ‚Äî –∫–æ–º–∞–Ω–¥—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ –∏—Ö –ø–æ–ª—É—á–µ–Ω–∏—è –º–∞—Å—Ç–µ—Ä–æ–º.

**Riak (—Ä–µ–∂–∏–º LWW):**
Riak –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ LWW, —Ö–æ—Ç—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å vector clocks.

### –ß—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç LWW

‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö, —Ç–æ–ª—å–∫–æ timestamps.

‚úÖ **–î–µ—Ç–µ—Ä–º–∏–Ω–∏–∑–º:** –í—Å–µ —É–∑–ª—ã –ø—Ä–∏–¥—É—Ç –∫ –æ–¥–Ω–æ–º—É –∏ —Ç–æ–º—É –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É (–µ—Å–ª–∏ timestamps —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã).

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ:** –ù–µ —Ç—Ä–µ–±—É–µ—Ç –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

‚úÖ **–ù–∏–∑–∫–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã:** –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (—Ç–æ–ª—å–∫–æ timestamp).

‚úÖ **Eventual consistency:** –°–∏—Å—Ç–µ–º–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å–æ–π–¥–µ—Ç—Å—è –∫ –æ–¥–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é.

### –ß–µ–≥–æ –ù–ï –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç LWW

‚ùå **–°–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π:** –ü—Ä–æ–∏–≥—Ä–∞–≤—à–∏–µ –∑–∞–ø–∏—Å–∏ —Ç–µ—Ä—è—é—Ç—Å—è –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ.

‚ùå **–ü—Ä–∏—á–∏–Ω–Ω–æ-—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—É—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å:** –ó–∞–ø–∏—Å—å, —Å–¥–µ–ª–∞–Ω–Ω–∞—è "–ø–æ–∑–∂–µ" –ø–æ —á–∞—Å–∞–º, –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–∏ "—Ä–∞–Ω—å—à–µ" –ø–æ –ø—Ä–∏—á–∏–Ω–Ω–æ–π —Å–≤—è–∑–∏.

‚ùå **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫—É—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å:** –°–∏—Å—Ç–µ–º–∞ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, —Ç–æ–ª—å–∫–æ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ –≤—Ä–µ–º—è.

‚ùå **–ó–∞—â–∏—Ç—É –æ—Ç clock skew:** –ï—Å–ª–∏ —á–∞—Å—ã –Ω–∞ —É–∑–ª–∞—Ö —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º.

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã

**–ü—Ä–æ–±–ª–µ–º–∞ 1: Clock skew (—Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–∞—Å–æ–≤)**

–°–∞–º–∞—è —á–∞—Å—Ç–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å LWW ‚Äî —ç—Ç–æ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–∞—Å–æ–≤ –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏.

**–°—Ü–µ–Ω–∞—Ä–∏–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞:**
```
10:00:00 - –°–µ—Ä–≤–µ—Ä A (—á–∞—Å—ã –æ—Ç—Å—Ç–∞—é—Ç –Ω–∞ 5 –º–∏–Ω—É—Ç): –∫–ª–∏–µ–Ω—Ç –ø–∏—à–µ—Ç X = "–Ω–æ–≤–æ–µ_–∑–Ω–∞—á–µ–Ω–∏–µ"
           Timestamp = 09:55:00

09:58:00 - –°–µ—Ä–≤–µ—Ä B (—á–∞—Å—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ): –∫–ª–∏–µ–Ω—Ç –ø–∏—à–µ—Ç X = "—Å—Ç–∞—Ä–æ–µ_–∑–Ω–∞—á–µ–Ω–∏–µ"
           Timestamp = 09:58:00

–†–µ–∑—É–ª—å—Ç–∞—Ç: X = "—Å—Ç–∞—Ä–æ–µ_–∑–Ω–∞—á–µ–Ω–∏–µ" (!)
–ü–æ—Ç–æ–º—É —á—Ç–æ 09:58:00 > 09:55:00, —Ö–æ—Ç—è "–Ω–æ–≤–æ–µ_–∑–Ω–∞—á–µ–Ω–∏–µ" –±—ã–ª–æ –∑–∞–ø–∏—Å–∞–Ω–æ –ø–æ–∑–∂–µ –ø–æ —Ä–µ–∞–ª—å–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏.
```

**–†–µ–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π:** –í Cassandra-–∫–ª–∞—Å—Ç–µ—Ä–µ –æ–¥–Ω–∞ –∏–∑ –Ω–æ–¥ –∏–º–µ–ª–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è (–Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –≤–ø–µ—Ä–µ–¥). –í—Å–µ –∑–∞–ø–∏—Å–∏, –ø—Ä–æ—Ö–æ–¥–∏–≤—à–∏–µ —á–µ—Ä–µ–∑ —ç—Ç—É –Ω–æ–¥—É, –ø–æ–ª—É—á–∞–ª–∏ timestamps –∏–∑ –±—É–¥—É—â–µ–≥–æ –∏ "–ø–æ–±–µ–∂–¥–∞–ª–∏" –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∏–Ω—É—Ç, –¥–∞–∂–µ —Ç–µ, —á—Ç–æ –ª–æ–≥–∏—á–µ—Å–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã–ª–∏ –±—ã—Ç—å –Ω–æ–≤–µ–µ.

**–ü—Ä–æ–±–ª–µ–º–∞ 2: –ü–æ—Ç–µ—Ä—è –≤–∞–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

LWW –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç —Å–µ–º–∞–Ω—Ç–∏–∫—É –¥–∞–Ω–Ω—ã—Ö, –ø–æ—ç—Ç–æ–º—É –º–æ–∂–µ—Ç –ø–æ—Ç–µ—Ä—è—Ç—å –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.

**–°—Ü–µ–Ω–∞—Ä–∏–π —Å –±–∞–Ω–∫–æ–≤—Å–∫–∏–º —Å—á–µ—Ç–æ–º:**
```
–ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å: 1000 —Ä—É–±–ª–µ–π

–û–ø–µ—Ä–∞—Ü–∏—è 1 (T=100): –°–Ω—è—Ç–∏–µ 200 —Ä—É–±–ª–µ–π ‚Üí –±–∞–ª–∞–Ω—Å = 800 —Ä—É–±–ª–µ–π
–û–ø–µ—Ä–∞—Ü–∏—è 2 (T=101): –°–Ω—è—Ç–∏–µ 300 —Ä—É–±–ª–µ–π ‚Üí –±–∞–ª–∞–Ω—Å = 700 —Ä—É–±–ª–µ–π

–° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è LWW: –±–∞–ª–∞–Ω—Å = 700 (–æ–ø–µ—Ä–∞—Ü–∏—è 2 –ø–æ–±–µ–∂–¥–∞–µ—Ç)
–ù–æ –æ–ø–µ—Ä–∞—Ü–∏—è 1 –ø–æ—Ç–µ—Ä—è–Ω–∞! –§–∞–∫—Ç–∏—á–µ—Å–∫–∏ –±—ã–ª–æ —Å–Ω—è—Ç–æ 500 —Ä—É–±–ª–µ–π, –∞ –Ω–µ 300.
```

–≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö, –≥–¥–µ –≤–∞–∂–Ω—ã –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (—Ñ–∏–Ω–∞–Ω—Å—ã, –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∑–∞–ø–∏—Å–∏).

**–ü—Ä–æ–±–ª–µ–º–∞ 3: ABA-–ø—Ä–æ–±–ª–µ–º–∞**

```
T0: X = "A"
T1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 1 –º–µ–Ω—è–µ—Ç X = "B"  (timestamp = 1)
T2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 2 –º–µ–Ω—è–µ—Ç X = "A"  (timestamp = 2)

–†–µ–∑—É–ª—å—Ç–∞—Ç: X = "A"
```

–ö–∞–∂–µ—Ç—Å—è, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ –º–µ–Ω—è–ª–∏—Å—å, –Ω–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ –¥–≤–µ –æ–ø–µ—Ä–∞—Ü–∏–∏. –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ change detection (–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π), –æ–Ω –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —ç—Ç–∏ —Å–æ–±—ã—Ç–∏—è.

**–ü—Ä–æ–±–ª–µ–º–∞ 4: –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ —Å –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–º–∏ timestamps**

–ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –¥–≤–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–º–µ—é—Ç –∞–±—Å–æ–ª—é—Ç–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π timestamp?

```
–£–∑–µ–ª A: X = 150 (timestamp: 10:00:01.500)
–£–∑–µ–ª B: X = 200 (timestamp: 10:00:01.500)
```

–†–∞–∑–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã —Ä–µ—à–∞—é—Ç —ç—Ç–æ –ø–æ-—Ä–∞–∑–Ω–æ–º—É:
- Cassandra –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ: —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ª–µ–∫—Å–∏–∫–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∏—Å—Ç–µ–º—ã –¥–æ–±–∞–≤–ª—è—é—Ç node ID –∫ timestamp –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç —Å–ª—É—á–∞–π–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–Ω–µ–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ!)

**–ò–Ω—Ü–∏–¥–µ–Ω—Ç:** –í –æ–¥–Ω–æ–π e-commerce —Å–∏—Å—Ç–µ–º–µ –Ω–∞ Cassandra –¥–≤–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ (–∏–∑ —Ä–∞–∑–Ω—ã—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤) –∏–º–µ–ª–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π timestamp. –ò–∑-–∑–∞ –ª–µ–∫—Å–∏–∫–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑ –∑–∞—Å—Ç—Ä—è–ª –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Å—Ç–∞—Ç—É—Å–µ.

### –ü—Ä–∞–∫—Ç–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å LWW

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LWW:**

‚úÖ –î–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å (–∫—ç—à–∏, —Å–µ—Å—Å–∏–∏, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
‚úÖ –î–∞–Ω–Ω—ã–µ, –≥–¥–µ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ (—Å—Ç–∞—Ç—É—Å "–æ–Ω–ª–∞–π–Ω/–æ—Ñ–ª–∞–π–Ω")
‚úÖ –î–∞–Ω–Ω—ã–µ, –≥–¥–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ä–µ–¥–∫–∏
‚úÖ –°–∏—Å—Ç–µ–º—ã, –≥–¥–µ –ø—Ä–æ—Å—Ç–æ—Ç–∞ –≤–∞–∂–Ω–µ–µ —Å—Ç—Ä–æ–≥–æ–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏

**–ö–∞–∫ –∂–∏—Ç—å —Å LWW –±–µ–∑–æ–ø–∞—Å–Ω–æ:**

1. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏:** –ò—Å–ø–æ–ª—å–∑—É–π NTP –∏–ª–∏, –ª—É—á—à–µ, PTP –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —á–∞—Å–æ–≤. –ú–æ–Ω–∏—Ç–æ—Ä—å clock drift.

2. **–õ–æ–≥–∏—á–µ—Å–∫–∏–µ —á–∞—Å—ã –≤–º–µ—Å—Ç–æ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö:** –í–º–µ—Å—Ç–æ wall-clock time (—Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏) –∏—Å–ø–æ–ª—å–∑—É–π –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å—á–µ—Ç—á–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏.

3. **–ì–∏–±—Ä–∏–¥–Ω—ã–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —á–∞—Å—ã (HLC):** –ö–æ–º–±–∏–Ω–∞—Ü–∏—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Å—á–µ—Ç—á–∏–∫–∞. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ CockroachDB –∏ –¥—Ä—É–≥–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö.

4. **–ò–∑–±–µ–≥–∞–π LWW –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:** –î–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –∑–∞–ø–∏—Å–µ–π –∏ –¥—Ä—É–≥–∏—Ö –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

5. **Write-through coordinator:** –ù–∞–ø—Ä–∞–≤–ª—è–π –≤—Å–µ –∑–∞–ø–∏—Å–∏ –¥–ª—è –æ–¥–Ω–æ–≥–æ –∫–ª—é—á–∞ —á–µ—Ä–µ–∑ –æ–¥–∏–Ω –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ timestamps.

6. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Ç–µ—Ä—å –¥–∞–Ω–Ω—ã—Ö:** –õ–æ–≥–∏—Ä—É–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π, —Å–∫–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã—Ö —Ç–µ—Ä—è–µ—Ç—Å—è.

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**

**–ü–∞—Ç—Ç–µ—Ä–Ω 1: LWW —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π**
```
–•–æ—Ä–æ—à–æ: SET user_status = "online"  (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ)
–ü–ª–æ—Ö–æ: INCREMENT counter += 1        (–Ω–µ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ)
```

**–ü–∞—Ç—Ç–µ—Ä–Ω 2: –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
–ù–µ –ø–æ–ª–∞–≥–∞–π—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ LWW, –¥–æ–±–∞–≤—å –≤–µ—Ä—Å–∏–∏:
```
–ó–∞–ø–∏—Å—å 1: {value: 150, version: 5, timestamp: 100}
–ó–∞–ø–∏—Å—å 2: {value: 200, version: 4, timestamp: 101}

LWW –≤—ã–±–µ—Ä–µ—Ç –∑–∞–ø–∏—Å—å 2 –∏–∑-–∑–∞ timestamp, –Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–∏–¥–∏—Ç, —á—Ç–æ version: 4 < 5,
–∏ –º–æ–∂–µ—Ç –ø–æ–¥–Ω—è—Ç—å –∞–ª–µ—Ä—Ç –æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ.
```

**–ü–∞—Ç—Ç–µ—Ä–Ω 3: Event sourcing –ø–æ–≤–µ—Ä—Ö LWW**
–•—Ä–∞–Ω–∏ –Ω–µ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏–π. LWW –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ —Å–æ–±—ã—Ç–∏—è–º (–∫–æ—Ç–æ—Ä—ã–µ –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã), –∞ –Ω–µ –∫ —Å–æ—Å—Ç–æ—è–Ω–∏—é.

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ LWW

1. **Clock skew –º–µ–∂–¥—É –Ω–æ–¥–∞–º–∏** ‚Äî –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å < 100ms
2. **–ß–∞—Å—Ç–æ—Ç–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤** ‚Äî —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤—ã–±–æ—Ä –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏
3. **–ü–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö** ‚Äî –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ, –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–π –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏
4. **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ timestamps** ‚Äî –∞–Ω–æ–º–∞–ª–∏–∏ –º–æ–≥—É—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å —á–∞—Å–∞–º–∏

---

## Version-Vector-Based Resolution

### –°—É—Ç—å –ø–æ–¥—Ö–æ–¥–∞

Version vectors (–≤–µ–∫—Ç–æ—Ä–∞ –≤–µ—Ä—Å–∏–π), —Ç–∞–∫–∂–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –∫–∞–∫ vector clocks (–≤–µ–∫—Ç–æ—Ä–Ω—ã–µ —á–∞—Å—ã), ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–∏—á–∏–Ω–Ω–æ-—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–≤—è–∑–∏ (causal relationships) –º–µ–∂–¥—É –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç LWW, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω timestamp, version vectors —Ö—Ä–∞–Ω—è—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞ –µ–≥–æ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å—á–µ—Ç—á–∏–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –ø—Ä–æ–∏–∑–æ—à–ª–∏ –ª–∏ –¥–≤–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ) –∏–ª–∏ –æ–¥–Ω–æ —Å–ª—É—á–∏–ª–æ—Å—å –ø–æ—Å–ª–µ –¥—Ä—É–≥–æ–≥–æ.

**–ê–Ω–∞–ª–æ–≥–∏—è:** –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —É —Ç–µ–±—è –µ—Å—Ç—å –≥—Ä—É–ø–ø–∞ –¥—Ä—É–∑–µ–π, –∏ –∫–∞–∂–¥—ã–π –≤–µ–¥–µ—Ç —Å–≤–æ–π –¥–Ω–µ–≤–Ω–∏–∫. –ö–æ–≥–¥–∞ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç–µ—Å—å, –≤—ã –æ–±–º–µ–Ω–∏–≤–∞–µ—Ç–µ—Å—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π: "–Ø —Å–¥–µ–ª–∞–ª 5 –∑–∞–ø–∏—Å–µ–π —Å –º–æ–º–µ–Ω—Ç–∞ –Ω–∞—à–µ–π –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤—Å—Ç—Ä–µ—á–∏, —Ç—ã ‚Äî 3". –ü–æ —ç—Ç–∏–º —Å—á–µ—Ç—á–∏–∫–∞–º –º–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å, –∫—Ç–æ –∑–Ω–∞–µ—Ç –æ —á—å–∏—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

Version vector ‚Äî —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤–∏–¥–∞:
```
{NodeA: 5, NodeB: 3, NodeC: 7}
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- –≠—Ç–æ—Ç —É–∑–µ–ª –≤–∏–¥–µ–ª 5 –æ–ø–µ—Ä–∞—Ü–∏–π –æ—Ç NodeA
- 3 –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ—Ç NodeB
- 7 –æ–ø–µ—Ä–∞—Ü–∏–π –æ—Ç NodeC

**–ü—Ä–∞–≤–∏–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**

1. –ö–æ–≥–¥–∞ —É–∑–µ–ª N –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é, –æ–Ω –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ—Ç —Å–≤–æ–π —Å—á–µ—Ç—á–∏–∫: `vector[N]++`
2. –ö–æ–≥–¥–∞ —É–∑–µ–ª N –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç —É–∑–ª–∞ M —Å –≤–µ–∫—Ç–æ—Ä–æ–º V', –æ–Ω –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–≤–æ–π –≤–µ–∫—Ç–æ—Ä: `vector[i] = max(vector[i], V'[i])` –¥–ª—è –≤—Å–µ—Ö i

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π:**

–î–∞–Ω—ã –¥–≤–∞ –≤–µ–∫—Ç–æ—Ä–∞ V1 –∏ V2:

- **V1 < V2** (V1 "—Å–ª—É—á–∏–ª–æ—Å—å —Ä–∞–Ω—å—à–µ" V2): –µ—Å–ª–∏ V1[i] ‚â§ V2[i] –¥–ª—è –≤—Å–µ—Ö i, –∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ j –≥–¥–µ V1[j] < V2[j]
- **V1 > V2** (V1 "—Å–ª—É—á–∏–ª–æ—Å—å –ø–æ–∑–∂–µ" V2): –µ—Å–ª–∏ V2 < V1
- **V1 || V2** (V1 –∏ V2 –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã): –µ—Å–ª–∏ –Ω–∏ V1 < V2, –Ω–∏ V1 > V2 ‚Äî —ç—Ç–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç!

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã version vectors

```
–ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
X = 100, vector = {A:0, B:0, C:0}

–®–∞–≥ 1: –£–∑–µ–ª A –æ–±–Ω–æ–≤–ª—è–µ—Ç X = 150
X = 150, vector = {A:1, B:0, C:0}

–®–∞–≥ 2: –£–∑–µ–ª B –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç A –∏ –¥–µ–ª–∞–µ—Ç —Å–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ X = 200
X = 200, vector = {A:1, B:1, C:0}
(B –∑–Ω–∞–µ—Ç –ø—Ä–æ –æ–ø–µ—Ä–∞—Ü–∏—é A, –ø–æ—Ç–æ–º—É —á—Ç–æ A:1)

–®–∞–≥ 3: –£–∑–µ–ª C (–±–µ–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ—Ç B) –æ–±–Ω–æ–≤–ª—è–µ—Ç X = 175 –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–µ—Ä—Å–∏–∏ –æ—Ç A
X = 175, vector = {A:1, B:0, C:1}

–¢–µ–ø–µ—Ä—å —É–∑–ª—ã B –∏ C —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è:
- –í–µ–∫—Ç–æ—Ä B: {A:1, B:1, C:0}
- –í–µ–∫—Ç–æ—Ä C: {A:1, B:0, C:1}

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:
- B:1 > C:0 ‚úì
- C:1 > B:0 ‚úì
–ù–∏ –æ–¥–∏–Ω –≤–µ–∫—Ç–æ—Ä –Ω–µ –¥–æ–º–∏–Ω–∏—Ä—É–µ—Ç –¥—Ä—É–≥–æ–π ‚Üí –ö–û–ù–§–õ–ò–ö–¢ (concurrent updates)
```

–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ —Å–∏—Å—Ç–µ–º–∞ –∑–Ω–∞–µ—Ç, —á—Ç–æ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±–µ –≤–µ—Ä—Å–∏–∏ (sibling versions) –∏ –ª–∏–±–æ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç, –ª–∏–±–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é.

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

**Riak:**
Riak –∏—Å–ø–æ–ª—å–∑—É–µ—Ç vector clocks –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤–µ—Ä—Å–∏–π –æ–±—ä–µ–∫—Ç–æ–≤. –ö–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç —á–∏—Ç–∞–µ—Ç –æ–±—ä–µ–∫—Ç, –æ–Ω –ø–æ–ª—É—á–∞–µ—Ç vector clock. –ü—Ä–∏ –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —ç—Ç–æ—Ç vector clock –æ–±—Ä–∞—Ç–Ω–æ, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç Riak –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∏—á–∏–Ω–Ω—ã–µ —Å–≤—è–∑–∏.

**DynamoDB (—Ä–∞–Ω—å—à–µ):**
Amazon DynamoDB –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª vector clocks, –Ω–æ –ø–æ–∑–∂–µ –ø–µ—Ä–µ–∫–ª—é—á–∏–ª—Å—è –Ω–∞ —É–ø—Ä–æ—â–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å –∏–∑-–∑–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.

**Voldemort:**
LinkedIn's Voldemort —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç vector clocks –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

### –ß—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç version-vector-based resolution

‚úÖ **–ü—Ä–∏—á–∏–Ω–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å (causal consistency):** –ï—Å–ª–∏ A —Å–ª—É—á–∏–ª–æ—Å—å –¥–æ B, —Å–∏—Å—Ç–µ–º–∞ —ç—Ç–æ –∑–Ω–∞–µ—Ç.

‚úÖ **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏—Å—Ç–∏–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤:** –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–ª–∏—á–∞–µ—Ç "–ø–æ–∑–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ" –æ—Ç "–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è".

‚úÖ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–æ–∂–Ω—ã—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤:** –ï—Å–ª–∏ –æ–¥–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–∏ —Å–ª–µ–¥—É–µ—Ç –∑–∞ –¥—Ä—É–≥–∏–º, –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –Ω–µ –±—É–¥–µ—Ç.

‚úÖ **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —á–∞—Å–æ–≤:** –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏.

‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –≤–µ—Ä—Å–∏–π:** –ï—Å–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã, –æ–±–µ –≤–µ—Ä—Å–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è (siblings).

### –ß–µ–≥–æ –ù–ï –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç version-vector-based resolution

‚ùå **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤:** –°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, –Ω–æ –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∏—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

‚ùå **–ö–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö:** Vector clocks —Ä–∞—Å—Ç—É—Ç —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —É–∑–ª–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ.

‚ùå **–ó–∞—â–∏—Ç—É –æ—Ç —Ä–æ—Å—Ç–∞ —Ä–∞–∑–º–µ—Ä–∞ –≤–µ–∫—Ç–æ—Ä–∞:** –í –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏—Ö –æ–±—ä–µ–∫—Ç–∞—Ö –≤–µ–∫—Ç–æ—Ä—ã –º–æ–≥—É—Ç —Ä–∞–∑—Ä–∞—Å—Ç–∞—Ç—å—Å—è.

‚ùå **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ:** –ö–∞–∫ –∏ LWW, –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã

**–ü—Ä–æ–±–ª–µ–º–∞ 1: –†–∞–∑–¥—É–≤–∞–Ω–∏–µ vector clock (clock bloat)**

–≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ vector clocks –≤ –ø—Ä–∞–∫—Ç–∏–∫–µ.

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
–û–±—ä–µ–∫—Ç X –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É–∑–ª–∞—Ö:
T1: –£–∑–µ–ª A ‚Üí vector = {A:1}
T2: –£–∑–µ–ª B ‚Üí vector = {A:1, B:1}
T3: –£–∑–µ–ª C ‚Üí vector = {A:1, B:1, C:1}
T4: –£–∑–µ–ª D ‚Üí vector = {A:1, B:1, C:1, D:1}
...
T100: –£–∑–µ–ª XX ‚Üí vector = {A:1, B:1, ..., XX:1}

–í–µ–∫—Ç–æ—Ä —Å–æ–¥–µ—Ä–∂–∏—Ç 100 –∑–∞–ø–∏—Å–µ–π, —Ö–æ—Ç—è –æ–±—ä–µ–∫—Ç –º–∞–ª–µ–Ω—å–∫–∏–π!
```

**–†–µ–∞–ª—å–Ω—ã–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç:** –í Riak-–∫–ª–∞—Å—Ç–µ—Ä–µ –æ–¥–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞–ø–∞ –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–µ –æ–±—ä–µ–∫—Ç—ã (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π) –Ω–∞–∫–æ–ø–∏–ª–∏ vector clocks —Å —Å–æ—Ç–Ω—è–º–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –†–∞–∑–º–µ—Ä –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–≤—ã—Å–∏–ª —Ä–∞–∑–º–µ—Ä —Å–∞–º–∏—Ö –¥–∞–Ω–Ω—ã—Ö. –≠—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫:
- –£–≤–µ–ª–∏—á–µ–Ω–∏—é –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏
- –ó–∞–º–µ–¥–ª–µ–Ω–∏—é —Å–µ—Ç–µ–≤—ã—Ö –ø–µ—Ä–µ–¥–∞—á
- –£–≤–µ–ª–∏—á–µ–Ω–∏—é –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–†–µ—à–µ–Ω–∏–µ:** Riak –≤–≤–µ–ª –º–µ—Ö–∞–Ω–∏–∑–º pruning (–æ–±—Ä–µ–∑–∫–∏) —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π –∏–∑ –≤–µ–∫—Ç–æ—Ä–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä.

**–ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ sibling versions**

–ö–æ–≥–¥–∞ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç—Å—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç, —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç sibling versions (–≤–µ—Ä—Å–∏–∏-—Å–∏–±–ª–∏–Ω–≥–∏). –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, —Å–∏–±–ª–∏–Ω–≥–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è.

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
–ù–∞—á–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è: X = {value: A, vector: {N1:1}}

–ö–æ–Ω—Ñ–ª–∏–∫—Ç 1:
- –í–µ—Ä—Å–∏—è 1: X = {value: B, vector: {N1:1, N2:1}}
- –í–µ—Ä—Å–∏—è 2: X = {value: C, vector: {N1:1, N3:1}}
‚Üí 2 sibling

–ö–æ–Ω—Ñ–ª–∏–∫—Ç 2 (–Ω–∞ –±–∞–∑–µ sibling 1):
- –í–µ—Ä—Å–∏—è 1: X = {value: D, vector: {N1:1, N2:1, N4:1}}
‚Üí 3 siblings

...

–ß–µ—Ä–µ–∑ –º–µ—Å—è—Ü: 50 siblings!
```

**–†–µ–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π:** –í –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω–∞ –±–∞–∑–µ Riak –∫–ª–∏–µ–Ω—Ç—ã –≤ offline-—Ä–µ–∂–∏–º–µ —Å–æ–∑–¥–∞–≤–∞–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. –ü—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–ª–∏—Å—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, –Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–ª–æ –∏—Ö –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –ø—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è—è –≤—Å–µ –≤–µ—Ä—Å–∏–∏. –ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–¥–µ–ª—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–±—ä–µ–∫—Ç—ã –∏–º–µ–ª–∏ –¥–µ—Å—è—Ç–∫–∏ siblings, —á—Ç–æ –ª–æ–º–∞–ª–æ UI –∏ –∑–∞–º–µ–¥–ª—è–ª–æ —Ä–∞–±–æ—Ç—É.

**–ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ vector clock –∫–ª–∏–µ–Ω—Ç–æ–º**

Vector clock –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –∫–ª–∏–µ–Ω—Ç–æ–º –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏. –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —ç—Ç–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ, —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Ä—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–∏—á–∏–Ω–Ω—ã—Ö —Å–≤—è–∑—è—Ö.

**–ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω:**
```
–®–∞–≥ 1: –ö–ª–∏–µ–Ω—Ç —á–∏—Ç–∞–µ—Ç X, –ø–æ–ª—É—á–∞–µ—Ç vector = {A:5, B:3}
–®–∞–≥ 2: –ö–ª–∏–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç X, –Ω–æ –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç vector
–®–∞–≥ 3: –°–∏—Å—Ç–µ–º–∞ –¥—É–º–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è
        ‚Üí —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Ç–∞–º, –≥–¥–µ –µ–≥–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å
```

**–ò–Ω—Ü–∏–¥–µ–Ω—Ç:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ REST API –¥–ª—è Riak –∑–∞–±—ã–ª–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å X-Riak-Vclock header –ø—Ä–∏ PUT-–∑–∞–ø—Ä–æ—Å–∞—Ö. –ö–∞–∂–¥–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–≤–∞–ª–æ –ª–æ–∂–Ω—ã–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç, –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ siblings —Ä–æ—Å–ª–æ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ.

**–ü—Ä–æ–±–ª–µ–º–∞ 4: Actor explosion**

–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö –∫–∞–∂–¥—ã–π –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–º "–∞–∫—Ç–æ—Ä–æ–º" –≤ vector clock.

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
E-commerce —Å–∞–π—Ç: –º–∏–ª–ª–∏–æ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–±–Ω–æ–≤–ª—è—é—Ç —Å–≤–æ–∏ –∫–æ—Ä–∑–∏–Ω—ã

Vector clock –¥–ª—è –∫–æ—Ä–∑–∏–Ω—ã:
{user_1: 1, user_2: 1, ..., user_1000000: 1}

Vector —Ä–∞–∑–¥—É–≤–∞–µ—Ç—Å—è –¥–æ –Ω–µ–ø—Ä–∏–µ–º–ª–µ–º—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤
```

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å server-side actors (—É–∑–ª—ã —Å–µ—Ä–≤–µ—Ä–∞) –≤–º–µ—Å—Ç–æ client-side actors.

### –ü—Ä–∞–∫—Ç–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å version vectors

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å version vectors:**

‚úÖ –ö–æ–≥–¥–∞ –≤–∞–∂–Ω–∞ –ø—Ä–∏—á–∏–Ω–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
‚úÖ –í —Å–∏—Å—Ç–µ–º–∞—Ö —Å network partitions
‚úÖ –î–ª—è offline-first –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–º–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, collaborative editing)
‚úÖ –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∂–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
‚úÖ –í —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å application-defined resolution

**–ö–∞–∫ –∂–∏—Ç—å —Å version vectors –±–µ–∑–æ–ø–∞—Å–Ω–æ:**

**1. –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π —Ä–∞–∑–º–µ—Ä –≤–µ–∫—Ç–æ—Ä–∞**

–£—Å—Ç–∞–Ω–æ–≤–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä vector clock –∏ –ø—Ä–∏–º–µ–Ω—è–π pruning:

```
–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ pruning:
- –£–¥–∞–ª—è—Ç—å –∑–∞–ø–∏—Å–∏ –¥–ª—è —É–∑–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞–≤–Ω–æ –Ω–µ –∞–∫—Ç–∏–≤–Ω—ã (timestamp-based pruning)
- –£–¥–∞–ª—è—Ç—å —É–∑–ª—ã —Å –Ω–∞–∏–º–µ–Ω—å—à–∏–º–∏ —Å—á–µ—Ç—á–∏–∫–∞–º–∏
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10-20)
```

Riak –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `small_vclock`, `big_vclock`, `young_vclock`, `old_vclock`.

**2. –ò—Å–ø–æ–ª—å–∑—É–π server-side actors**

–ü—É—Å—Ç—å actors –±—É–¥—É—Ç —É–∑–ª–∞–º–∏ —Å–µ—Ä–≤–µ—Ä–∞, –∞ –Ω–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏:
- –í–º–µ—Å—Ç–æ: `{client_1:1, client_2:1, client_3:1, ...}`
- –ò—Å–ø–æ–ª—å–∑—É–π: `{server_a:5, server_b:3, server_c:7}`

**3. –†–µ–∞–ª–∏–∑—É–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ conflicts –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

Version vectors –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, –Ω–æ –Ω–µ —Ä–∞–∑—Ä–µ—à–∞—é—Ç. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ:
- –ü–æ–ª—É—á–∞—Ç—å –≤—Å–µ siblings
- –ü—Ä–∏–º–µ–Ω—è—Ç—å merge-–ª–æ–≥–∏–∫—É (—Å–º. —Ä–∞–∑–¥–µ–ª Application-Defined Resolution)
- –ó–∞–ø–∏—Å—ã–≤–∞—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞—Ç–Ω–æ

**4. –ú–æ–Ω–∏—Ç–æ—Ä—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ siblings**

–ê–ª–µ—Ä—Ç–∏—Ä—É–π, –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç –º–Ω–æ–≥–æ siblings:
- Threshold: > 5 siblings ‚Üí warning
- Threshold: > 10 siblings ‚Üí critical

**5. Periodic reconciliation**

–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±—ä–µ–¥–∏–Ω—è–π siblings, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞.

**6. TTL –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤**

–î–ª—è –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å TTL (time-to-live) –∏ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –≤–µ–∫—Ç–æ—Ä—ã.

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**

**–ü–∞—Ç—Ç–µ—Ä–Ω 1: Read-Repair**
```
–ü—Ä–∏ —á—Ç–µ–Ω–∏–∏:
1. –ï—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã siblings, —Å—Ä–∞–∑—É —Ä–∞–∑—Ä–µ—à–∞–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç
2. –ó–∞–ø–∏—Å—ã–≤–∞–π –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞—Ç–Ω–æ
3. –í–æ–∑–≤—Ä–∞—â–∞–π –∫–ª–∏–µ–Ω—Ç—É —É–∂–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
```

**–ü–∞—Ç—Ç–µ—Ä–Ω 2: Vector Clock Pruning Service**
```
–§–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å:
1. –°–∫–∞–Ω–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç—ã —Å –±–æ–ª—å—à–∏–º–∏ –≤–µ–∫—Ç–æ—Ä–∞–º–∏
2. –ü—Ä–∏–º–µ–Ω—è–µ—Ç pruning-—Å—Ç—Ä–∞—Ç–µ–≥–∏—é
3. –ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –æ–±—ä–µ–∫—Ç—ã —Å –∫–æ–º–ø–∞–∫—Ç–Ω—ã–º–∏ –≤–µ–∫—Ç–æ—Ä–∞–º–∏
```

**–ü–∞—Ç—Ç–µ—Ä–Ω 3: Hybrid Logical Clocks**

–í–º–µ—Å—Ç–æ —á–∏—Å—Ç—ã—Ö vector clocks –∏—Å–ø–æ–ª—å–∑—É–π Hybrid Logical Clocks (HLC), –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–±–∏–Ω–∏—Ä—É—é—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è –∏ –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—á–µ—Ç—á–∏–∫. –≠—Ç–æ –¥–∞–µ—Ç:
- –ö–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç—å (–æ–¥–∏–Ω timestamp + —Å—á–µ—Ç—á–∏–∫)
- –ü—Ä–∏—á–∏–Ω–Ω—É—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
- –ü—Ä–∏–±–ª–∏–∂–µ–Ω–Ω–æ—Å—Ç—å –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤: CockroachDB, MongoDB (—Å –≤–µ—Ä—Å–∏–∏ 3.6).

**–ü–∞—Ç—Ç–µ—Ä–Ω 4: Dotted Version Vectors**

–£—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –æ–±—ã—á–Ω—ã—Ö vector clocks, –∫–æ—Ç–æ—Ä–æ–µ —Ç–æ—á–Ω–µ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–ª –∫–∞–∂–¥—ã–π —É–∑–µ–ª. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Riak.

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**1. Version vector –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ vector clock**

–î–ª—è –º–Ω–æ–≥–∏—Ö –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–π –Ω–µ –Ω—É–∂–Ω–∞ –ø–æ–ª–Ω–∞—è –º–æ—â–Ω–æ—Å—Ç—å vector clocks. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ version vector ‚Äî —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏, –∫–æ—Ç–æ—Ä–∞—è —Ö—Ä–∞–Ω–∏—Ç –æ–¥–∏–Ω —Å—á–µ—Ç—á–∏–∫ –Ω–∞ —É–∑–µ–ª –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö.

**2. Interval Tree Clocks (ITC)**

–ë–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ vector clocks, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å actors.

**3. Bloom clock**

–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫–∞—É–∑–∞–ª—å–Ω–æ—Å—Ç–∏ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º.

### –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º —Å version vectors

**–ö–∞–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**

1. **–õ–æ–≥–∏—Ä—É–π –≤—Å–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã:** –ó–∞–ø–∏—Å—ã–≤–∞–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –≤–µ—Ä—Å–∏–∏ –∏ –∏—Ö –≤–µ–∫—Ç–æ—Ä—ã.

2. **–í–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–π –ø—Ä–∏—á–∏–Ω–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é:** –°—Ç—Ä–æ–π –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏.

3. **–¢—Ä–∞—Å—Å–∏—Ä—É–π vector clock —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É:** –û—Ç—Å–ª–µ–∂–∏–≤–∞–π, –∫–∞–∫ –≤–µ–∫—Ç–æ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ —É–∑–ª—ã.

4. **–ú–æ–Ω–∏—Ç–æ—Ä—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –≤–µ–∫—Ç–æ—Ä–æ–≤:** Histogram —Ä–∞–∑–º–µ—Ä–æ–≤ vector clock.

---

## Causal Merge

### –°—É—Ç—å –ø–æ–¥—Ö–æ–¥–∞

Causal merge (–ø—Ä–∏—á–∏–Ω–Ω–æ–µ —Å–ª–∏—è–Ω–∏–µ) ‚Äî —ç—Ç–æ –ø–æ–¥—Ö–æ–¥ –∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—é –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–π —É—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏—á–∏–Ω–Ω–æ-—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –∏ –ø—ã—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–ø–æ—Å–æ–±–æ–º, —Å–æ—Ö—Ä–∞–Ω—è—é—â–∏–º —Å–µ–º–∞–Ω—Ç–∏–∫—É –æ–ø–µ—Ä–∞—Ü–∏–π.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç LWW (–∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ—Å—Ç–æ –≤—ã–±–∏—Ä–∞–µ—Ç –æ–¥–Ω—É –≤–µ—Ä—Å–∏—é) –∏ version vectors (–∫–æ—Ç–æ—Ä—ã–µ —Ç–æ–ª—å–∫–æ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã), causal merge –∞–∫—Ç–∏–≤–Ω–æ –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Å–æ—Ö—Ä–∞–Ω—è—è –Ω–∞–º–µ—Ä–µ–Ω–∏—è –æ–±–æ–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.

**–ê–Ω–∞–ª–æ–≥–∏—è:** –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ –¥–≤–∞ —á–µ–ª–æ–≤–µ–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç –æ–¥–∏–Ω —Ç–µ–∫—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç. –ü–µ—Ä–≤—ã–π –¥–æ–±–∞–≤–ª—è–µ—Ç –∞–±–∑–∞—Ü –≤ –Ω–∞—á–∞–ª–æ, –≤—Ç–æ—Ä–æ–π ‚Äî –≤ –∫–æ–Ω–µ—Ü. Git merge –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç –æ–±–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è. –≠—Ç–æ –ø—Ä–∏–º–µ—Ä causal merge ‚Äî —Å–∏—Å—Ç–µ–º–∞ –ø–æ–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–∂–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

Causal merge —Ç—Ä–µ–±—É–µ—Ç:

1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:** –ü–æ–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ–±—ä–µ–∫—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–∫—É–º–µ–Ω—Ç, –¥–µ—Ä–µ–≤–æ, –≥—Ä–∞—Ñ).

2. **–û–ø–µ—Ä–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–π:** –í–º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, —Ö—Ä–∞–Ω—è—Ç—Å—è –æ–ø–µ—Ä–∞—Ü–∏–∏: "–≤—Å—Ç–∞–≤–∏—Ç—å X –ø–æ—Å–ª–µ Y", "—É–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç Z".

3. **Causal history (–ø—Ä–∏—á–∏–Ω–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è):** –ó–Ω–∞–Ω–∏–µ, –∫–∞–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∏ –¥–æ –¥—Ä—É–≥–∏—Ö.

4. **Merge function (—Ñ—É–Ω–∫—Ü–∏—è —Å–ª–∏—è–Ω–∏—è):** –ê–ª–≥–æ—Ä–∏—Ç–º, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –¥–≤–∞ –Ω–∞–±–æ—Ä–∞ –æ–ø–µ—Ä–∞—Ü–∏–π.

### –ü—Ä–∏–º–µ—Ä—ã –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

**Git:**
Git ‚Äî —ç—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä —Å–∏—Å—Ç–µ–º—ã —Å causal merge. –ö–æ–≥–¥–∞ —Ç—ã –¥–µ–ª–∞–µ—à—å `git merge`, Git –ø—ã—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ –¥–≤—É—Ö –≤–µ—Ç–æ–∫:

```
–í–µ—Ç–∫–∞ A: –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –≤ —Ñ–∞–π–ª X, —Å—Ç—Ä–æ–∫–∞ 10
–í–µ—Ç–∫–∞ B: –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –≤ —Ñ–∞–π–ª Y, —Å—Ç—Ä–æ–∫–∞ 20

Git merge: –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –æ–±–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (fast-forward –∏–ª–∏ 3-way merge)
```

–ö–æ–Ω—Ñ–ª–∏–∫—Ç –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—Ç—Å—è:
```
–í–µ—Ç–∫–∞ A: —Å—Ç—Ä–æ–∫–∞ 10 –≤ file.txt –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ "Hello"
–í–µ—Ç–∫–∞ B: —Å—Ç—Ä–æ–∫–∞ 10 –≤ file.txt –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ "World"

Git –Ω–µ –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑—Ä–µ—à–∏—Ç—å ‚Üí —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ
```

**Operational Transformation (OT):**
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Google Docs, Figma, –∏ –¥—Ä—É–≥–∏—Ö collaborative editing –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö. OT —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç–∞–∫, —á—Ç–æ–±—ã –∏—Ö –º–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –≤ –ª—é–±–æ–º –ø–æ—Ä—è–¥–∫–µ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º.

**–ü—Ä–∏–º–µ—Ä:**
```
–ò—Å—Ö–æ–¥–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: "Hello"

–û–ø–µ—Ä–∞—Ü–∏—è A: –≤—Å—Ç–∞–≤–∏—Ç—å "World" –Ω–∞ –ø–æ–∑–∏—Ü–∏—é 5 ‚Üí "Hello World"
–û–ø–µ—Ä–∞—Ü–∏—è B: –≤—Å—Ç–∞–≤–∏—Ç—å "!" –Ω–∞ –ø–æ–∑–∏—Ü–∏—é 5 ‚Üí "Hello!"

OT —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏:
- –ï—Å–ª–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è A, –∑–∞—Ç–µ–º B, –ø–æ–∑–∏—Ü–∏—è B –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è: –ø–æ–∑–∏—Ü–∏—è 5 + –¥–ª–∏–Ω–∞("World") = 11
- –†–µ–∑—É–ª—å—Ç–∞—Ç: "Hello World!"

–ï—Å–ª–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è B, –∑–∞—Ç–µ–º A:
- –ü–æ–∑–∏—Ü–∏—è A –æ—Å—Ç–∞–µ—Ç—Å—è 5
- –†–µ–∑—É–ª—å—Ç–∞—Ç: "Hello! World" (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ)

OT —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç B: –µ—Å–ª–∏ A —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞, –≤—Å—Ç–∞–≤–∫–∞ B –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ 11
```

**CouchDB:**
CouchDB –∏—Å–ø–æ–ª—å–∑—É–µ—Ç MVCC (Multi-Version Concurrency Control) –∏ revision trees –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π. –ü—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö CouchDB —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –≤—ã–ø–æ–ª–Ω–∏—Ç—å causal merge –≤—Ä—É—á–Ω—É—é.

### –ß—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç causal merge

‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π:** –ï—Å–ª–∏ –¥–≤–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏, –æ–±–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è.

‚úÖ **–ü—Ä–∏—á–∏–Ω–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å:** –ü–æ—Ä—è–¥–æ–∫ –∑–∞–≤–∏—Å–∏–º—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.

‚úÖ **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:** –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –º–µ–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

‚úÖ **–ö–æ–º–º—É—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å (–≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö):** –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

‚úÖ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** –í –∏–¥–µ–∞–ª–µ, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

### –ß–µ–≥–æ –ù–ï –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç causal merge

‚ùå **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–≤–∞ —á–µ–ª–æ–≤–µ–∫–∞ –º–µ–Ω—è—é—Ç –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É —Ç–µ–∫—Å—Ç–∞ –ø–æ-—Ä–∞–∑–Ω–æ–º—É).

‚ùå **–ü—Ä–æ—Å—Ç–æ—Ç—É —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** Causal merge —Ç—Ä–µ–±—É–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö.

‚ùå **–ù–∏–∑–∫–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã:** –ù—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –æ–ø–µ—Ä–∞—Ü–∏–π –∏–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ.

‚ùå **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫—É—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –Ω–∞ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ:** –°–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã

**–ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π**

–í Operational Transformation –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏.

**–°—Ü–µ–Ω–∞—Ä–∏–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞:**
```
Google Docs-–ø–æ–¥–æ–±–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å –±–∞–≥–æ–º –≤ OT-–∞–ª–≥–æ—Ä–∏—Ç–º–µ:

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A: —É–¥–∞–ª—è–µ—Ç —Å–ª–æ–≤–æ –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ 10-15
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B: –≤—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ 12

–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è:
- –û–ø–µ—Ä–∞—Ü–∏—è B –Ω–µ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Å —É—á–µ—Ç–æ–º —É–¥–∞–ª–µ–Ω–∏—è A
- –í—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ø–æ–∑–∏—Ü–∏—é
- –î–æ–∫—É–º–µ–Ω—Ç –∫–æ—Ä—Ä—É–ø—Ç–∏—Ç—Å—è: —á–∞—Å—Ç—å —Ç–µ–∫—Å—Ç–∞ –∏—Å—á–µ–∑–∞–µ—Ç –∏–ª–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –º–µ—Å—Ç–µ
```

**–†–µ–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π:** –û–¥–∏–Ω —Å—Ç–∞—Ä—Ç–∞–ø –ø—ã—Ç–∞–ª—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π collaborative editor —Å OT. –ò–∑-–∑–∞ –æ—à–∏–±–∫–∏ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–Ω–æ–≥–¥–∞ "–ª–æ–º–∞–ª–∏—Å—å" ‚Äî —Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–ª—Å—è –∏–ª–∏ —É–¥–∞–ª—è–ª—Å—è. –ü—Ä–∏—à–ª–æ—Å—å –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (lock-based editing).

**–ü—Ä–æ–±–ª–µ–º–∞ 2: Unbounded growth –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏**

–ï—Å–ª–∏ —Ö—Ä–∞–Ω–∏—à—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é –æ–ø–µ—Ä–∞—Ü–∏–π, –æ–Ω–∞ –º–æ–∂–µ—Ç —Ä–∞—Å—Ç–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ.

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
–¢–µ–∫—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è 1000 —Ä–∞–∑ –∑–∞ –º–µ—Å—è—Ü
–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π: 1000 –∑–∞–ø–∏—Å–µ–π "insert", "delete", "replace"
–†–∞–∑–º–µ—Ä –∏—Å—Ç–æ—Ä–∏–∏ >> —Ä–∞–∑–º–µ—Ä–∞ —Å–∞–º–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞

–ü—Ä–∏ –∫–∞–∂–¥–æ–º merge –Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é ‚Üí –º–µ–¥–ª–µ–Ω–Ω–æ
```

**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ "—Å–∂–∞—Ç–∏–µ" –∏—Å—Ç–æ—Ä–∏–∏ (compaction) ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ snapshot —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

**–ü—Ä–æ–±–ª–µ–º–∞ 3: –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏–∑-–∑–∞ –Ω–µ–∫–æ–º–º—É—Ç–∞—Ç–∏–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π**

–ù–µ –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫–æ–º–º—É—Ç–∞—Ç–∏–≤–Ω—ã. –ü–æ—Ä—è–¥–æ–∫ –∏—Ö –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤–∞–∂–µ–Ω.

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á: [A, B, C]

–û–ø–µ—Ä–∞—Ü–∏—è 1: –ø–µ—Ä–µ–º–µ—Å—Ç–∏ –∑–∞–¥–∞—á—É A –Ω–∞ –ø–æ–∑–∏—Ü–∏—é 2
–û–ø–µ—Ä–∞—Ü–∏—è 2: —É–¥–∞–ª–∏ –∑–∞–¥–∞—á—É B

–ü–æ—Ä—è–¥–æ–∫ 1‚Üí2: [B, C] ‚Üí [C] ‚Üí –∑–∞–¥–∞—á–∞ A –∏—Å—á–µ–∑–ª–∞ (!)
–ü–æ—Ä—è–¥–æ–∫ 2‚Üí1: [A, C] ‚Üí [C, A] ‚Üí –∑–∞–¥–∞—á–∞ A –Ω–∞ –º–µ—Å—Ç–µ

–†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ—Ä—è–¥–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
```

**–†–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –í Trello-–ø–æ–¥–æ–±–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Å real-time sync –¥–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª–∏ –∏ —É–¥–∞–ª–∏–ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∏. –ò–∑-–∑–∞ –Ω–µ–∫–æ–º–º—É—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã–ª —Ä–∞–∑–Ω—ã–º –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞—Ö.

**–ü—Ä–æ–±–ª–µ–º–∞ 4: –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π merge**

Causal merge –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º, –Ω–æ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º.

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
–ö–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏:

–í–µ—Ä—Å–∏—è A:
def calculate(x):
    return x * 2  # –£–¥–≤–æ–µ–Ω–∏–µ

–í–µ—Ä—Å–∏—è B:
def calculate(x):
    return x + 10  # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ 10

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π merge –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å:
def calculate(x):
    return x * 2 + 10  # ???

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ merge —É—Å–ø–µ—à–µ–Ω, –Ω–æ —ç—Ç–æ –≤–æ–æ–±—â–µ –Ω–µ —Ç–æ, —á—Ç–æ —Ö–æ—Ç–µ–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏!
```

**–†–µ–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π Git:** –í –æ–¥–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –¥–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏–∑–º–µ–Ω–∏–ª–∏ –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü–∏—é, –Ω–æ –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö. Git —É—Å–ø–µ—à–Ω–æ —Å–¥–µ–ª–∞–ª merge, –Ω–æ –∫–æ–¥ —Å—Ç–∞–ª –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–ª–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. –¢–µ—Å—Ç—ã –Ω–µ –ø–æ–∫—Ä—ã–≤–∞–ª–∏ —ç—Ç–æ—Ç —Å–ª—É—á–∞–π, –±–∞–≥ –ø–æ–ø–∞–ª –≤ –ø—Ä–æ–¥–∞–∫—à–Ω.

### –ü—Ä–∞–∫—Ç–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å causal merge

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å causal merge:**

‚úÖ Collaborative editing (—Å–æ–≤–º–µ—Å—Ç–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –¥–∏–∑–∞–π–Ω–æ–≤)
‚úÖ Offline-first –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
‚úÖ –°–∏—Å—Ç–µ–º—ã —Å –≤—ã—Å–æ–∫–æ–π —á–∞—Å—Ç–æ—Ç–æ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π, –≥–¥–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å

**–ö–∞–∫ –∂–∏—Ç—å —Å causal merge –±–µ–∑–æ–ø–∞—Å–Ω–æ:**

**1. –í—ã–±–∏—Ä–∞–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π merge-–∞–ª–≥–æ—Ä–∏—Ç–º**

–†–∞–∑–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö:

- **–¢–µ–∫—Å—Ç:** Operational Transformation (OT) –∏–ª–∏ CRDTs
- **JSON:** JSON Merge Patch, JSON Patch, –∏–ª–∏ custom merge logic
- **–î–µ—Ä–µ–≤—å—è/–≥—Ä–∞—Ñ—ã:** Tree-based merge algorithms
- **–°–ø–∏—Å–∫–∏:** CRDT-—Å–ø–∏—Å–∫–∏ (RGA, WOOT, Logoot)

**2. –û–ø—Ä–µ–¥–µ–ª–∏, —á—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–º**

–ù–µ –≤—Å–µ "–∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã" –Ω–∞ –Ω–∏–∑–∫–æ–º —É—Ä–æ–≤–Ω–µ —è–≤–ª—è—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º–∏:

```
–•–æ—Ä–æ—à–∏–π merge: –î–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ–±–∞–≤–ª—è—é—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –≤ —Ä–∞–∑–Ω—ã–µ —á–∞—Å—Ç–∏ —Å–ø–∏—Å–∫–∞
‚Üí –û–±–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

–†–µ–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç: –î–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –º–µ–Ω—è—é—Ç –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –ø–æ–ª–µ –æ–±—ä–µ–∫—Ç–∞
‚Üí –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ –∏–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
```

**3. –ò—Å–ø–æ–ª—å–∑—É–π —Ç—Ä–µ—Ö—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ —Å–ª–∏—è–Ω–∏–µ (3-way merge)**

–í–º–µ—Å—Ç–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–≤—É—Ö –≤–µ—Ä—Å–∏–π, —Å—Ä–∞–≤–Ω–∏–≤–∞–π –∏—Ö —Å –æ–±—â–∏–º –ø—Ä–µ–¥–∫–æ–º:

```
Base (–æ–±—â–∏–π –ø—Ä–µ–¥–æ–∫): X = 100
Version A: X = 150
Version B: X = 200

–ê–Ω–∞–ª–∏–∑:
- A –∏–∑–º–µ–Ω–∏–ª–∞ X (+50)
- B –∏–∑–º–µ–Ω–∏–ª–∞ X (+100)
‚Üí –û–±–µ –≤–µ—Ä—Å–∏–∏ –∏–∑–º–µ–Ω–∏–ª–∏ –æ–¥–Ω–æ –ø–æ–ª–µ ‚Üí –∫–æ–Ω—Ñ–ª–∏–∫—Ç
```

–≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –æ—Ç–ª–∏—á–∏—Ç—å "–∏–∑–º–µ–Ω–µ–Ω–∏–µ" –æ—Ç "—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è".

**4. –õ–æ–≥–∏—Ä—É–π –∏ –º–æ–Ω–∏—Ç–æ—Ä—å merge-–æ–ø–µ—Ä–∞—Ü–∏–∏**

–¢—Ä–µ–∫–∏:
- –ß–∞—Å—Ç–æ—Ç–∞ —É—Å–ø–µ—à–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö merges
- –ß–∞—Å—Ç–æ—Ç–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞
- –í—Ä–µ–º—è, –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –Ω–∞ merge
- –°–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ merge –ø—Ä–∏–≤–µ–ª –∫ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é

**5. –¢–µ—Å—Ç–∏—Ä—É–π commutative properties**

–ï—Å–ª–∏ –∑–∞—è–≤–ª—è–µ—à—å, —á—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫–æ–º–º—É—Ç–∞—Ç–∏–≤–Ω—ã, –ø–∏—à–∏ property-based —Ç–µ—Å—Ç—ã:

```
Property: merge(A, B) == merge(B, A)

–¢–µ—Å—Ç: –≥–µ–Ω–µ—Ä–∏—Ä—É–π —Å–ª—É—á–∞–π–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä—è–π —Å–≤–æ–π—Å—Ç–≤–æ
```

**6. Compaction –∏—Å—Ç–æ—Ä–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π**

–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Å–∂–∏–º–∞–π –∏—Å—Ç–æ—Ä–∏—é:

```
–î–æ compaction:
- –û–ø–µ—Ä–∞—Ü–∏—è 1: insert "a" at 0
- –û–ø–µ—Ä–∞—Ü–∏—è 2: insert "b" at 1
- –û–ø–µ—Ä–∞—Ü–∏—è 3: delete 1
- –û–ø–µ—Ä–∞—Ü–∏—è 4: insert "c" at 1
... (1000 –æ–ø–µ—Ä–∞—Ü–∏–π)

–ü–æ—Å–ª–µ compaction:
- Snapshot: —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è merge
```

**7. Graceful degradation**

–ï—Å–ª–∏ causal merge –Ω–µ –º–æ–∂–µ—Ç —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –æ—Ç–∫–∞—Ç—ã–≤–∞–π—Å—è –∫ –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:

```
–ü–æ–ø—ã—Ç–∫–∞ causal merge ‚Üí –Ω–µ—É–¥–∞—á–∞
‚Üí Fallback: —Å–æ—Ö—Ä–∞–Ω–∏ –æ–±–µ –≤–µ—Ä—Å–∏–∏ (siblings)
‚Üí –ü–æ–ø—Ä–æ—Å–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç
```

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**

**–ü–∞—Ç—Ç–µ—Ä–Ω 1: Operation-based CRDT**

–í–º–µ—Å—Ç–æ —Ä–µ–ø–ª–∏—Ü–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π, —Ä–µ–ø–ª–∏—Ü–∏—Ä—É–π –æ–ø–µ—Ä–∞—Ü–∏–∏:

```
–£–∑–µ–ª A: –ø—Ä–∏–º–µ–Ω—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ [op1, op2, op3]
‚Üí –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ —É–∑–µ–ª B
–£–∑–µ–ª B: –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Ç–µ –∂–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –ø—Ä–∏—á–∏–Ω–Ω–æ-–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
```

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –û–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ–º–º—É—Ç–∞—Ç–∏–≤–Ω—ã–º–∏
- –û–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º–∏
- –¢—Ä–µ–±—É–µ—Ç—Å—è causal delivery (–¥–æ—Å—Ç–∞–≤–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –ø—Ä–∏—á–∏–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ)

**–ü–∞—Ç—Ç–µ—Ä–Ω 2: Event Sourcing + CQRS**

–í–º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, —Ö—Ä–∞–Ω–∏ –ø–æ—Ç–æ–∫ —Å–æ–±—ã—Ç–∏–π:

```
–°–æ–±—ã—Ç–∏—è:
- UserRegistered(userId: 1, name: "Alice")
- EmailUpdated(userId: 1, email: "alice@example.com")
- AddressAdded(userId: 1, address: "123 Street")

–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ = replay –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π

–ü—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ: —Å–æ–±—ã—Ç–∏—è —Ä–∞–∑–Ω—ã—Ö —É–∑–ª–æ–≤ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ –æ–±—â–∏–π –ø–æ—Ç–æ–∫
```

–°–æ–±—ã—Ç–∏—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –∫–æ–º–º—É—Ç–∞—Ç–∏–≤–Ω—ã, –µ—Å–ª–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã.

**–ü–∞—Ç—Ç–µ—Ä–Ω 3: Delta-state CRDTs**

–í–º–µ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–ª–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏–π, –æ—Ç–ø—Ä–∞–≤–ª—è–π —Ç–æ–ª—å–∫–æ "–¥–µ–ª—å—Ç—É" (–∏–∑–º–µ–Ω–µ–Ω–∏–µ):

```
–°–æ—Å—Ç–æ—è–Ω–∏–µ A: {counter: 5, set: {a, b}}
–î–µ–ª—å—Ç–∞: {counter: +2, set: {c}}
‚Üí –°–æ—Å—Ç–æ—è–Ω–∏–µ A': {counter: 7, set: {a, b, c}}
```

–ë–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —á–µ–º state-based CRDTs, –ø—Ä–æ—â–µ —á–µ–º operation-based.

**–ü–∞—Ç—Ç–µ—Ä–Ω 4: Application-level conflict resolution —Å fallback**

Causal merge –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤, application-defined –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö:

```
def merge(versionA, versionB):
    if can_auto_merge(versionA, versionB):
        return causal_merge(versionA, versionB)
    else:
        return application_merge(versionA, versionB)
```

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –ø–æ–¥—Ö–æ–¥–∞–º–∏

| –ê—Å–ø–µ–∫—Ç | LWW | Version Vectors | Causal Merge |
|--------|-----|-----------------|--------------|
| –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ | –í—Å–µ–≥–¥–∞ | –ù–µ—Ç | –ß–∞—Å—Ç–æ |
| –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö | –¢–µ—Ä—è—é—Ç—Å—è | –í—Å–µ –≤–µ—Ä—Å–∏–∏ | –û–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è |
| –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è |
| –ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ | –°—Ä–µ–¥–Ω–∏–µ | –í—ã—Å–æ–∫–∏–µ |
| –ü—Ä–∏—á–∏–Ω–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å | –ù–µ—Ç | –î–∞ | –î–∞ |
| –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é | –ù–µ—Ç | Merge logic | Merge logic + —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö |

---

## Application-Defined Resolution

### –°—É—Ç—å –ø–æ–¥—Ö–æ–¥–∞

Application-defined resolution (—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è) ‚Äî —ç—Ç–æ –ø–æ–¥—Ö–æ–¥, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º —Å–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, –Ω–æ –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –≤–µ—Ä—Å–∏–∏ –∏ —Å–∞–º —Ä–µ—à–∞–µ—Ç, –∫–∞–∫ –∏—Ö –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å, –∏—Å–ø–æ–ª—å–∑—É—è –∑–Ω–∞–Ω–∏–µ –æ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ –∏ —Å–µ–º–∞–Ω—Ç–∏–∫–µ –¥–∞–Ω–Ω—ã—Ö.

**–ê–Ω–∞–ª–æ–≥–∏—è:** –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã –º–µ–Ω–µ–¥–∂–µ—Ä –≤ –∫–æ–º–ø–∞–Ω–∏–∏. –î–≤–∞ —Ç–≤–æ–∏—Ö –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–∏–ª–∏ —Ä–∞–∑–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –æ–¥–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±—Ä–∞—Ç—å –æ–¥–Ω–æ (–∫–∞–∫ LWW) –∏–ª–∏ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –∏—Ö –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –∏–¥–µ–∏ –ø–æ —à–∞–±–ª–æ–Ω—É (–∫–∞–∫ causal merge), —Ç—ã —Å–∞–º –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—à—å –æ–±–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, —É—á–∏—Ç—ã–≤–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –±–∏–∑–Ω–µ—Å–∞, –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—à—å —Ä–µ—à–µ–Ω–∏–µ.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞:** –°–∏—Å—Ç–µ–º–∞ (–æ–±—ã—á–Ω–æ —Å –ø–æ–º–æ—â—å—é version vectors –∏–ª–∏ –¥—Ä—É–≥–æ–≥–æ –º–µ—Ö–∞–Ω–∏–∑–º–∞) –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –≤–µ—Ä—Å–∏–π –æ–±—ä–µ–∫—Ç–∞.

2. **–í–æ–∑–≤—Ä–∞—Ç –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π:** –ü—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Å–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –≤—Å–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –≤–µ—Ä—Å–∏–∏ (siblings).

3. **Application merge logic:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Å–≤–æ—é –ª–æ–≥–∏–∫—É –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –≤–µ—Ä—Å–∏–π. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å:
   - –ê–Ω–∞–ª–∏–∑ –ø–æ–ª–µ–π –∏ –≤—ã–±–æ—Ä "–ª—É—á—à–∏—Ö" –∑–Ω–∞—á–µ–Ω–∏–π
   - –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤)
   - –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "—Ü–µ–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç —É–º–µ–Ω—å—à–∞—Ç—å—Å—è")
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

4. **–ó–∞–ø–∏—Å—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –æ–±—Ä–∞—Ç–Ω–æ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

```
1. Read request –¥–ª—è –æ–±—ä–µ–∫—Ç–∞ "user_profile"
   ‚Üì
2. –•—Ä–∞–Ω–∏–ª–∏—â–µ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç 2 sibling versions:
   - Version A: {name: "Alice", age: 30, city: "Moscow"}
   - Version B: {name: "Alice", age: 31, city: "Moscow"}
   ‚Üì
3. –•—Ä–∞–Ω–∏–ª–∏—â–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –û–ë–ï –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
   ‚Üì
4. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç merge logic:
   - name: –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π ‚Üí "Alice"
   - age: 30 vs 31 ‚Üí –≤—ã–±—Ä–∞—Ç—å max ‚Üí 31 (–ª–æ–≥–∏–∫–∞: "age —Ç–æ–ª—å–∫–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è")
   - city: –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π ‚Üí "Moscow"
   ‚Üì
5. Merged version: {name: "Alice", age: 31, city: "Moscow"}
   ‚Üì
6. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∏—à–µ—Ç merged version –æ–±—Ä–∞—Ç–Ω–æ
   ‚Üì
7. –ö–æ–Ω—Ñ–ª–∏–∫—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

**Riak —Å application-level resolution:**

Riak –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç siblings –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –≤–µ—Ä—Å–∏–∏ –∏ —Ä–µ—à–∞–µ—Ç, –∫–∞–∫ –∏—Ö –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å.

–ü—Ä–∏–º–µ—Ä –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Riak:
```
GET /buckets/users/keys/alice
Response:
{
  "siblings": [
    {"name": "Alice", "email": "alice@example.com", "login_count": 10},
    {"name": "Alice", "email": "alice@newmail.com", "login_count": 12}
  ]
}

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–µ—à–∞–µ—Ç:
- email: –≤–∑—è—Ç—å –∏–∑ –±–æ–ª–µ–µ —Å–≤–µ–∂–µ–π –≤–µ—Ä—Å–∏–∏
- login_count: –≤–∑—è—Ç—å –º–∞–∫—Å–∏–º—É–º
```

**DynamoDB —Å conditional writes:**

DynamoDB –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç siblings –Ω–∞–ø—Ä—è–º—É—é, –Ω–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å compare-and-swap –ª–æ–≥–∏–∫—É:

```
1. Read item —Å –µ–≥–æ version
2. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ
3. Write —Å —É—Å–ª–æ–≤–∏–µ–º "—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ version –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è"
4. –ï—Å–ª–∏ –≤–µ—Ä—Å–∏—è –∏–∑–º–µ–Ω–∏–ª–∞—Å—å ‚Üí retry —Å –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π
```

**Cassandra —Å LWW + application logic:**

–î–∞–∂–µ –∏—Å–ø–æ–ª—å–∑—É—è LWW –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç–æ–ª–±—Ü–æ–≤, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É:

```
–¢–∞–±–ª–∏—Ü–∞ counters:
- user_id
- counter_value (—Å LWW)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç:
1. –ß–∏—Ç–∞—Ç—å counter_value
2. –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
3. –ü–∏—Å–∞—Ç—å –æ–±—Ä–∞—Ç–Ω–æ

–ù–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, Paxos-based writes).
```

**CouchDB —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏-–∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º–∏:**

CouchDB —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –≤–µ—Ä—Å–∏–∏ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ä–µ–≤–∏–∑–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç:

```
1. –ó–∞–ø—Ä–æ—Å–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º ?conflicts=true
2. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ conflicting revisions
3. –ü—Ä–æ—á–∏—Ç–∞—Ç—å –≤—Å–µ —Ä–µ–≤–∏–∑–∏–∏
4. –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –∏—Ö –ø–æ —Å–≤–æ–µ–π –ª–æ–≥–∏–∫–µ
5. –ó–∞–ø–∏—Å–∞—Ç—å –Ω–æ–≤—É—é —Ä–µ–≤–∏–∑–∏—é –∏ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ
```

### –ß—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç application-defined resolution

‚úÖ **–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—É—é –ª–æ–≥–∏–∫—É, –≤ —Ç–æ–º —á–∏—Å–ª–µ —Å–ª–æ–∂–Ω—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.

‚úÖ **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å:** –¢–æ–ª—å–∫–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ –æ–∑–Ω–∞—á–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –∏ –∫–∞–∫ –∏—Ö –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å.

‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å:** –†–∞–∑–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –∏–ª–∏ –¥–∞–∂–µ –ø–æ–ª–µ–π.

‚úÖ **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –¥—Ä—É–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –ø—Ä–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞.

‚úÖ **–≠–≤–æ–ª—é—Ü–∏—è –ª–æ–≥–∏–∫–∏:** Merge-–ª–æ–≥–∏–∫–∞ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.

### –ß–µ–≥–æ –ù–ï –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç application-defined resolution

‚ùå **–ü—Ä–æ—Å—Ç–æ—Ç—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ merge-–ª–æ–≥–∏–∫–∏.

‚ùå **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** Merge –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.

‚ùå **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å "–∏–∑ –∫–æ—Ä–æ–±–∫–∏":** –õ–µ–≥–∫–æ –¥–æ–ø—É—Å—Ç–∏—Ç—å –æ—à–∏–±–∫—É –≤ merge-–ª–æ–≥–∏–∫–µ.

‚ùå **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ:** –†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–≥—É—Ç –∏–º–µ—Ç—å —Ä–∞–∑–Ω—É—é merge-–ª–æ–≥–∏–∫—É.

‚ùå **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ:** –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ offline, –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è.

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã

**–ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è merge-–ª–æ–≥–∏–∫–∞**

–°–∞–º–∞—è —á–∞—Å—Ç–∞—è –ø—Ä–æ–±–ª–µ–º–∞ ‚Äî —ç—Ç–æ –±–∞–≥–∏ –≤ –ª–æ–≥–∏–∫–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è.

**–°—Ü–µ–Ω–∞—Ä–∏–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞ - e-commerce –∫–æ—Ä–∑–∏–Ω–∞:**

```
–î–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç –∫–æ—Ä–∑–∏–Ω—É:

–ò—Å—Ö–æ–¥–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞: {items: ["Apple", "Banana"], total: 150}

–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ A: –¥–æ–±–∞–≤–ª—è–µ—Ç "Orange" ‚Üí {items: ["Apple", "Banana", "Orange"], total: 200}
–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ B: —É–¥–∞–ª—è–µ—Ç "Apple" ‚Üí {items: ["Banana"], total: 100}

–ù–∞–∏–≤–Ω–∞—è merge-–ª–æ–≥–∏–∫–∞:
- items: union sets ‚Üí ["Apple", "Banana", "Orange"]
- total: max ‚Üí 200

–†–µ–∑—É–ª—å—Ç–∞—Ç: {items: ["Apple", "Banana", "Orange"], total: 200}

–ü—Ä–æ–±–ª–µ–º–∞: "Apple" –±—ã–ª —É–¥–∞–ª–µ–Ω –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ B, –Ω–æ –ø–æ—è–≤–∏–ª—Å—è –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏!
–ï—â–µ —Ö—É–∂–µ: total = 200, –Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 150 (Banana + Orange)
```

**–†–µ–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π:** –í –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –º–∞–≥–∞–∑–∏–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∂–∞–ª–æ–≤–∞–ª–∏—Å—å, —á—Ç–æ —Ç–æ–≤–∞—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ —É–¥–∞–ª–∏–ª–∏ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã, "–≤–æ–∑–≤—Ä–∞—â–∞–ª–∏—Å—å –æ–±—Ä–∞—Ç–Ω–æ" –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏. –ü—Ä–∏—á–∏–Ω–∞ ‚Äî –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è merge-–ª–æ–≥–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –¥–µ–ª–∞–ª–∞ union items –±–µ–∑ —É—á–µ—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–π —É–¥–∞–ª–µ–Ω–∏—è.

**–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞:** –ù—É–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –Ω–æ –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ (add/remove).

**–ü—Ä–æ–±–ª–µ–º–∞ 2: –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –∏–∑-–∑–∞ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏**

**–°—Ü–µ–Ω–∞—Ä–∏–π - –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**

```
–ò—Å—Ö–æ–¥–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å: {name: "Alice", bio: "Developer", avatar: "old.jpg"}

Version A: {name: "Alice Smith", bio: "Developer", avatar: "old.jpg"}
Version B: {name: "Alice", bio: "Senior Developer", avatar: "new.jpg"}

–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è merge-–ª–æ–≥–∏–∫–∞: "last-write-wins per field"
- name: "Alice" vs "Alice Smith" ‚Üí –∫–∞–∫ –≤—ã–±—Ä–∞—Ç—å? –í—ã–±–∏—Ä–∞–µ–º –≤–µ—Ä—Å–∏—é B
- bio: "Developer" vs "Senior Developer" ‚Üí –≤—ã–±–∏—Ä–∞–µ–º –≤–µ—Ä—Å–∏—é B
- avatar: "old.jpg" vs "new.jpg" ‚Üí –≤—ã–±–∏—Ä–∞–µ–º –≤–µ—Ä—Å–∏—é B

–†–µ–∑—É–ª—å—Ç–∞—Ç: Version B –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–±–µ–∂–¥–∞–µ—Ç

–ü—Ä–æ–±–ª–µ–º–∞: –ò–∑–º–µ–Ω–µ–Ω–∏–µ name –≤ –≤–µ—Ä—Å–∏–∏ A –ø–æ—Ç–µ—Ä—è–Ω–æ!
```

**–†–µ–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±–Ω–æ–≤–∏–ª —Å–≤–æ—ë –∏–º—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –Ω–æ –∏–∑-–∑–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±—ã–ª–æ –ø–æ—Ç–µ—Ä—è–Ω–æ. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—ã–ª –æ—á–µ–Ω—å –Ω–µ–¥–æ–≤–æ–ª–µ–Ω, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ –±—Ä–∞–∫–∞ (—Å–º–µ–Ω–∞ —Ñ–∞–º–∏–ª–∏–∏).

**–ü—Ä–æ–±–ª–µ–º–∞ 3: –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ü–∏–∫–ª—ã merge**

**–°—Ü–µ–Ω–∞—Ä–∏–π:**

```
–í–µ—Ä—Å–∏—è A: {counter: 10}
–í–µ—Ä—Å–∏—è B: {counter: 15}

Merge-–ª–æ–≥–∏–∫–∞: counter = A.counter + B.counter = 25

–ü—Ä–æ–±–ª–µ–º–∞: –≠—Ç–æ –Ω–µ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è!

–ï—Å–ª–∏ merge –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –¥–≤–∞–∂–¥—ã:
- –ü–µ—Ä–≤—ã–π merge: 10 + 15 = 25
- –í—Ç–æ—Ä–æ–π merge: 25 + 15 = 40 (!)

–ï—Å–ª–∏ —Ä–∞–∑–Ω—ã–µ —É–∑–ª—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç merge –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ, –∫–∞–∂–¥—ã–π –ø–æ–ª—É—á–∏—Ç —Å–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
```

**–†–µ–∞–ª—å–Ω—ã–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç:** –í —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ —É—á–µ—Ç–∞ –º–µ—Ç—Ä–∏–∫ –∫–∞–∂–¥—ã–π —É–∑–µ–ª –ø—ã—Ç–∞–ª—Å—è –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —Å—á–µ—Ç—á–∏–∫–∏ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º. –ò–∑-–∑–∞ —Ä–µ—Ç—Ä–∞–µ–≤ –∏ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫ merge –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, –∏ —Å—á–µ—Ç—á–∏–∫–∏ "—Ä–∞–∑–º–Ω–æ–∂–∞–ª–∏—Å—å". –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –±–æ–ª—å—à–µ —Å–æ–±—ã—Ç–∏–π, —á–µ–º –±—ã–ª–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ.

**–†–µ—à–µ–Ω–∏–µ:** Merge-–ª–æ–≥–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–π –∏ –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω–æ–π.

**–ü—Ä–æ–±–ª–µ–º–∞ 4: –ù–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è merge-–ª–æ–≥–∏–∫–∞ –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

**–°—Ü–µ–Ω–∞—Ä–∏–π:**

```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ 1.0:
def merge(a, b):
    return {"value": max(a.value, b.value)}

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ 2.0:
def merge(a, b):
    return {"value": min(a.value, b.value)}

–ï—Å–ª–∏ —Ä–∞–∑–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏, –æ–Ω–∏ –±—É–¥—É—Ç —Ä–∞–∑—Ä–µ—à–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø–æ-—Ä–∞–∑–Ω–æ–º—É!
```

**–†–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é. –ü—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ç–∞—Ä–∞—è –∏ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏–∏ —Ä–∞–∑—Ä–µ—à–∞–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø–æ-—Ä–∞–∑–Ω–æ–º—É, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ "–±–∏—Ç–≤–µ" –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ä–∞–∑—Ä–µ—à–∞–ª–∏—Å—å, –∑–∞—Ç–µ–º —Å–Ω–æ–≤–∞ –ø–æ—è–≤–ª—è–ª–∏—Å—å.

**–†–µ—à–µ–Ω–∏–µ:** –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å merge-–ª–æ–≥–∏–∫—É –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å.

**–ü—Ä–æ–±–ª–µ–º–∞ 5: –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ siblings**

**–ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω:**

```
Response from DB:
{
  "siblings": [versionA, versionB, versionC]
}

–ü–ª–æ—Ö–æ–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
result = response.siblings[0]  // –ü—Ä–æ—Å—Ç–æ –±–µ—Ä–µ–º –ø–µ—Ä–≤—É—é –≤–µ—Ä—Å–∏—é!
```

**–ò–Ω—Ü–∏–¥–µ–Ω—Ç:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–µ –∑–Ω–∞–ª–∏, —á—Ç–æ Riak –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å siblings, –∏ –≤ –∫–æ–¥–µ –ø—Ä–æ—Å—Ç–æ –±—Ä–∞–ª–∏ –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏–∑ —Å–ø–∏—Å–∫–∞. –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –Ω–∞–∫–∞–ø–ª–∏–≤–∞–ª–∏—Å—å, –∏ —Å–ª—É—á–∞–π–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Ç–µ—Ä—è–ª–∏—Å—å.

### –ü—Ä–∞–∫—Ç–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å application-defined resolution

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å application-defined resolution:**

‚úÖ –ö–æ–≥–¥–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å–ª–æ–∂–Ω–∞—è –∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞ –¥–ª—è –¥–æ–º–µ–Ω–∞
‚úÖ –ö–æ–≥–¥–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (LWW, CRDTs) –Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç
‚úÖ –î–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –≥–¥–µ –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–∞
‚úÖ –ö–æ–≥–¥–∞ —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –ø–æ–ª–µ–π —Ç—Ä–µ–±—É—é—Ç —Ä–∞–∑–Ω–æ–π –ª–æ–≥–∏–∫–∏
‚úÖ –í —Å–∏—Å—Ç–µ–º–∞—Ö —Å –Ω–µ—á–∞—Å—Ç—ã–º–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º–∏ (–µ—Å–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —á–∞—Å—Ç—ã–µ, —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–∫–ª–∞–¥–Ω–æ)

**–ü—Ä–∏–Ω—Ü–∏–ø—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ–π merge-–ª–æ–≥–∏–∫–∏:**

**1. –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**

Merge –¥–æ–ª–∂–µ–Ω –¥–∞–≤–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏:

```
merge(merge(A, B), B) == merge(A, B)
```

**2. –ö–æ–º–º—É—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å**

–ü–æ—Ä—è–¥–æ–∫ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –Ω–µ –¥–æ–ª–∂–µ–Ω –≤–ª–∏—è—Ç—å –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

```
merge(A, B) == merge(B, A)
```

**3. –ê—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å**

–ü—Ä–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–∏ —Ç—Ä–µ—Ö –≤–µ—Ä—Å–∏–π –ø–æ—Ä—è–¥–æ–∫ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –Ω–µ –≤–∞–∂–µ–Ω:

```
merge(A, merge(B, C)) == merge(merge(A, B), C)
```

–≠—Ç–∏ —Å–≤–æ–π—Å—Ç–≤–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å—Ä–µ–¥–µ.

**–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ merge –ø–æ —Ç–∏–ø–∞–º –¥–∞–Ω–Ω—ã—Ö:**

**–î–ª—è —Å–∫–∞–ª—è—Ä–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π:**

```
–ß–∏—Å–ª–∞:
- –°—á–µ—Ç—á–∏–∫–∏: —Å—É–º–º–∞ (–Ω–æ –Ω—É–∂–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è)
- –¶–µ–Ω—ã: max –∏–ª–∏ min (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª)
- –í–æ–∑—Ä–∞—Å—Ç: max (–≤–æ–∑—Ä–∞—Å—Ç —Ç–æ–ª—å–∫–æ —Ä–∞—Å—Ç–µ—Ç)

–°—Ç—Ä–æ–∫–∏:
- –ò–º—è: –µ—Å–ª–∏ —Ä–∞–∑–Ω—ã–µ ‚Üí –∫–æ–Ω—Ñ–ª–∏–∫—Ç, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
- Email: –≤–∑—è—Ç—å –±–æ–ª–µ–µ –¥–ª–∏–Ω–Ω—ã–π/–±–æ–ª–µ–µ –Ω–æ–≤—ã–π/—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –¥–æ–º–µ–Ω–æ–º
- URL: –≤–∑—è—Ç—å —Å https, –µ—Å–ª–∏ –µ—Å—Ç—å

–ë—É–ª–µ–≤—ã –∑–Ω–∞—á–µ–Ω–∏—è:
- –§–ª–∞–≥–∏ –ø–æ–¥–ø–∏—Å–æ–∫: OR (–µ—Å–ª–∏ —Ö–æ—Ç—å –≥–¥–µ-—Ç–æ true, –∑–Ω–∞—á–∏—Ç –ø–æ–¥–ø–∏—Å–∞–Ω)
- –§–ª–∞–≥–∏ —É–¥–∞–ª–µ–Ω–∏—è: OR (–µ—Å–ª–∏ –≥–¥–µ-—Ç–æ —É–¥–∞–ª–µ–Ω–æ, —Å—á–∏—Ç–∞—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–º)
```

**–î–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–π:**

```
Sets (–º–Ω–æ–∂–µ—Å—Ç–≤–∞):
- Union: –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã (–¥–ª—è add-only –¥–∞–Ω–Ω—ã—Ö)
- Observed-Remove Set: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CRDT-–ª–æ–≥–∏–∫—É

Lists (—Å–ø–∏—Å–∫–∏):
- Append-only: concatenate —Å–ø–∏—Å–∫–∏
- –° —É–¥–∞–ª–µ–Ω–∏—è–º–∏: —Å–ª–æ–∂–Ω–µ–µ, –Ω—É–∂–Ω—ã tombstones –∏–ª–∏ CRDT

Maps (—Å–ª–æ–≤–∞—Ä–∏):
- Per-field merge: –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –∫–∞–∂–¥–æ–µ –ø–æ–ª–µ –ø–æ —Å–≤–æ–µ–π –ª–æ–≥–∏–∫–µ
- Nested objects: —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π merge
```

**–î–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤:**

```
–ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫—É–ø–æ–∫:
- Items: union, –Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å tombstones –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω—ã—Ö
- Quantities: sum, –µ—Å–ª–∏ –æ–¥–∏–Ω —Ç–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω —Å —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- Total: –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ items

–ö–∞–ª–µ–Ω–¥–∞—Ä—å/—Å–æ–±—ã—Ç–∏—è:
- –ï—Å–ª–∏ –æ–¥–Ω–æ —Å–æ–±—ã—Ç–∏–µ –∏–∑–º–µ–Ω–µ–Ω–æ –ø–æ-—Ä–∞–∑–Ω–æ–º—É: —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±–∞, –¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤—ã–±—Ä–∞—Ç—å
- –ï—Å–ª–∏ —Å–æ–±—ã—Ç–∏–µ —É–¥–∞–ª–µ–Ω–æ –Ω–∞ –æ–¥–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –∏ –∏–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ –¥—Ä—É–≥–æ–º: —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–±–µ–∂–¥–∞–µ—Ç (–æ–±—ã—á–Ω–æ)

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- Per-setting merge
- –ú–æ–∂–Ω–æ –∏–º–µ—Ç—å timestamp –Ω–∞ –∫–∞–∂–¥—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –æ—Ç–¥–µ–ª—å–Ω–æ
```

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**

**–ü–∞—Ç—Ç–µ—Ä–Ω 1: Semantic merge —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π**

–û–ø—Ä–µ–¥–µ–ª–∏ —Ç–∏–ø—ã merge –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è:

```
Schema:
{
  "name": {type: "string", merge: "take_longer"},
  "age": {type: "number", merge: "max"},
  "email": {type: "string", merge: "prefer_verified"},
  "tags": {type: "set", merge: "union"}
}

Merge function:
for field in object:
    result[field] = apply_merge_strategy(field.merge, versionA[field], versionB[field])
```

**–ü–∞—Ç—Ç–µ—Ä–Ω 2: Multi-value register**

–í–º–µ—Å—Ç–æ –≤—ã–±–æ—Ä–∞ –æ–¥–Ω–æ–π –≤–µ—Ä—Å–∏–∏, —Ö—Ä–∞–Ω–∏ –≤—Å–µ –≤–µ—Ä—Å–∏–∏ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:

```
User profile name:
- Versions: ["Alice", "Alice Smith", "A. Smith"]
- UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: "Conflict detected. Choose the correct name:"
  ‚óã Alice
  ‚óã Alice Smith
  ‚óã A. Smith
  ‚óã Enter manually: _______
```

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤: CouchDB (—è–≤–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã), –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö collaborative tools.

**–ü–∞—Ç—Ç–µ—Ä–Ω 3: Custom merge —Å fallback**

```
def resolve_conflict(versions):
    try:
        # –ü–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ merge
        return auto_merge(versions)
    except UnresolvableConflict:
        # Fallback: —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
        return create_conflict_resolution_task(versions)
```

**–ü–∞—Ç—Ç–µ—Ä–Ω 4: Versioned merge logic**

–•—Ä–∞–Ω–∏ –≤–µ—Ä—Å–∏—é merge-–ª–æ–≥–∏–∫–∏ –≤–º–µ—Å—Ç–µ —Å –¥–∞–Ω–Ω—ã–º–∏:

```
Object:
{
  "data": {...},
  "merge_version": 2
}

–ü—Ä–∏ merge:
- –ï—Å–ª–∏ merge_version —Ä–∞–∑–Ω—ã–µ, –∏—Å–ø–æ–ª—å–∑—É–π –ª–æ–≥–∏–∫—É –æ—Ç —Å—Ç–∞—Ä—à–µ–π –≤–µ—Ä—Å–∏–∏
- –ò–ª–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π –æ–±—ä–µ–∫—Ç –∫ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –ø–µ—Ä–µ–¥ merge
```

**–ü–∞—Ç—Ç–µ—Ä–Ω 5: Operational merge**

–•—Ä–∞–Ω–∏ –Ω–µ —Ç–æ–ª—å–∫–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –Ω–æ –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏:

```
–í–º–µ—Å—Ç–æ:
- Version A: {items: ["Apple", "Orange"]}
- Version B: {items: ["Banana", "Orange"]}

–•—Ä–∞–Ω–∏:
- Version A: {ops: [add("Apple"), add("Orange"), remove("Banana")]}
- Version B: {ops: [add("Banana")]}

Merge: –æ–±—ä–µ–¥–∏–Ω—è–π –æ–ø–µ—Ä–∞—Ü–∏–∏, –∞ –Ω–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```

–≠—Ç–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —É–¥–∞–ª–µ–Ω–∏–π.

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ merge-–ª–æ–≥–∏–∫–∏:**

**1. Unit —Ç–µ—Å—Ç—ã –¥–ª—è –±–∞–∑–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤:**

```
Test: merge_same_values()
  A = {name: "Alice"}
  B = {name: "Alice"}
  assert merge(A, B) == {name: "Alice"}

Test: merge_different_scalars()
  A = {age: 30}
  B = {age: 31}
  assert merge(A, B) == {age: 31}  // –∏–ª–∏ –ø–æ —Ç–≤–æ–µ–π –ª–æ–≥–∏–∫–µ
```

**2. Property-based tests:**

```
Property: commutativity
  for all A, B: merge(A, B) == merge(B, A)

Property: idempotence
  for all A, B: merge(merge(A, B), B) == merge(A, B)
```

**3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º–∏:**

```
Simulate:
- –ù–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω—è—é—Ç –æ–±—ä–µ–∫—Ç
- –°–ª—É—á–∞–π–Ω—ã–µ network partitions
- Verify: —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ
```

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã:**

1. **–ß–∞—Å—Ç–æ—Ç–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤:**
   - –ï—Å–ª–∏ —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∞—è ‚Üí –≤–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

2. **–í—Ä–µ–º—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤:**
   - –ï—Å–ª–∏ –º–µ–¥–ª–µ–Ω–Ω–æ ‚Üí –Ω—É–∂–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è merge-–ª–æ–≥–∏–∫–∏

3. **–ù–µ—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã:**
   - –ï—Å–ª–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è ‚Üí –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

4. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤:**
   - –°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ siblings
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ siblings

---

## CRDT Merge Semantics

### –°—É—Ç—å –ø–æ–¥—Ö–æ–¥–∞

CRDT (Conflict-free Replicated Data Type, —Ä–µ–ø–ª–∏—Ü–∏—Ä—É–µ–º—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤) ‚Äî —ç—Ç–æ —Å–µ–º–µ–π—Å—Ç–≤–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç, —á—Ç–æ –ø—Ä–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö –≤—Å–µ —Ä–µ–ø–ª–∏–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ö–æ–¥—è—Ç—Å—è –∫ –æ–¥–Ω–æ–º—É –∏ —Ç–æ–º—É –∂–µ —Å–æ—Å—Ç–æ—è–Ω–∏—é –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

**–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è:** –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –±—ã–ª–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã –ø–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é.

**–ê–Ω–∞–ª–æ–≥–∏—è:** –ü—Ä–µ–¥—Å—Ç–∞–≤—å –¥–≤–∞ —á–µ–ª–æ–≤–µ–∫–∞, –∫–æ—Ç–æ—Ä—ã–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –±—Ä–æ—Å–∞—é—Ç –º–æ–Ω–µ—Ç—ã –≤ –∫–æ–ø–∏–ª–∫—É. –ù–µ –≤–∞–∂–Ω–æ, –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –º–æ–Ω–µ—Ç—ã —É–ø–∞–ª–∏, –≤ –∫–æ–Ω—Ü–µ –≤ –∫–æ–ø–∏–ª–∫–µ –±—É–¥–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–Ω–µ–≥. –û–ø–µ—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–µ–Ω–µ–≥ –≤ –∫–æ–ø–∏–ª–∫—É –∫–æ–º–º—É—Ç–∞—Ç–∏–≤–Ω–∞ –∏ –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω–∞ ‚Äî —ç—Ç–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π CRDT.

### –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å–Ω–æ–≤–∞

CRDTs –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ —Ç–µ–æ—Ä–∏–∏ —Ä–µ—à–µ—Ç–æ–∫ (lattice theory). –î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –±—ã–ª–∞ CRDT, –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –æ–±–ª–∞–¥–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞–º–∏:

1. **–ö–æ–º–º—É—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å:** `a ‚äï b = b ‚äï a`
2. **–ê—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å:** `(a ‚äï b) ‚äï c = a ‚äï (b ‚äï c)`
3. **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:** `a ‚äï a = a`

–ì–¥–µ `‚äï` ‚Äî –æ–ø–µ—Ä–∞—Ü–∏—è —Å–ª–∏—è–Ω–∏—è (merge).

–≠—Ç–∏ —Å–≤–æ–π—Å—Ç–≤–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç, —á—Ç–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø–æ—Ä—è–¥–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–≤—Ç–æ—Ä–æ–≤, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º.

### –î–≤–∞ —Ç–∏–ø–∞ CRDTs

**State-based CRDTs (CvRDT):**
- –†–µ–ø–ª–∏–∫–∏ –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è –ø–æ–ª–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- Merge –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π
- –¢—Ä–µ–±—É—é—Ç —Ç–æ–ª—å–∫–æ eventual delivery (–¥–æ—Å—Ç–∞–≤–∫–∞ –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ)
- –ë–æ–ª—å—à–µ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞, –Ω–æ –ø—Ä–æ—â–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

**Operation-based CRDTs (CmRDT):**
- –†–µ–ø–ª–∏–∫–∏ –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- –û–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ –ø—Ä–∏—á–∏–Ω–Ω–æ-–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
- –¢—Ä–µ–±—É—é—Ç causal delivery –∏–ª–∏ idempotent operations
- –ú–µ–Ω—å—à–µ —Ç—Ä–∞—Ñ–∏–∫–∞, –Ω–æ —Å–ª–æ–∂–Ω–µ–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã CRDTs

**1. G-Counter (Grow-only Counter)**

–°—á–µ—Ç—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π —Ç–æ–ª—å–∫–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è.

```
–°—Ç—Ä—É–∫—Ç—É—Ä–∞: {nodeA: 5, nodeB: 3, nodeC: 2}
–ó–Ω–∞—á–µ–Ω–∏–µ: sum = 5 + 3 + 2 = 10

–û–ø–µ—Ä–∞—Ü–∏—è increment –Ω–∞ —É–∑–ª–µ A:
{nodeA: 6, nodeB: 3, nodeC: 2}

Merge –¥–≤—É—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π:
State1: {nodeA: 6, nodeB: 3, nodeC: 2}
State2: {nodeA: 5, nodeB: 4, nodeC: 2}
Merged: {nodeA: max(6,5)=6, nodeB: max(3,4)=4, nodeC: max(2,2)=2}
      = {nodeA: 6, nodeB: 4, nodeC: 2}
–ó–Ω–∞—á–µ–Ω–∏–µ: 6 + 4 + 2 = 12
```

**–°–≤–æ–π—Å—Ç–≤–∞:**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π
- ‚úÖ –í—Å–µ–≥–¥–∞ —Å—Ö–æ–¥–∏—Ç—Å—è
- ‚ùå –¢–æ–ª—å–∫–æ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç, –¥–µ–∫—Ä–µ–º–µ–Ω—Ç –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –°—á–µ—Ç—á–∏–∫–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤, –ª–∞–π–∫–æ–≤, –ª—é–±—ã–µ –º–µ—Ç—Ä–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ç–æ–ª—å–∫–æ —Ä–∞—Å—Ç—É—Ç.

**2. PN-Counter (Positive-Negative Counter)**

–°—á–µ—Ç—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∏ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å—Å—è, –∏ —É–º–µ–Ω—å—à–∞—Ç—å—Å—è.

```
–°—Ç—Ä—É–∫—Ç—É—Ä–∞:
- P (positive): {nodeA: 10, nodeB: 5}
- N (negative): {nodeA: 3, nodeB: 2}

–ó–Ω–∞—á–µ–Ω–∏–µ: sum(P) - sum(N) = (10+5) - (3+2) = 10

Increment –Ω–∞ —É–∑–ª–µ A: P[A]++
Decrement –Ω–∞ —É–∑–ª–µ A: N[A]++

Merge: merge(P1, P2) –¥–ª—è P, merge(N1, N2) –¥–ª—è N (–∫–∞–∫ –≤ G-Counter)
```

**–°–≤–æ–π—Å—Ç–≤–∞:**
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç –∏ –¥–µ–∫—Ä–µ–º–µ–Ω—Ç
- ‚úÖ –í—Å–µ–≥–¥–∞ —Å—Ö–æ–¥–∏—Ç—Å—è
- ‚ùå –†–∞–∑–º–µ—Ä —Ä–∞—Å—Ç–µ—Ç —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —É–∑–ª–æ–≤
- ‚ùå –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç–∏–ø–∞ "—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ 0"

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –õ—é–±—ã–µ —Å—á–µ—Ç—á–∏–∫–∏ (—Å—á–µ—Ç—á–∏–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ, balance –∏ —Ç.–¥.).

**3. G-Set (Grow-only Set)**

–ú–Ω–æ–∂–µ—Å—Ç–≤–æ, –≤ –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã.

```
Set1: {apple, banana}
Set2: {banana, orange}

Merge: union(Set1, Set2) = {apple, banana, orange}
```

**–°–≤–æ–π—Å—Ç–≤–∞:**
- ‚úÖ –û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–π
- ‚úÖ –í—Å–µ–≥–¥–∞ —Å—Ö–æ–¥–∏—Ç—Å—è
- ‚ùå –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ
- ‚ùå –†–∞—Å—Ç–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –ö–æ–ª–ª–µ–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —É–º–µ–Ω—å—à–∞—é—Ç—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–≥–¥–∞-–ª–∏–±–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π).

**4. 2P-Set (Two-Phase Set)**

–ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω–∏—è (–Ω–æ —ç–ª–µ–º–µ–Ω—Ç –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑).

```
–°—Ç—Ä—É–∫—Ç—É—Ä–∞:
- A (added set): {apple, banana, orange}
- R (removed set): {banana}

–ó–Ω–∞—á–µ–Ω–∏–µ: A \ R = {apple, orange}

Add(x): A = A ‚à™ {x}
Remove(x): R = R ‚à™ {x}  (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ x ‚àà A)

Merge:
- A_merged = A1 ‚à™ A2
- R_merged = R1 ‚à™ R2
```

**–°–≤–æ–π—Å—Ç–≤–∞:**
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ
- ‚ùå –≠–ª–µ–º–µ–Ω—Ç –Ω–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
- ‚ùå –†–∞–∑–º–µ—Ä —Ä–∞—Å—Ç–µ—Ç (tombstones –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è)

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –ü—Ä–æ—Å—Ç—ã–µ —Å–ª—É—á–∞–∏, –≥–¥–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ.

**5. LWW-Element-Set (Last-Write-Wins Element Set)**

–ú–Ω–æ–∂–µ—Å—Ç–≤–æ, –≥–¥–µ –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏–º–µ–µ—Ç timestamp, –∏ —É–¥–∞–ª–µ–Ω–∏–µ/–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ LWW.

```
–°—Ç—Ä—É–∫—Ç—É—Ä–∞:
- A: {(apple, t=100), (banana, t=150)}
- R: {(banana, t=200)}

–≠–ª–µ–º–µ–Ω—Ç –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–µ, –µ—Å–ª–∏:
- (element, t_add) ‚àà A
- ‚àÄ (element, t_remove) ‚àà R: t_add > t_remove

–í –ø—Ä–∏–º–µ—Ä–µ: banana —É–¥–∞–ª–µ–Ω–∞ (t_remove=200 > t_add=150)
```

**–°–≤–æ–π—Å—Ç–≤–∞:**
- ‚úÖ –≠–ª–µ–º–µ–Ω—Ç—ã –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ
- ‚ùå –ó–∞–≤–∏—Å–∏—Ç –æ—Ç clock synchronization
- ‚ùå –ú–æ–∂–µ—Ç –ø–æ—Ç–µ—Ä—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ (–∫–∞–∫ –æ–±—ã—á–Ω—ã–π LWW)

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –≥–∏–±–∫–æ—Å—Ç—å add/remove —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ LWW.

**6. OR-Set (Observed-Remove Set)**

–ú–Ω–æ–∂–µ—Å—Ç–≤–æ, –≥–¥–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ "–Ω–∞–±–ª—é–¥–µ–Ω—ã" (–∏–∑–≤–µ—Å—Ç–Ω—ã –Ω–∞ –º–æ–º–µ–Ω—Ç —É–¥–∞–ª–µ–Ω–∏—è).

```
–ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID (—Ç–µ–≥):

Add(apple): A = A ‚à™ {(apple, unique_tag_1)}
Add(apple) —Å–Ω–æ–≤–∞: A = A ‚à™ {(apple, unique_tag_2)}

Remove(apple): —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ç–µ–≥–∏ –¥–ª—è apple, –∫–æ—Ç–æ—Ä—ã–µ –∏–∑–≤–µ—Å—Ç–Ω—ã –Ω–∞ –º–æ–º–µ–Ω—Ç —É–¥–∞–ª–µ–Ω–∏—è
R = R ‚à™ {unique_tag_1, unique_tag_2}

–≠–ª–µ–º–µ–Ω—Ç –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–µ, –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–µ–≥, –Ω–µ –ø–æ–ø–∞–≤—à–∏–π –≤ R
```

**–ü—Ä–∏–º–µ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è:**
```
Node A:
- Add(apple) ‚Üí {(apple, tag1)}

Node B (–Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ apple):
- Add(apple) ‚Üí {(apple, tag2)}

Node A:
- Remove(apple) ‚Üí —É–¥–∞–ª—è–µ—Ç tag1

Merge:
- A: {(apple, tag1), (apple, tag2)}
- R: {tag1}
- –†–µ–∑—É–ª—å—Ç–∞—Ç: apple –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç (tag2 –Ω–µ —É–¥–∞–ª–µ–Ω)

–≠—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ! Node B –¥–æ–±–∞–≤–∏–ª apple –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ Node A –µ–≥–æ —É–¥–∞–ª–∏–ª.
```

**–°–≤–æ–π—Å—Ç–≤–∞:**
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è add/remove
- ‚úÖ –ü—Ä–∏—á–∏–Ω–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
- ‚ùå –¢—Ä–µ–±—É–µ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–µ–≥–æ–≤ (–±–æ–ª—å—à–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö)
- ‚ùå Tombstones –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –†–µ–∞–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã, –≥–¥–µ –≤–∞–∂–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è (Riak, Redis).

**7. Sequence CRDTs (–¥–ª—è —Å–ø–∏—Å–∫–æ–≤/—Ç–µ–∫—Å—Ç–∞)**

–î–ª—è —Ç–µ–∫—Å—Ç–∞ –∏ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤:

- **RGA (Replicated Growable Array)**
- **Logoot, LSEQ**
- **WOOT**
- **Yjs** (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ collaborative editors)

–û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è: –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª/—ç–ª–µ–º–µ–Ω—Ç –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –µ–≥–æ –ø–æ–∑–∏—Ü–∏—é. –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∞ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–ª—è—Ç—å –º–µ–∂–¥—É –ª—é–±—ã–º–∏ –¥–≤—É–º—è —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** Google Docs, Figma, Notion –∏ –¥—Ä—É–≥–∏–µ collaborative editors.

**8. Register CRDTs**

- **LWW-Register:** –•—Ä–∞–Ω–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Å timestamp, –ø–æ–±–µ–∂–¥–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ.
- **MV-Register (Multi-Value Register):** –•—Ä–∞–Ω–∏—Ç –≤—Å–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

**Redis (Redis CRDT –∏–ª–∏ Redis Enterprise Active-Active):**
Redis Enterprise –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç CRDTs –¥–ª—è multi-master —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏:
- Counters: PN-Counter
- Sets: OR-Set
- Hashes: LWW per field
- Sorted Sets: —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è CRDT-–∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è

**Riak:**
Riak –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç CRDT data types:
- Counters, Sets, Maps, Registers, Flags
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

**Cassandra Counters:**
Cassandra counters ‚Äî —ç—Ç–æ PN-Counter CRDT. –ú–æ–∂–Ω–æ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å/–¥–µ–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—á–µ—Ç—á–∏–∫ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–ø–ª–∏–∫–∞—Ö, –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–π–¥–µ—Ç—Å—è.

**Cosmos DB:**
Azure Cosmos DB –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç LWW –∏ Custom conflict resolution, –Ω–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CRDT-–ø–æ–¥–æ–±–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

**Collaborative editors:**
- **Google Docs:** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Operational Transformation, –Ω–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã (Yjs, Automerge) –∏—Å–ø–æ–ª—å–∑—É—é—Ç CRDTs
- **Figma:** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CRDT –¥–ª—è real-time collaboration
- **Notion:** –≤–µ—Ä–æ—è—Ç–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CRDTs (–¥–µ—Ç–∞–ª–∏ –Ω–µ —Ä–∞—Å–∫—Ä—ã—Ç—ã)

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö:**
- **Local-first software:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≥–¥–µ –¥–∞–Ω–Ω—ã–µ –∂–∏–≤—É—Ç –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, Obsidian, Roam Research).
- **Offline-first mobile apps:** –ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å offline-—Ä–µ–∂–∏–º–æ–º.

### –ß—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç CRDTs

‚úÖ **Strong Eventual Consistency (SEC):** –í—Å–µ —Ä–µ–ø–ª–∏–∫–∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å–æ–π–¥—É—Ç—Å—è –∫ –æ–¥–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é.

‚úÖ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤:** –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã –ø–æ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—é.

‚úÖ **–ü—Ä–∏—á–∏–Ω–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å:** –ï—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—è A causally precedes B, —ç—Ç–æ –±—É–¥–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç—Ä–∞–∂–µ–Ω–æ.

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ª–∏—è–Ω–∏–µ:** –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

‚úÖ **Availability:** –£–∑–µ–ª –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–ø–∏—Å–∏ –¥–∞–∂–µ –≤ –∏–∑–æ–ª—è—Ü–∏–∏.

‚úÖ **Partition tolerance:** –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏ network partitions.

### –ß–µ–≥–æ –ù–ï –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç CRDTs

‚ùå **–ù–∏–∑–∫–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã:** CRDTs —Ç—Ä–µ–±—É—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (—Ç–µ–≥–∏, –≤–µ–∫—Ç–æ—Ä—ã, timestamps).

‚ùå **–ö–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç—å:** –†–∞–∑–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–æ–∂–µ—Ç —Ä–∞—Å—Ç–∏ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ (tombstones, —Ç–µ–≥–∏).

‚ùå **–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:** –¢–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ CRDT-—Å–µ–º–∞–Ω—Ç–∏–∫—É.

‚ùå **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫—É—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏:** CRDT –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å, –Ω–æ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç –±–∏–∑–Ω–µ—Å-—Å–º—ã—Å–ª.

‚ùå **–ü—Ä–æ—Å—Ç–æ—Ç—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** CRDTs —Ç—Ä–µ–±—É—é—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞.

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã

**–ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ä–æ—Å—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö**

CRDTs, –æ—Å–æ–±–µ–Ω–Ω–æ —Å tombstones (OR-Set, 2P-Set), –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ.

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
OR-Set –¥–ª—è —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á:

–ó–∞ –≥–æ–¥:
- –î–æ–±–∞–≤–ª–µ–Ω–æ 10,000 –∑–∞–¥–∞—á
- –£–¥–∞–ª–µ–Ω–æ 9,500 –∑–∞–¥–∞—á

OR-Set —Å–æ–¥–µ—Ä–∂–∏—Ç:
- 500 –∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- 9,500 tombstones (—É–¥–∞–ª–µ–Ω–Ω—ã–µ —Ç–µ–≥–∏)

–†–∞–∑–º–µ—Ä –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö >> —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö
```

**–†–µ–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π:** –í –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –±–∞–∑–µ CRDTs —Ä–∞–∑–º–µ—Ä –±–∞–∑—ã –≤—ã—Ä–æ—Å –¥–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥–∏–≥–∞–±–∞–π—Ç, —Ö–æ—Ç—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –±—ã–ª–æ –º–∞–ª–æ. –ü—Ä–∏—á–∏–Ω–∞ ‚Äî –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ tombstones –∑–∞ –≥–æ–¥—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

**–†–µ—à–µ–Ω–∏–µ:**
- **Garbage collection:** –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞—Ç—å tombstones, –∫–æ—Ç–æ—Ä—ã–µ "–≤—Å–µ —É–∑–ª—ã –Ω–∞–±–ª—é–¥–∞–ª–∏".
- **Compaction:** –°–∂–∏–º–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ –≤ snapshots.
- **TTL:** –î–ª—è –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∏—Å—Ç–µ–∫–∞—é—â–∏–µ tombstones.

**–ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ–ø–æ–¥—Ö–æ–¥—è—â–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞ CRDT**

–í—ã–±–æ—Ä –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ CRDT-—Ç–∏–ø–∞ –¥–ª—è –∑–∞–¥–∞—á–∏.

**–°—Ü–µ–Ω–∞—Ä–∏–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞ - inventory —Å–∏—Å—Ç–µ–º–∞:**

```
–¢–æ–≤–∞—Ä—ã –Ω–∞ —Å–∫–ª–∞–¥–µ: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ = 100

–î–≤–∞ –º–∞–≥–∞–∑–∏–Ω–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–æ–¥–∞—é—Ç —Ç–æ–≤–∞—Ä:
- –ú–∞–≥–∞–∑–∏–Ω A: –ø—Ä–æ–¥–∞–∂–∞ 60 —à—Ç—É–∫ ‚Üí –æ—Å—Ç–∞—Ç–æ–∫ = 40
- –ú–∞–≥–∞–∑–∏–Ω B: –ø—Ä–æ–¥–∞–∂–∞ 70 —à—Ç—É–∫ ‚Üí –æ—Å—Ç–∞—Ç–æ–∫ = 30

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LWW-Register:
- –†–µ–∑—É–ª—å—Ç–∞—Ç: 30 –∏–ª–∏ 40 (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç timestamps)
- –ü—Ä–æ–±–ª–µ–º–∞: –û–¥–Ω–∞ –ø—Ä–æ–¥–∞–∂–∞ –ø–æ—Ç–µ—Ä—è–Ω–∞!

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PN-Counter:
- –û–ø–µ—Ä–∞—Ü–∏–∏: P=100, N=60+70=130
- –†–µ–∑—É–ª—å—Ç–∞—Ç: 100-130 = -30 (!)
- –ü—Ä–æ–±–ª–µ–º–∞: –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π inventory!
```

–ù–∏ –æ–¥–∏–Ω —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π CRDT –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è inventory —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ (–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å < 0).

**–†–µ–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π:** E-commerce —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ CRDT-—Å—á–µ—Ç—á–∏–∫–∏ –¥–ª—è inventory. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂ inventory —Å—Ç–∞–ª –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º, –∏ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–∞–≤–∞–ª–∞ —Ç–æ–≤–∞—Ä—ã, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –±—ã–ª–æ –Ω–∞ —Å–∫–ª–∞–¥–µ. –ü—Ä–∏—à–ª–æ—Å—å –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏.

**–†–µ—à–µ–Ω–∏–µ:** –î–ª—è inventory –Ω—É–∂–Ω–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, Paxos/Raft), –∞ –Ω–µ CRDTs, –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å reservation-based –ø–æ–¥—Ö–æ–¥.

**–ü—Ä–æ–±–ª–µ–º–∞ 3: PN-Counter –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç reset**

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
–°—á–µ—Ç—á–∏–∫ —Å–µ—Å—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ª–æ–≥–∏–Ω–∏—Ç—Å—è ‚Üí increment
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å logout ‚Üí decrement
- –ê–¥–º–∏–Ω —Ö–æ—á–µ—Ç "—Å–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ —Å–µ—Å—Å–∏–∏" ‚Üí set to 0 (???)

PN-Counter –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç "set to 0"!

Workaround:
- –ß–∏—Ç–∞–µ—à—å —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: 5
- –î–µ–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ—à—å –Ω–∞ 5
- –ü—Ä–æ–±–ª–µ–º–∞: –ï—Å–ª–∏ –º–µ–∂–¥—É —á—Ç–µ–Ω–∏–µ–º –∏ –∑–∞–ø–∏—Å—å—é –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
```

**–ò–Ω—Ü–∏–¥–µ–Ω—Ç:** –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –ø—ã—Ç–∞–ª–∏—Å—å "—Å–±—Ä–æ—Å–∏—Ç—å —Å—á–µ—Ç—á–∏–∫–∏" –≤ Riak, –Ω–æ –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ —Ç–∞–∫, –∫–∞–∫ –æ–∂–∏–¥–∞–ª–æ—Å—å. –°—á–µ—Ç—á–∏–∫–∏ –Ω–µ –æ–±–Ω—É–ª—è–ª–∏—Å—å –∏–ª–∏ —Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏.

**–†–µ—à–µ–Ω–∏–µ:**
- –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CRDTs –¥–ª—è –¥–∞–Ω–Ω—ã—Ö, —Ç—Ä–µ–±—É—é—â–∏—Ö arbitrary operations.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å versioned counters: –ø—Ä–∏ reset —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è —Å—á–µ—Ç—á–∏–∫–∞.

**–ü—Ä–æ–±–ª–µ–º–∞ 4: Clock drift –≤ LWW-based CRDTs**

–ö–∞–∫ –∏ –≤ –æ–±—ã—á–Ω–æ–º LWW, LWW-Element-Set —Å—Ç—Ä–∞–¥–∞–µ—Ç –æ—Ç clock drift.

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
LWW-Element-Set –¥–ª—è —Ç–µ–≥–æ–≤:

Node A (—á–∞—Å—ã –æ—Ç—Å—Ç–∞—é—Ç): Add("new_tag", t=100)
Node B (—á–∞—Å—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ): Remove("new_tag", t=105)

Merge: Remove –ø–æ–±–µ–∂–¥–∞–µ—Ç (105 > 100)
–†–µ–∑—É–ª—å—Ç–∞—Ç: "new_tag" —É–¥–∞–ª–µ–Ω, —Ö–æ—Ç—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –±—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ–∑–∂–µ!
```

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Hybrid Logical Clocks –∏–ª–∏ OR-Set –≤–º–µ—Å—Ç–æ LWW-Element-Set.

**–ü—Ä–æ–±–ª–µ–º–∞ 5: –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å sequence CRDTs**

CRDTs –¥–ª—è —Ç–µ–∫—Å—Ç–∞ (WOOT, Logoot) –º–æ–≥—É—Ç –∏–º–µ—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é.

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
–û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç (100,000 —Å–∏–º–≤–æ–ª–æ–≤) —Å —á–∞—Å—Ç—ã–º–∏ –≤—Å—Ç–∞–≤–∫–∞–º–∏ –≤ –Ω–∞—á–∞–ª–µ

–ö–∞–∂–¥–∞—è –≤—Å—Ç–∞–≤–∫–∞ —Ç—Ä–µ–±—É–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ ID –º–µ–∂–¥—É —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ IDs
‚Üí IDs —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –≤—Å–µ –¥–ª–∏–Ω–Ω–µ–µ –∏ –¥–ª–∏–Ω–Ω–µ–µ
‚Üí –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ä–∞–∑—Ä–∞—Å—Ç–∞—é—Ç—Å—è
```

**–†–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –°—Ç–∞—Ä—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Logoot –∏–º–µ–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å "ID interleaving" ‚Äî –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö –≤—Å—Ç–∞–≤–∫–∞—Ö –º–µ–∂–¥—É –¥–≤—É–º—è —Å–∏–º–≤–æ–ª–∞–º–∏ IDs —Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–º–∏, —á—Ç–æ —É—Ö—É–¥—à–∞–ª–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ CRDTs (LSEQ, Yjs) –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è —Ç–∞–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.

### –ü—Ä–∞–∫—Ç–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å CRDTs

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CRDTs:**

‚úÖ Offline-first –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚úÖ Real-time collaboration (–¥–æ–∫—É–º–µ–Ω—Ç—ã, whiteboards)
‚úÖ Geo-distributed —Å–∏—Å—Ç–µ–º—ã —Å multi-master —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π
‚úÖ –°–∏—Å—Ç–µ–º—ã, –≥–¥–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —á–∞—Å—Ç—ã –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã
‚úÖ Edge computing —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –∑–∞–ø–∏—Å—å—é
‚úÖ –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è availability

**–ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CRDTs:**

‚ùå –ö–æ–≥–¥–∞ –Ω—É–∂–Ω—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å ACID-–≥–∞—Ä–∞–Ω—Ç–∏—è–º–∏
‚ùå –î–∞–Ω–Ω—ã–µ —Å –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, inventory ‚â• 0)
‚ùå –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
‚ùå –ö–æ–≥–¥–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –Ω–µ–ø—Ä–∏–µ–º–ª–µ–º—ã
‚ùå –ö–æ–≥–¥–∞ —Å–µ–º–∞–Ω—Ç–∏–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–µ –≤–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ CRDT-–º–æ–¥–µ–ª—å

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**

**–ü–∞—Ç—Ç–µ—Ä–Ω 1: CRDT –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è + —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**

```
–ö–ª–∏–µ–Ω—Ç:
- –õ–æ–∫–∞–ª—å–Ω—ã–π CRDT-store (–Ω–∞–ø—Ä–∏–º–µ—Ä, IndexedDB —Å OR-Set)
- –û–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ
- –§–æ–Ω–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º

–°–µ—Ä–≤–µ—Ä:
- –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- Broadcast –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –¥—Ä—É–≥–∏–º –∫–ª–∏–µ–Ω—Ç–∞–º
```

**–ü–∞—Ç—Ç–µ—Ä–Ω 2: Hybrid CRDT + –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è**

```
–î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö: CRDTs (comments, likes, tags)
–î–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö: –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —á–µ—Ä–µ–∑ Paxos/Raft (payments, inventory)

–†–µ–∑—É–ª—å—Ç–∞—Ç: 99% –æ–ø–µ—Ä–∞—Ü–∏–π –ª–æ–∫–∞–ª—å–Ω—ã –∏ –±—ã—Å—Ç—Ä—ã–µ, 1% —Ç—Ä–µ–±—É—é—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏
```

**–ü–∞—Ç—Ç–µ—Ä–Ω 3: Delta-state CRDTs**

–í–º–µ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–ª–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –æ—Ç–ø—Ä–∞–≤–ª—è–π —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è (delta):

```
State-based CRDT: –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–µ—Å—å OR-Set (–º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–∏–º)
Delta-state CRDT: –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ/—É–¥–∞–ª–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

–£–∑–µ–ª –ø–æ–ª—É—á–∞–µ—Ç delta –∏ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç: state = state ‚äï delta
```

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- –ú–µ–Ω—å—à–µ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ state-based CRDTs (–ø—Ä–æ—Å—Ç–æ—Ç–∞)

**–ü–∞—Ç—Ç–µ—Ä–Ω 4: CRDT —Å garbage collection**

```
–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏:
1. –û–ø—Ä–µ–¥–µ–ª–∏ tombstones/—Ç–µ–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ "–≤—Å–µ —É–∑–ª—ã –∑–Ω–∞—é—Ç"
2. –ë–µ–∑–æ–ø–∞—Å–Ω–æ —É–¥–∞–ª–∏ –∏—Ö
3. Compaction –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –ó–Ω–∞—Ç—å, –∫–∞–∫–∏–µ —É–∑–ª—ã –∞–∫—Ç–∏–≤–Ω—ã
- Vector clocks –∏–ª–∏ –∞–Ω–∞–ª–æ–≥ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è "—á—Ç–æ —É–∑–µ–ª –≤–∏–¥–µ–ª"
```

**–ü–∞—Ç—Ç–µ—Ä–Ω 5: Layered CRDTs**

–°—Ç—Ä–æ–π —Å–ª–æ–∂–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏–∑ –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã—Ö CRDTs:

```
CRDT-Map: {
  key -> CRDT-Value
}

–ù–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–∫—É–º–µ–Ω—Ç:
{
  "title": LWW-Register("My Document"),
  "tags": OR-Set({tag1, tag2}),
  "view_count": G-Counter(150),
  "likes": G-Counter(20)
}

–ö–∞–∂–¥–æ–µ –ø–æ–ª–µ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π CRDT
```

Riak –∏ Redis –∏—Å–ø–æ–ª—å–∑—É—é—Ç —ç—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥.

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**

**1. –õ–µ–Ω–∏–≤–æ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ (lazy propagation)**

–ù–µ –Ω—É–∂–Ω–æ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è. –ú–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å sync –¥–æ:
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–≥–æ background sync (–∫–∞–∂–¥—ã–µ N —Å–µ–∫—É–Ω–¥)
- –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç online
- –ö–æ–≥–¥–∞ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ç—å –Ω–∏–∑–∫–∞—è

**2. Batching updates**

–í–º–µ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏, –±–∞—Ç—á—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ü–∏–π:

```
–û–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞ 1 —Å–µ–∫—É–Ω–¥—É:
- Add(item1)
- Add(item2)
- Remove(item3)

–ë–∞—Ç—á: {added: [item1, item2], removed: [item3]}
```

**3. Compression**

–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ CRDTs (–æ—Å–æ–±–µ–Ω–Ω–æ —Ç–µ–≥–∏, IDs) –º–æ–∂–Ω–æ —Å–∂–∏–º–∞—Ç—å –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –ø–æ —Å–µ—Ç–∏.

**–í—ã–±–æ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ CRDT-—Ç–∏–ø–∞:**

| –ó–∞–¥–∞—á–∞ | CRDT | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ |
|--------|------|--------------|
| –°—á–µ—Ç—á–∏–∫ –ª–∞–π–∫–æ–≤ | G-Counter | - |
| –°—á–µ—Ç—á–∏–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ | PN-Counter | Application-defined |
| –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–µ–≥–æ–≤ | OR-Set | LWW-Element-Set |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ) | LWW-Register per key | MV-Register + merge |
| –¢–µ–∫—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç | Yjs / Automerge | OT (Google Docs) |
| –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á | OR-Set + sequence CRDT | Custom CRDT |
| –§–ª–∞–≥ (boolean) | LWW-Register | Enable-Wins Flag |

**Monitoring –∏ –æ—Ç–ª–∞–¥–∫–∞:**

1. **–†–∞–∑–º–µ—Ä –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö:** –ú–æ–Ω–∏—Ç–æ—Ä—å ratio –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∫ –¥–∞–Ω–Ω—ã–º.
2. **–ß–∞—Å—Ç–æ—Ç–∞ merge-–æ–ø–µ—Ä–∞—Ü–∏–π:** –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è merge.
3. **Tombstone growth rate:** –ö–∞–∫ –±—ã—Å—Ç—Ä–æ —Ä–∞—Å—Ç—É—Ç tombstones.
4. **Convergence time:** –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è —Å—Ö–æ–∂–¥–µ–Ω–∏—è –≤—Å–µ—Ö —Ä–µ–ø–ª–∏–∫.
5. **Conflict rate:** –•–æ—Ç—è CRDTs "–±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤", –ø–æ–ª–µ–∑–Ω–æ –∑–Ω–∞—Ç—å, –∫–∞–∫ —á–∞—Å—Ç–æ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.

---

## Tombstone Semantics

### –°—É—Ç—å –ø–æ–¥—Ö–æ–¥–∞

Tombstone (–Ω–∞–¥–≥—Ä–æ–±–∏–µ, –Ω–∞–¥–≥—Ä–æ–±–Ω—ã–π –∫–∞–º–µ–Ω—å) ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–∞—Ä–∫–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —ç–ª–µ–º–µ–Ω—Ç –±—ã–ª —É–¥–∞–ª–µ–Ω, –Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É–¥–∞–ª–µ–Ω–∏–∏ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

**–ó–∞—á–µ–º –Ω—É–∂–Ω—ã tombstones?** –í —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –Ω–µ–ª—å–∑—è –ø—Ä–æ—Å—Ç–æ "—É–¥–∞–ª–∏—Ç—å" –¥–∞–Ω–Ω—ã–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ:
- –£–∑–µ–ª –º–æ–∂–µ—Ç –±—ã—Ç—å offline –∏ –Ω–µ —É–∑–Ω–∞—Ç—å –æ–± —É–¥–∞–ª–µ–Ω–∏–∏
- –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ (–¥–∞–∂–µ –µ—Å–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª—É—á–∏–ª–æ—Å—å —Ä–∞–Ω—å—à–µ –ø–æ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏, –Ω–æ –ø—Ä–∏—à–ª–æ –ø–æ–∑–∂–µ)
- –£–¥–∞–ª–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ —Ä–µ–ø–ª–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–∫ –∂–µ, –∫–∞–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ

**–ê–Ω–∞–ª–æ–≥–∏—è:** –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —É —Ç–µ–±—è –µ—Å—Ç—å –∫–æ–º–∞–Ω–¥–Ω–∞—è –¥–æ—Å–∫–∞ —Å –∑–∞–¥–∞—á–∞–º–∏. –ï—Å–ª–∏ —Ç—ã –ø—Ä–æ—Å—Ç–æ —Å—Ç–∏—Ä–∞–µ—à—å –∑–∞–¥–∞—á—É —Å –¥–æ—Å–∫–∏, —Ç–≤–æ–∏ –∫–æ–ª–ª–µ–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≤–∏–¥–µ–ª–∏ —ç—Ç–æ–≥–æ, –º–æ–≥—É—Ç –Ω–∞–ø–∏—Å–∞—Ç—å –µ—ë —Å–Ω–æ–≤–∞. –ü–æ—ç—Ç–æ–º—É –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã —Å—Ç–∏—Ä–∞—Ç—å, —Ç—ã —Å—Ç–∞–≤–∏—à—å ‚úîÔ∏è "–≤—ã–ø–æ–ª–Ω–µ–Ω–æ" ‚Äî —ç—Ç–æ tombstone. –¢–µ–ø–µ—Ä—å –≤—Å–µ –∑–Ω–∞—é—Ç, —á—Ç–æ –∑–∞–¥–∞—á–∞ –±—ã–ª–∞, –Ω–æ –µ—ë –±–æ–ª—å—à–µ –Ω–µ—Ç.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–í–º–µ—Å—Ç–æ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è (hard delete), —Å–∏—Å—Ç–µ–º–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (soft delete):

```
–ë—ã–ª–æ:
{id: 123, name: "Alice", email: "alice@example.com"}

–ü–æ—Å–ª–µ delete:
{id: 123, _deleted: true, _deleted_at: 1234567890}
–∏–ª–∏
{id: 123, tombstone: true}
```

–ü—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Å–∏—Å—Ç–µ–º–∞ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –∑–∞–ø–∏—Å–∏ —Å tombstone.

### –¢–∏–ø—ã tombstones

**1. Explicit tombstone (—è–≤–Ω–æ–µ –Ω–∞–¥–≥—Ä–æ–±–∏–µ)**

–û—Ç–¥–µ–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å, –∫–æ—Ç–æ—Ä–∞—è —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ:

```
–ó–∞–ø–∏—Å–∏:
- {id: 123, version: 1, data: "original"}
- {id: 123, version: 2, tombstone: true}

Version 2 ‚Äî —ç—Ç–æ tombstone
```

**2. Implicit tombstone (–Ω–µ—è–≤–Ω–æ–µ –Ω–∞–¥–≥—Ä–æ–±–∏–µ)**

–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è:

```
{id: 123, value: null}  // null –æ–∑–Ω–∞—á–∞–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ
{id: 123, _deleted: true}
```

**3. Version-vector tombstone**

Tombstone —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–∏—á–∏–Ω–Ω—ã—Ö —Å–≤—è–∑—è—Ö:

```
{
  id: 123,
  tombstone: true,
  vector_clock: {nodeA: 5, nodeB: 3}
}
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–ª–∏—á–∞—Ç—å "—É–¥–∞–ª–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Å–ª—É—á–∏–ª–æ—Å—å –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è" –æ—Ç "—É–¥–∞–ª–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ –∑–Ω–∞–ª–æ –æ–± —ç—Ç–æ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏".

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

**Cassandra:**
Cassandra –∏—Å–ø–æ–ª—å–∑—É–µ—Ç tombstones –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:

```
DELETE –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏, –∞:
1. –°–æ–∑–¥–∞–µ—Ç tombstone-–∑–∞–ø–∏—Å—å
2. Tombstone —Ä–µ–ø–ª–∏—Ü–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –¥—Ä—É–≥–∏–µ —É–∑–ª—ã
3. –ü—Ä–∏ —á—Ç–µ–Ω–∏–∏ tombstone "–ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç" –¥–∞–Ω–Ω—ã–µ
4. –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ (–ø—Ä–∏ compaction) tombstones –∏ –ø–µ—Ä–µ–∫—Ä—ã—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è
```

**CouchDB:**
–£–¥–∞–ª–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ–º–µ—á–∞—é—Ç—Å—è `_deleted: true`:

```
{
  "_id": "user123",
  "_rev": "3-abc...",
  "_deleted": true
}
```

Tombstones —É—á–∞—Å—Ç–≤—É—é—Ç –≤ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç-—Ä–µ–∑–æ–ª—é—à–µ–Ω–µ.

**Kafka (Log compaction):**
–í compacted topics Kafka –∏—Å–ø–æ–ª—å–∑—É–µ—Ç null value –∫–∞–∫ tombstone:

```
–°–æ–æ–±—â–µ–Ω–∏—è:
- key=user123, value={name: "Alice"}  (—Å–æ–∑–¥–∞–Ω–∏–µ)
- key=user123, value={name: "Alice Smith"}  (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- key=user123, value=null  (—É–¥–∞–ª–µ–Ω–∏–µ - tombstone)

–ü–æ—Å–ª–µ compaction:
- key=user123, value=null  (—Ç–æ–ª—å–∫–æ tombstone –æ—Å—Ç–∞–µ—Ç—Å—è)
```

**DynamoDB:**
–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ (–±–µ–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ DynamoDB Streams) –∑–∞–ø–∏—Å—å –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª—è–µ—Ç—Å—è, –Ω–æ –≤ streams –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å —Å–æ–±—ã—Ç–∏–µ DELETE.

**Riak (OR-Set):**
OR-Set –∏—Å–ø–æ–ª—å–∑—É–µ—Ç tombstones –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤:

```
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ: {element: "apple", tag: uuid1}
–£–¥–∞–ª–µ–Ω–∏–µ: tombstone = {uuid1}

–ü—Ä–∏ merge: —ç–ª–µ–º–µ–Ω—Ç —É–¥–∞–ª–µ–Ω, –µ—Å–ª–∏ –≤—Å–µ –µ–≥–æ —Ç–µ–≥–∏ –≤ tombstone-—Å–ø–∏—Å–∫–µ
```

**MongoDB (Change Streams):**
–í change streams –æ–ø–µ—Ä–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –∫–∞–∫ —Å–æ–±—ã—Ç–∏–µ —Å `operationType: "delete"`.

### –ß—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç tombstones

‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏–π:** –£–¥–∞–ª–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—é—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.

‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç "–≤–æ—Å–∫—Ä–µ—à–µ–Ω–∏—è" –¥–∞–Ω–Ω—ã—Ö:** –°—Ç–∞—Ä–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å –Ω–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ.

‚úÖ **–ü—Ä–∏—á–∏–Ω–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å:** –° version vectors tombstone –∑–Ω–∞–µ—Ç, –∫–∞–∫–∏–µ –≤–µ—Ä—Å–∏–∏ –æ–Ω —É–¥–∞–ª—è–µ—Ç.

‚úÖ **Eventual consistency:** –î–∞–∂–µ –ø—Ä–∏ network partitions —É–¥–∞–ª–µ–Ω–∏—è –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è –≤–µ–∑–¥–µ.

‚úÖ **Audit trail (–≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö):** Tombstones –º–æ–≥—É—Ç —Å–ª—É–∂–∏—Ç—å –∏—Å—Ç–æ—Ä–∏–µ–π —É–¥–∞–ª–µ–Ω–∏–π.

### –ß–µ–≥–æ –ù–ï –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç tombstones

‚ùå **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏:** Tombstones –∑–∞–Ω–∏–º–∞—é—Ç –º–µ—Å—Ç–æ –¥–æ garbage collection.

‚ùå **–ó–∞—â–∏—Ç—É –æ—Ç –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞:** Tombstones –º–æ–≥—É—Ç –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å—Å—è.

‚ùå **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ß—Ç–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å tombstones, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º.

‚ùå **–ü—Ä–æ—Å—Ç–æ—Ç—É:** –¢—Ä–µ–±—É–µ—Ç—Å—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ tombstones –∏ –∏—Ö –æ—á–∏—Å—Ç–∫–∏.

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã

**–ü—Ä–æ–±–ª–µ–º–∞ 1: Tombstone –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ (tombstone accumulation)**

–°–∞–º–∞—è —á–∞—Å—Ç–∞—è –ø—Ä–æ–±–ª–µ–º–∞ ‚Äî —ç—Ç–æ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ tombstones.

**–°—Ü–µ–Ω–∞—Ä–∏–π - Cassandra:**

```
–¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–µ—Å—Å–∏–π:
- –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–µ —Å–µ—Å—Å–∏–∏
- –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –∏—Å—Ç–µ–∫—à–∏–µ —Å–µ—Å—Å–∏–∏ —É–¥–∞–ª—è—é—Ç—Å—è (DELETE)

–ß–µ—Ä–µ–∑ –¥–µ–Ω—å:
- –ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π: 10,000
- Tombstones: 1,440,000 (–ø–æ 1000 —É–¥–∞–ª–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É)

Tombstones –∑–∞–Ω–∏–º–∞—é—Ç –≤ 100+ —Ä–∞–∑ –±–æ–ª—å—à–µ –º–µ—Å—Ç–∞, —á–µ–º –¥–∞–Ω–Ω—ã–µ!
```

**–†–µ–∞–ª—å–Ω—ã–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç:** –í –æ–¥–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞ Cassandra —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ç–∞–±–ª–∏—Ü—É –∫–∞–∫ –æ—á–µ—Ä–µ–¥—å: –∑–∞–ø–∏—Å—ã–≤–∞–ª–∏ –∑–∞–¥–∞—á–∏, –∑–∞—Ç–µ–º —É–¥–∞–ª—è–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ. –ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–¥–µ–ª—å —Ç–∞–±–ª–∏—Ü–∞ –Ω–∞–∫–æ–ø–∏–ª–∞ –º–∏–ª–ª–∏–æ–Ω—ã tombstones. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á—Ç–µ–Ω–∏—è —É–ø–∞–ª–∞ –≤ –¥–µ—Å—è—Ç–∫–∏ —Ä–∞–∑, –∑–∞–ø—Ä–æ—Å—ã —Ç–∞–π–º–∞—É—Ç–∏–ª–∏.

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (–æ—Å–æ–±–µ–Ω–Ω–æ range queries)
- –í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –¥–∏—Å–∫–∞
- –î–ª–∏—Ç–µ–ª—å–Ω—ã–µ compaction-–æ–ø–µ—Ä–∞—Ü–∏–∏
- Warnings –≤ –ª–æ–≥–∞—Ö: "Read N live rows and M tombstone cells"

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TTL (time-to-live) –≤–º–µ—Å—Ç–æ —è–≤–Ω—ã—Ö —É–¥–∞–ª–µ–Ω–∏–π
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å compaction
- –ò–∑–º–µ–Ω–∏—Ç—å data model: –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Cassandra –∫–∞–∫ –æ—á–µ—Ä–µ–¥—å

**–ü—Ä–æ–±–ª–µ–º–∞ 2: Tombstone –≤ range queries**

Tombstones –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞—Ç–∏—á–Ω—ã –¥–ª—è range queries –∏ scans.

**–°—Ü–µ–Ω–∞—Ä–∏–π - Cassandra:**

```
–ó–∞–ø—Ä–æ—Å: SELECT * FROM events WHERE user_id = 'alice' AND timestamp > '2024-01-01' LIMIT 100

Cassandra –¥–æ–ª–∂–Ω–∞:
1. –ß–∏—Ç–∞—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏ –≤ range (–≤–∫–ª—é—á–∞—è tombstones)
2. –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å tombstones
3. –í–µ—Ä–Ω—É—Ç—å 100 –∂–∏–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π

–ï—Å–ª–∏ –≤ range 10,000 tombstones –∏ 100 –∂–∏–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π:
- Cassandra –ø—Ä–æ—á–∏—Ç–∞–µ—Ç –≤—Å–µ 10,100 –∑–∞–ø–∏—Å–µ–π
- –ó–∞—Ç–µ–º –æ—Ç—Ñ–∏–ª—å—Ç—Ä—É–µ—Ç tombstones
- –í–µ—Ä–Ω–µ—Ç 100 –∑–∞–ø–∏—Å–µ–π

–≠—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–æ!
```

**–†–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –í —Å–∏—Å—Ç–µ–º–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ Cassandra –ª–æ–≥–∏ —É–¥–∞–ª—è–ª–∏—Å—å –ø–æ—Å–ª–µ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è. –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 –ª–æ–≥–æ–≤ –∑–∞–ø—Ä–æ—Å –ø—Ä–æ—Ö–æ–¥–∏–ª —á–µ—Ä–µ–∑ —Å–æ—Ç–Ω–∏ —Ç—ã—Å—è—á tombstones, —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ timeouts.

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π data model (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏)
- –£–¥–∞–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ TTL, –∞ –Ω–µ DELETE
- –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä "–Ω–µ —á–∏—Ç–∞—Ç—å —Å—Ç–∞—Ä—à–µ N –¥–Ω–µ–π"

**–ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è garbage collection tombstones**

Tombstones –Ω–µ–ª—å–∑—è —É–¥–∞–ª—è—Ç—å –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ, –∏–Ω–∞—á–µ –≤–æ–∑–º–æ–∂–Ω–æ "–≤–æ—Å–∫—Ä–µ—à–µ–Ω–∏–µ" –¥–∞–Ω–Ω—ã—Ö.

**–°—Ü–µ–Ω–∞—Ä–∏–π:**

```
T0: –£–∑–µ–ª A —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å X
T1: –£–∑–µ–ª B (–Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ X) —Ç–∞–∫–∂–µ —Å–æ–∑–¥–∞–µ—Ç X (–∫–æ–Ω—Ñ–ª–∏–∫—Ç)
T2: –£–∑–µ–ª A —É–¥–∞–ª—è–µ—Ç X ‚Üí tombstone
T3: –°–∏—Å—Ç–µ–º–∞ –æ—á–∏—â–∞–µ—Ç tombstone (—Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ!)
T4: –£–∑–µ–ª B —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ—é –≤–µ—Ä—Å–∏—é X –Ω–∞ —É–∑–µ–ª A
T5: X "–≤–æ—Å–∫—Ä–µ—Å" –Ω–∞ —É–∑–ª–µ A!
```

**–†–µ–∞–ª—å–Ω—ã–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç:** –í —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –Ω–∞ CouchDB garbage collection tombstones –±—ã–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ. –ü–æ—Å–ª–µ network partition –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–≤—è–∑–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —É–¥–∞–ª–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã "–≤–æ—Å–∫—Ä–µ—Å–∞–ª–∏" ‚Äî –ø–æ—è–≤–ª—è–ª–∏—Å—å —Å–Ω–æ–≤–∞.

**–ü—Ä–∞–≤–∏–ª–æ:** Tombstone –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —É–¥–∞–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ, —á—Ç–æ –≤—Å–µ —É–∑–ª—ã —É–∑–Ω–∞–ª–∏ –æ–± —É–¥–∞–ª–µ–Ω–∏–∏. –û–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç grace period (–ø–µ—Ä–∏–æ–¥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏):

```
Cassandra: gc_grace_seconds = 864000 (10 –¥–Ω–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
Tombstone —É–¥–∞–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:
- Tombstone —Å—Ç–∞—Ä—à–µ gc_grace_seconds
- –ò compaction –ø—Ä–æ–∏–∑–æ—à–µ–ª
```

**–ü—Ä–æ–±–ª–µ–º–∞ 4: Tombstones –≤ ClickHouse**

ClickHouse –∏—Å–ø–æ–ª—å–∑—É–µ—Ç tombstones –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∏ —É–¥–∞–ª–µ–Ω–∏–π, –Ω–æ —ç—Ç–æ –¥–æ—Ä–æ–≥–æ.

**–°—Ü–µ–Ω–∞—Ä–∏–π:**

```
–¢–∞–±–ª–∏—Ü–∞ —Å –º–∏–ª–ª–∏–∞—Ä–¥–∞–º–∏ –∑–∞–ø–∏—Å–µ–π
–ß–∞—Å—Ç—ã–µ UPDATE/DELETE –æ–ø–µ—Ä–∞—Ü–∏–∏

–ö–∞–∂–¥—ã–π UPDATE —Å–æ–∑–¥–∞–µ—Ç:
- Tombstone –¥–ª—è —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏
- –ù–æ–≤—É—é –∑–∞–ø–∏—Å—å

–ü–æ—Å–ª–µ –º–∏–ª–ª–∏–æ–Ω–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:
- –û–≥—Ä–æ–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ tombstones
- –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (–Ω—É–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å tombstones –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏)
- OPTIMIZE TABLE –∑–∞–Ω–∏–º–∞–µ—Ç —á–∞—Å—ã
```

**–†–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –í –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞ ClickHouse –ø—ã—Ç–∞–ª–∏—Å—å –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. Tombstones –Ω–∞–∫–∞–ø–ª–∏–≤–∞–ª–∏—Å—å –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º —Å–∏—Å—Ç–µ–º–∞ –º–æ–≥–ª–∞ –∏—Ö –æ—á–∏—â–∞—Ç—å (OPTIMIZE). –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–≥—Ä–∞–¥–∏—Ä–æ–≤–∞–ª–∞.

**–†–µ—à–µ–Ω–∏–µ:** ClickHouse –Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —á–∞—Å—Ç—ã—Ö UPDATE/DELETE. –ò—Å–ø–æ–ª—å–∑—É–π:
- ReplacingMergeTree (–¥–ª—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã—Ö –∑–∞–º–µ–Ω)
- CollapsingMergeTree (–¥–ª—è cancel-–æ–ø–µ—Ä–∞—Ü–∏–π)
- –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω–µ –æ–±–Ω–æ–≤–ª—è–π –¥–∞–Ω–Ω—ã–µ ‚Äî –¥–µ–ª–∞–π append-only

**–ü—Ä–æ–±–ª–µ–º–∞ 5: Tombstones –≤ Kafka log compaction**

Tombstones (null values) –≤ Kafka compacted topics –º–æ–≥—É—Ç –∏—Å—á–µ–∑–Ω—É—Ç—å –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ.

**–°—Ü–µ–Ω–∞—Ä–∏–π:**

```
T0: key=user123, value={name: "Alice"}
T1: key=user123, value=null  (tombstone)

–ù–∞—Å—Ç—Ä–æ–π–∫–∞: delete.retention.ms = 1 hour

–ß–µ—Ä–µ–∑ 1 —á–∞—Å tombstone —É–¥–∞–ª—è–µ—Ç—Å—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏.

–ü—Ä–æ–±–ª–µ–º–∞: –ï—Å–ª–∏ consumer –±—ã–ª offline > 1 —á–∞—Å–∞:
- Consumer –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç tombstone
- Consumer –¥—É–º–∞–µ—Ç, —á—Ç–æ user123 = {name: "Alice"} (—Å—Ç–∞—Ä–∞—è –∑–∞–ø–∏—Å—å)
```

**–ò–Ω—Ü–∏–¥–µ–Ω—Ç:** –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤—ã–≤–∞–ª –¥–∞–Ω–Ω—ã–µ –∏–∑ Kafka compacted topic –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î. –ü–æ—Å–ª–µ –¥–æ–ª–≥–æ–≥–æ downtime –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –Ω–µ —É–≤–∏–¥–µ–ª tombstones (–æ–Ω–∏ —É–∂–µ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã) –∏ –æ—Å—Ç–∞–≤–∏–ª –≤ –ë–î "–º–µ—Ä—Ç–≤—ã–µ" –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã–ª–∏ –±—ã—Ç—å —É–¥–∞–ª–µ–Ω—ã.

**–†–µ—à–µ–Ω–∏–µ:**
- –£–≤–µ–ª–∏—á–∏—Ç—å `delete.retention.ms`
- –ò–ª–∏ —Ö—Ä–∞–Ω–∏—Ç—å tombstones –≤–µ—á–Ω–æ (–¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ç–æ–ø–∏–∫–æ–≤)
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –ø–æ–ª–Ω–æ–π —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ state

**–ü—Ä–æ–±–ª–µ–º–∞ 6: Tombstones —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Ä–∞–∑–º–µ—Ä backups**

Tombstones –∑–∞–Ω–∏–º–∞—é—Ç –º–µ—Å—Ç–æ –≤ –±—ç–∫–∞–ø–∞—Ö.

**–°—Ü–µ–Ω–∞—Ä–∏–π:**

```
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: 1TB live data, 500GB tombstones
Backup: 1.5TB (–≤–∫–ª—é—á–∞—è tombstones)

–ï—Å–ª–∏ –±—ç–∫–∞–ø—ã –Ω–µ –æ—á–∏—â–∞—é—Ç tombstones:
- –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- –î–æ–ª–≥–æ–µ –≤—Ä–µ–º—è backup/restore
```

**–†–µ—à–µ–Ω–∏–µ:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∏—Å—Ç–µ–º—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –Ω–µ –≤–∫–ª—é—á–∞—Ç—å tombstones –≤ –±—ç–∫–∞–ø—ã (–µ—Å–ª–∏ –µ—Å—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—è, —á—Ç–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –≤–æ—Å–∫—Ä–µ—à–µ–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö).

### –ü—Ä–∞–∫—Ç–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å tombstones

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å tombstones:**

‚úÖ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã —Å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π
‚úÖ –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–ø–ª–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —É–¥–∞–ª–µ–Ω–∏—è
‚úÖ Eventual consistency –º–æ–¥–µ–ª—è—Ö
‚úÖ CRDTs —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —É–¥–∞–ª–µ–Ω–∏—è (OR-Set, 2P-Set)
‚úÖ Event sourcing / change data capture

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**

**–ü–∞—Ç—Ç–µ—Ä–Ω 1: TTL –≤–º–µ—Å—Ç–æ tombstones**

–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –∏—Å—Ç–µ–∫–∞—é—Ç, –∏—Å–ø–æ–ª—å–∑—É–π TTL:

```
Cassandra:
INSERT INTO sessions (id, data) VALUES (123, 'data') USING TTL 3600;

–î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—Ç—Å—è —á–µ—Ä–µ–∑ 3600 —Å–µ–∫—É–Ω–¥
Tombstone —Å–æ–∑–¥–∞–µ—Ç—Å—è, –Ω–æ –≤—Ä–µ–º—è –µ–≥–æ –∂–∏–∑–Ω–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ
```

**–ü–∞—Ç—Ç–µ—Ä–Ω 2: Partitioning –ø–æ –≤—Ä–µ–º–µ–Ω–∏**

–í–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π, —É–¥–∞–ª—è–π —Ü–µ–ª—ã–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏:

```
–¢–∞–±–ª–∏—Ü—ã/—Ç–æ–ø–∏–∫–∏ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –¥–Ω—è–º:
- events_2024_01_01
- events_2024_01_02
- ...

–£–¥–∞–ª–µ–Ω–∏–µ: –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª–∏ —Å—Ç–∞—Ä—É—é –ø–∞—Ä—Ç–∏—Ü–∏—é —Ü–µ–ª–∏–∫–æ–º (–±–µ–∑ tombstones!)
```

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤: ClickHouse, Elasticsearch, Kafka (retention policy).

**–ü–∞—Ç—Ç–µ—Ä–Ω 3: Tombstone —Å expiration**

Tombstone –∏–º–µ–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π TTL:

```
Tombstone: {id: 123, deleted: true, expires_at: T0 + grace_period}

–ü–æ—Å–ª–µ grace_period tombstone –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —É–¥–∞–ª–∏—Ç—å
```

**–ü–∞—Ç—Ç–µ—Ä–Ω 4: Separate tombstone store**

–•—Ä–∞–Ω–∏ tombstones –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç live data:

```
Live data table: —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø–∏—Å–∏
Tombstone table: —É–¥–∞–ª–µ–Ω–Ω—ã–µ IDs

–ü—Ä–∏ —á—Ç–µ–Ω–∏–∏: –ø—Ä–æ–≤–µ—Ä—è–π tombstone table –∏ —Ñ–∏–ª—å—Ç—Ä—É–π
```

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- Live data —Ç–∞–±–ª–∏—Ü–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ–π
- Tombstones –º–æ–∂–Ω–æ –æ—á–∏—â–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ

**–ü–∞—Ç—Ç–µ—Ä–Ω 5: Batch tombstone cleanup**

–í–º–µ—Å—Ç–æ –æ—á–∏—Å—Ç–∫–∏ tombstones –ø–æ –æ–¥–Ω–æ–º—É, –¥–µ–ª–∞–π —ç—Ç–æ –±–∞—Ç—á–∞–º–∏:

```
–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π job:
1. –ù–∞–π–¥–∏ tombstones —Å—Ç–∞—Ä—à–µ grace_period
2. –ì—Ä—É–ø–ø–∏—Ä—É–π –ø–æ –ø–∞—Ä—Ç–∏—Ü–∏—è–º
3. –£–¥–∞–ª–∏ –±–∞—Ç—á–∞–º–∏
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**

**Cassandra:**
```
gc_grace_seconds: –ü–µ—Ä–∏–æ–¥ —Ö—Ä–∞–Ω–µ–Ω–∏—è tombstones (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10 –¥–Ω–µ–π)
tombstone_warn_threshold: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ > N tombstones (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1000)
tombstone_failure_threshold: –û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ > N tombstones (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 100,000)
```

**Kafka:**
```
delete.retention.ms: –ö–∞–∫ –¥–æ–ª–≥–æ —Ö—Ä–∞–Ω–∏—Ç—å tombstones (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 24 —á–∞—Å–∞)
min.cleanable.dirty.ratio: –ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—Ç—å compaction
```

**CouchDB:**
```
_revs_limit: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç–∞—Ä—ã—Ö —Ä–µ–≤–∏–∑–∏–π (–≤–∫–ª—é—á–∞—è tombstones)
```

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ tombstones:**

1. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ tombstones:** –ê–±—Å–æ–ª—é—Ç–Ω–æ–µ —á–∏—Å–ª–æ –∏ ratio –∫ live data
2. **Tombstone read rate:** –°–∫–æ–ª—å–∫–æ tombstones —á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö
3. **Compaction/cleanup lag:** –ö–∞–∫ –±—ã—Å—Ç—Ä–æ tombstones –æ—á–∏—â–∞—é—Ç—Å—è
4. **Disk usage:** –°–∫–æ–ª—å–∫–æ –º–µ—Å—Ç–∞ –∑–∞–Ω–∏–º–∞—é—Ç tombstones
5. **Warnings/errors:** Alerts –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ thresholds

**–û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º:**

**Cassandra - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å tombstones –≤ –∑–∞–ø—Ä–æ—Å–µ:**
```
Enable tracing:
TRACING ON;
SELECT * FROM table WHERE ...;

–í trace —É–≤–∏–¥–∏—à—å:
"Read 100 live rows and 5000 tombstone cells"
```

**Kafka - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å tombstones –≤ —Ç–æ–ø–∏–∫–µ:**
```
kafka-console-consumer --topic my-topic --from-beginning --property print.key=true

Tombstones: —Å–æ–æ–±—â–µ–Ω–∏—è —Å value=null
```

**CouchDB - —Å–ø–∏—Å–æ–∫ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:**
```
GET /database/_all_docs?include_docs=true

–î–æ–∫—É–º–µ–Ω—Ç—ã —Å "_deleted": true
```

---

## –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–¥—Ö–æ–¥–æ–≤

| –ê—Å–ø–µ–∫—Ç | LWW | Version Vectors | Causal Merge | Application-Defined | CRDTs | Tombstones |
|--------|-----|-----------------|--------------|---------------------|-------|------------|
| **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ** | –í—Å–µ–≥–¥–∞ | –ù–µ—Ç (—Ç–æ–ª—å–∫–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ) | –ß–∞—Å—Ç–æ | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | –í—Å–µ–≥–¥–∞ | N/A (–≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞) |
| **–ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö** | –í–æ–∑–º–æ–∂–Ω–∞ | –ù–µ—Ç (—Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤—Å–µ –≤–µ—Ä—Å–∏–∏) | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞ | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –ª–æ–≥–∏–∫–∏ | –ù–µ—Ç | –ù–µ—Ç |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è | –í—ã—Å–æ–∫–∞—è | –°—Ä–µ–¥–Ω—è—è-–í—ã—Å–æ–∫–∞—è | –°—Ä–µ–¥–Ω—è—è |
| **–ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã** | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ (timestamp) | –°—Ä–µ–¥–Ω–∏–µ (–≤–µ–∫—Ç–æ—Ä) | –í—ã—Å–æ–∫–∏–µ (–∏—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π) | –°—Ä–µ–¥–Ω–∏–µ | –°—Ä–µ–¥–Ω–∏–µ-–í—ã—Å–æ–∫–∏–µ (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ) | –°—Ä–µ–¥–Ω–∏–µ (tombstone records) |
| **–ü—Ä–∏—á–∏–Ω–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å** | –ù–µ—Ç | –î–∞ | –î–∞ | –ó–∞–≤–∏—Å–∏—Ç | –î–∞ | –î–∞ (—Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º) |
| **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —á–∞—Å–æ–≤** | –î–∞ | –ù–µ—Ç | –ù–µ—Ç | –ó–∞–≤–∏—Å–∏—Ç | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ (LWW-based - –¥–∞) | –ó–∞–≤–∏—Å–∏—Ç |
| **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é** | –ù–µ—Ç | Merge logic | Merge logic + —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ | –ü–æ–ª–Ω–∞—è merge logic | –í—ã–±–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ CRDT | –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ GC |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö** | –û—Ç–ª–∏—á–Ω–æ (O(1)) | –ü–ª–æ—Ö–æ (O(N —É–∑–ª–æ–≤)) | –°—Ä–µ–¥–Ω–µ | –°—Ä–µ–¥–Ω–µ | –ü–ª–æ—Ö–æ (tombstones, —Ç–µ–≥–∏) | –ü–ª–æ—Ö–æ (–Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ) |
| **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è** | –ö—ç—à–∏, —Å—Ç–∞—Ç—É—Å—ã, –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | –°–∏—Å—Ç–µ–º—ã —Å —Ä–µ–¥–∫–∏–º–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º–∏ | Collaborative editing | –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π | Offline-first, multi-master | –õ—é–±–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π —É–¥–∞–ª–µ–Ω–∏–π |
| **–ü—Ä–∏–º–µ—Ä—ã —Å–∏—Å—Ç–µ–º** | Cassandra, Redis | Riak, Voldemort | Git, Google Docs (OT) | Riak, DynamoDB | Redis Enterprise, Riak, Yjs | Cassandra, Kafka, CouchDB |

---

## –í—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

### –î–µ—Ä–µ–≤–æ —Ä–µ—à–µ–Ω–∏–π

```
–ù–∞—á–∞–ª–æ: –£ —Ç–µ–±—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π

‚îå‚îÄ –ù—É–∂–Ω–∞ —Å—Ç—Ä–æ–≥–∞—è consistency (linearizability)?
‚îÇ  ‚îî‚îÄ –î–ê ‚Üí –ò—Å–ø–æ–ª—å–∑—É–π consensus (Paxos/Raft), –Ω–µ eventual consistency
‚îÇ           –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã, –Ω–æ availability —Å—Ç—Ä–∞–¥–∞–µ—Ç –ø—Ä–∏ partitions
‚îÇ
‚îî‚îÄ –ù–ï–¢ ‚Üí Eventual consistency

   ‚îå‚îÄ –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤–æ–∑–º–æ–∂–Ω—ã —Ä–µ–¥–∫–æ?
   ‚îÇ  ‚îî‚îÄ –î–ê ‚Üí LWW (–ø—Ä–æ—Å—Ç–æ—Ç–∞), –Ω–æ –º–æ–Ω–∏—Ç–æ—Ä—å clock skew –∏ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö
   ‚îÇ
   ‚îî‚îÄ –ù–ï–¢ ‚Üí –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —á–∞—Å—Ç—ã

      ‚îå‚îÄ –î–∞–Ω–Ω—ã–µ –∏–º–µ—é—Ç —á–µ—Ç–∫—É—é —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (sets, counters, text)?
      ‚îÇ  ‚îî‚îÄ –î–ê ‚Üí CRDTs
      ‚îÇ         –í—ã–±–µ—Ä–∏ —Ç–∏–ø: G-Counter, OR-Set, Sequence CRDT –∏ —Ç.–¥.
      ‚îÇ
      ‚îî‚îÄ –ù–ï–¢ ‚Üí –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ª–æ–∂–Ω–∞—è –∏–ª–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞

         ‚îå‚îÄ –ú–æ–∂–µ—à—å –æ–ø–∏—Å–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ñ–æ—Ä–º–∞–ª—å–Ω–æ (insert, delete, move)?
         ‚îÇ  ‚îî‚îÄ –î–ê ‚Üí Causal Merge –∏–ª–∏ Operation-based CRDT
         ‚îÇ           –¢—Ä–µ–±—É–µ—Ç —Å–ª–æ–∂–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
         ‚îÇ
         ‚îî‚îÄ –ù–ï–¢ ‚Üí –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å–ª–æ–∂–Ω–∞—è –∏ —É–Ω–∏–∫–∞–ª—å–Ω–∞—è

            ‚îî‚îÄ Application-Defined Resolution
               –ò—Å–ø–æ–ª—å–∑—É–π Version Vectors –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è + custom merge logic
```

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–æ–º–µ–Ω–∞–º

**E-commerce:**

```
- –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤: LWW (–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–µ–¥–∫–∏, –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤–∞–∂–Ω–µ–µ)
- Inventory: –ù–µ eventual consistency! –ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é –∏–ª–∏ reservation-based –ø–æ–¥—Ö–æ–¥
- –ö–æ—Ä–∑–∏–Ω–∞: CRDTs (OR-Set –¥–ª—è items) + Application-defined –¥–ª—è quantities
- Wishlist: OR-Set CRDT
- –û—Ç–∑—ã–≤—ã/–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏: LWW –∏–ª–∏ Application-defined
- –†–µ–π—Ç–∏–Ω–≥–∏: G-Counter CRDT
```

**Social Network:**

```
- –ü–æ—Å—Ç—ã/–∫–æ–Ω—Ç–µ–Ω—Ç: LWW (—Ä–µ–¥–∫–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç—Å—è)
- –õ–∞–π–∫–∏/—Ä–µ–∞–∫—Ü–∏–∏: G-Counter CRDT
- –ü–æ–¥–ø–∏—Å—á–∏–∫–∏ (followers): OR-Set CRDT
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏: Append-only —Å tombstones –¥–ª—è —É–¥–∞–ª–µ–Ω–∏–π
- –ß–∞—Ç—ã/–º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã: Sequence CRDT (–¥–ª—è –ø–æ—Ä—è–¥–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π)
```

**Collaborative Tools (Google Docs, Figma):**

```
- –¢–µ–∫—Å—Ç–æ–≤—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã: Sequence CRDT (Yjs, Automerge) –∏–ª–∏ OT
- Whiteboard/canvas: CRDTs –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ + causal merge
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏: OR-Set CRDT
- –ö—É—Ä—Å–æ—Ä—ã (–ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ): LWW (–ø–æ—Å–ª–µ–¥–Ω—è—è –ø–æ–∑–∏—Ü–∏—è –≤–∞–∂–Ω–∞)
```

**IoT / Sensor Data:**

```
- –ü–æ–∫–∞–∑–∞–Ω–∏—è —Å–µ–Ω—Å–æ—Ä–æ–≤: LWW (–ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–∞–∂–Ω–µ–µ) –∏–ª–∏ append-only
- –ê–≥—Ä–µ–≥–∞—Ç—ã (—Å—É–º–º—ã, —Å—á–µ—Ç—á–∏–∫–∏): PN-Counter CRDT
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤: Version vectors + Application-defined
- –ê–ª–µ—Ä—Ç—ã: Append-only —Å tombstones
```

**Banking / Finance:**

```
- –ë–∞–ª–∞–Ω—Å—ã —Å—á–µ—Ç–æ–≤: –ù–ï eventual consistency! –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è (Paxos/Raft)
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è + ACID
- –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π: Append-only (immutable event log)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: LWW –∏–ª–∏ Application-defined
```

**Gaming:**

```
- –ü–æ–∑–∏—Ü–∏—è –∏–≥—Ä–æ–∫–∞: LWW (–ø–æ—Å–ª–µ–¥–Ω—è—è –ø–æ–∑–∏—Ü–∏—è)
- –°—á–µ—Ç/–æ—á–∫–∏: PN-Counter CRDT
- Inventory (–ø—Ä–µ–¥–º–µ—Ç—ã): OR-Set CRDT
- –ß–∞—Ç: Sequence CRDT
- Leaderboard: Application-defined —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–µ–π –¥–ª—è —Ç–æ–ø–∞
```

### –ì–∏–±—Ä–∏–¥–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã

–í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–π:

**–ü–æ–¥—Ö–æ–¥ 1: –ü–æ —Ç–∏–ø—É –¥–∞–Ω–Ω—ã—Ö**

```
–í –æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ:
- User profile name: Application-defined (–≤–∞–∂–Ω–æ –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å)
- User avatar URL: LWW (–ø–æ—Å–ª–µ–¥–Ω–∏–π –≤–∞–∂–µ–Ω)
- User tags: OR-Set CRDT (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ)
- User login count: PN-Counter CRDT
```

**–ü–æ–¥—Ö–æ–¥ 2: –ü–æ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏**

```
- –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (95% —Å–ª—É—á–∞–µ–≤): Coordinator-based, —Å—Ç—Ä–æ–≥–∞—è consistency
- –ù–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (5% —Å–ª—É—á–∞–µ–≤): Eventual consistency —Å LWW
```

**–ü–æ–¥—Ö–æ–¥ 3: –ü–æ —á–∞—Å—Ç–æ—Ç–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤**

```
- Hot keys (—á–∞—Å—Ç—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã): –ò—Å–ø–æ–ª—å–∑—É–π single-writer –∏–ª–∏ CRDTs
- Cold keys (—Ä–µ–¥–∫–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã): LWW –∏–ª–∏ Application-defined
```

### –ß–µ–≥–æ –∏–∑–±–µ–≥–∞—Ç—å

‚ùå **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π LWW –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö** ‚Äî –ø–æ—Ç–µ—Ä—è –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–∞

‚ùå **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π CRDTs –¥–ª—è –¥–∞–Ω–Ω—ã—Ö —Å –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, inventory ‚â• 0) ‚Äî CRDTs –Ω–µ –º–æ–≥—É—Ç –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–∫–∏–µ constraint

‚ùå **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π eventual consistency –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π** ‚Äî –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è consistency, –∏—Å–ø–æ–ª—å–∑—É–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é

‚ùå **–ù–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π clock skew** –ø—Ä–∏ LWW ‚Äî –º–æ–Ω–∏—Ç–æ—Ä—å –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π —á–∞—Å—ã

‚ùå **–ù–µ –∑–∞–±—ã–≤–∞–π –ø—Ä–æ garbage collection tombstones** ‚Äî –æ–Ω–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è

‚ùå **–ù–µ —Ä–µ–∞–ª–∏–∑—É–π CRDTs —Å –Ω—É–ª—è** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (Yjs, Automerge, Riak data types)

‚ùå **–ù–µ —Å–º–µ—à–∏–≤–∞–π —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ merge-–ª–æ–≥–∏–∫–∏** ‚Äî –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É–π –ª–æ–≥–∏–∫—É —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

### –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ ‚Äî —ç—Ç–æ trade-off –º–µ–∂–¥—É:

- **–ü—Ä–æ—Å—Ç–æ—Ç–æ–π** (LWW) vs **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å—é** (CRDTs, Application-defined)
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é** (LWW) vs **–°–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å—é –¥–∞–Ω–Ω—ã—Ö** (CRDTs, Version vectors)
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–º–æ–º** (LWW, CRDTs) vs **–ö–æ–Ω—Ç—Ä–æ–ª–µ–º** (Application-defined)
- **Availability** (Eventual consistency) vs **Consistency** (–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è)

–ù–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ç–≤–æ–µ–π —Å–∏—Å—Ç–µ–º—ã:
- –ù–∞—Å–∫–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω–∞ –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö?
- –ù–∞—Å–∫–æ–ª—å–∫–æ —á–∞—Å—Ç—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã?
- –ö–∞–∫–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π?
- –ö–∞–∫–æ–≤—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ availability –∏ latency?

–ò –≤—ã–±–∏—Ä–∞–π —Å—Ç—Ä–∞—Ç–µ–≥–∏—é (–∏–ª–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏—é —Å—Ç—Ä–∞—Ç–µ–≥–∏–π), –∫–æ—Ç–æ—Ä–∞—è –ª—É—á—à–µ –≤—Å–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ç–≤–æ–µ–≥–æ —Å–ª—É—á–∞—è. –ü–æ–º–Ω–∏: **–ª—É—á—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ ‚Äî —ç—Ç–æ –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏—Ö** (partitioning, single-writer, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è), –Ω–æ –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ–∏–∑–±–µ–∂–Ω—ã, –≤—ã–±–∏—Ä–∞–π —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ.
