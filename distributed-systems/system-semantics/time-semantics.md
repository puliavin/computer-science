# Time Semantics (–°–µ–º–∞–Ω—Ç–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–∏)

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
2. [–ü–æ—á–µ–º—É –≤—Ä–µ–º—è –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö ‚Äî —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞?](#–ø–æ—á–µ–º—É-–≤—Ä–µ–º—è-–≤-—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö-—Å–∏—Å—Ç–µ–º–∞—Ö--—ç—Ç–æ-–ø—Ä–æ–±–ª–µ–º–∞)
3. [Physical Time Semantics](#physical-time-semantics-—Å–µ–º–∞–Ω—Ç–∏–∫–∞-—Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ-–≤—Ä–µ–º–µ–Ω–∏)
4. [Logical Time Semantics](#logical-time-semantics-—Å–µ–º–∞–Ω—Ç–∏–∫–∞-–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ-–≤—Ä–µ–º–µ–Ω–∏)
5. [Lamport Clocks](#lamport-clocks-—á–∞—Å—ã-–ª–∞–º–ø–æ—Ä—Ç–∞)
6. [Vector Clocks](#vector-clocks-–≤–µ–∫—Ç–æ—Ä–Ω—ã–µ-—á–∞—Å—ã)
7. [Hybrid Logical Clocks (HLC)](#hybrid-logical-clocks-hlc-–≥–∏–±—Ä–∏–¥–Ω—ã–µ-–ª–æ–≥–∏—á–µ—Å–∫–∏–µ-—á–∞—Å—ã)
8. [External Consistency](#external-consistency-–≤–Ω–µ—à–Ω—è—è-—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å)
9. [Bounded Staleness](#bounded-staleness-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è-—É—Å—Ç–∞—Ä–µ–ª–æ—Å—Ç—å)
10. [Clock Skew Assumptions](#clock-skew-assumptions-–ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è-–æ-—Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–∏-—á–∞—Å–æ–≤)
11. [–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ –≤—Ä–µ–º–µ–Ω–∏](#—Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è-—Ç–∞–±–ª–∏—Ü–∞-–º–µ—Ö–∞–Ω–∏–∑–º–æ–≤-–≤—Ä–µ–º–µ–Ω–∏)
12. [–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–±–æ—Ç—ã —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º](#–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏-—Ä–∞–±–æ—Ç—ã-—Å–æ-–≤—Ä–µ–º–µ–Ω–µ–º)
13. [–ó–∞–∫–ª—é—á–µ–Ω–∏–µ](#–∑–∞–∫–ª—é—á–µ–Ω–∏–µ)
14. [–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã](#–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ-–º–∞—Ç–µ—Ä–∏–∞–ª—ã)

---

## –í–≤–µ–¥–µ–Ω–∏–µ

Time Semantics (—Å–µ–º–∞–Ω—Ç–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–∏) ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä –ø—Ä–∞–≤–∏–ª –∏ –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏—Ö, –∫–∞–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –∏ –∫–∞–∫ –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–≥–æ –¥–ª—è —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π, –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏.

üí° **–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è**: –í —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –Ω–µ—Ç –µ–¥–∏–Ω–æ–≥–æ, –æ–±—â–µ–≥–æ –¥–ª—è –≤—Å–µ—Ö —É–∑–ª–æ–≤ "—Å–µ–π—á–∞—Å". –ö–∞–∂–¥—ã–π —É–∑–µ–ª –∂–∏–≤—ë—Ç –≤ —Å–≤–æ—ë–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –æ –≤—Ä–µ–º–µ–Ω–∏, –∏ —ç—Ç–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –º–æ–≥—É—Ç —Ä–∞–∑–ª–∏—á–∞—Ç—å—Å—è. –≠—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –º–∏—Ä–∞, —Å –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω–æ –Ω–∞—É—á–∏—Ç—å—Å—è –∂–∏—Ç—å.

### –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ —Å–µ–º–∞–Ω—Ç–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–∏?

–í—Ä–µ–º—è –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è:
- **–£–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ —Ä–∞–Ω—å—à–µ, —á—Ç–æ –ø–æ–∑–∂–µ
- **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤**: –ü–æ–Ω–∏–º–∞–Ω–∏—è, –∫–∞–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω–∫—É—Ä–∏—Ä—É—é—Ç –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º
- **–û–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏**: –ì–∞—Ä–∞–Ω—Ç–∏–∏, —á—Ç–æ –≤—Å–µ —É–∑–ª—ã –≤–∏–¥—è—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
- **–û—Ç–ª–∞–¥–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**: –ü–æ–Ω–∏–º–∞–Ω–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- **Timestamp-based concurrency control**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏

### –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —É —Ç–µ–±—è —Ç—Ä–∏ —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ä–∞–∑–Ω—ã—Ö –¥–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä–∞—Ö:
- –°–µ—Ä–≤–µ—Ä A –≤ –ú–æ—Å–∫–≤–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 12:00:00.000
- –°–µ—Ä–≤–µ—Ä B –≤ –õ–æ–Ω–¥–æ–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 12:00:00.050 (–Ω–∞ 50 –º—Å –≤–ø–µ—Ä–µ–¥–∏)
- –°–µ—Ä–≤–µ—Ä C –≤ –¢–æ–∫–∏–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 11:59:59.980 (–Ω–∞ 20 –º—Å –ø–æ–∑–∞–¥–∏)

–ö–ª–∏–µ–Ω—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä A, –∑–∞—Ç–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä B. –ö–∞–∫–∞—è –∑–∞–ø–∏—Å—å –ø—Ä–æ–∏–∑–æ—à–ª–∞ —Ä–∞–Ω—å—à–µ? –ï—Å–ª–∏ —Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ timestamp'—ã, –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è, —á—Ç–æ –∑–∞–ø–∏—Å—å –Ω–∞ B –ø—Ä–æ–∏–∑–æ—à–ª–∞ —Ä–∞–Ω—å—à–µ, —Ö–æ—Ç—è –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –æ–Ω–∞ –±—ã–ª–∞ –≤—Ç–æ—Ä–æ–π!

–≠—Ç–æ –∏ –µ—Å—Ç—å —Å—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –≤—Ä–µ–º–µ–Ω–∏ –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö.

---

## –ü–æ—á–µ–º—É –≤—Ä–µ–º—è –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö ‚Äî —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞?

### 1. –£ –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞ —Å–≤–æ–∏ —á–∞—Å—ã

–í —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –Ω–µ—Ç –µ–¥–∏–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–∏. –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–µ—Ä –∏–º–µ–µ—Ç —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —á–∞—Å—ã (–æ–±—ã—á–Ω–æ –∫–≤–∞—Ä—Ü–µ–≤—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä), –∏ —ç—Ç–∏ —á–∞—Å—ã:
- **–ò–¥—É—Ç —Å —Ä–∞–∑–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é** (clock drift ‚Äî –¥—Ä–µ–π—Ñ —á–∞—Å–æ–≤)
- **–ò–º–µ—é—Ç —Ä–∞–∑–Ω—É—é —Ç–æ—á–Ω–æ—Å—Ç—å** (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Ç–æ—á–Ω–µ–µ –¥—Ä—É–≥–∏—Ö)
- **–ú–æ–≥—É—Ç –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ** (–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—á–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞)

**–ê–Ω–∞–ª–æ–≥–∏—è –∏–∑ –∂–∏–∑–Ω–∏**: –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —É —Ç–µ–±—è –∏ —Ç–≤–æ–µ–≥–æ –¥—Ä—É–≥–∞ –µ—Å—Ç—å –Ω–∞—Ä—É—á–Ω—ã–µ —á–∞—Å—ã. –î–∞–∂–µ –µ—Å–ª–∏ –≤—ã –æ–±–∞ –∫—É–ø–∏–ª–∏ –∏—Ö –≤ –æ–¥–∏–Ω –¥–µ–Ω—å –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–ª–∏, —á–µ—Ä–µ–∑ –º–µ—Å—è—Ü –æ–Ω–∏ –±—É–¥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è ‚Äî –æ–¥–Ω–∏ –±—É–¥—É—Ç —Å–ø–µ—à–∏—Ç—å –Ω–∞ —Å–µ–∫—É–Ω–¥—É, –¥—Ä—É–≥–∏–µ –æ—Ç—Å—Ç–∞–≤–∞—Ç—å. –ê –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ —Å–ª—É—á–∞–π–Ω–æ –ø–µ—Ä–µ–≤–µ–¥—ë—Ç —Å—Ç—Ä–µ–ª–∫–∏, —Ä–∞–∑–Ω–∏—Ü–∞ –±—É–¥–µ—Ç –µ—â—ë –±–æ–ª—å—à–µ.

**–ü—Ä–∏–º–µ—Ä –∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º**:

**MongoDB** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç wall clock time (—Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è) –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ replica set. –ï—Å–ª–∏ —á–∞—Å—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É–∑–ª–∞—Ö —Ä–∞—Å—Ö–æ–¥—è—Ç—Å—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ, —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫:
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é, –∫–∞–∫–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–∏–∑–æ—à–ª–∞ —Ä–∞–Ω—å—à–µ
- –ü—Ä–æ–±–ª–µ–º–∞–º —Å conflict resolution –ø—Ä–∏ –∑–∞–ø–∏—Å—è—Ö
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–µ TTL –∏–Ω–¥–µ–∫—Å–æ–≤ (–¥–æ–∫—É–º–µ–Ω—Ç—ã —É–¥–∞–ª—è—é—Ç—Å—è —Ä–∞–Ω—å—à–µ –∏–ª–∏ –ø–æ–∑–∂–µ, —á–µ–º –¥–æ–ª–∂–Ω—ã)

### 2. –°–µ—Ç—å –Ω–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è

–î–∞–∂–µ –µ—Å–ª–∏ —É –≤—Å–µ—Ö —É–∑–ª–æ–≤ –±—ã–ª–∏ –±—ã –∏–¥–µ–∞–ª—å–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∞—Å—ã, —Å–æ–æ–±—â–µ–Ω–∏—è –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π. –≠—Ç–∞ –∑–∞–¥–µ—Ä–∂–∫–∞:
- **–ù–µ–ø–æ—Å—Ç–æ—è–Ω–Ω–∞** (network jitter ‚Äî –¥–∂–∏—Ç—Ç–µ—Ä —Å–µ—Ç–∏)
- **–ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞** (–º–æ–∂–µ—Ç –±—ã—Ç—å 1 –º—Å, –∞ –º–æ–∂–µ—Ç –±—ã—Ç—å 1 —Å–µ–∫—É–Ω–¥–∞)
- **–ù–µ—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–∞** (–ø–∞–∫–µ—Ç –æ—Ç A –∫ B –º–æ–∂–µ—Ç –∏–¥—Ç–∏ 10 –º—Å, –∞ –æ–±—Ä–∞—Ç–Ω–æ ‚Äî 50 –º—Å)

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–∞–∂–µ –µ—Å–ª–∏ —Å–æ–±—ã—Ç–∏–µ A –ø—Ä–æ–∏–∑–æ—à–ª–æ —Ä–∞–Ω—å—à–µ —Å–æ–±—ã—Ç–∏—è B –ø–æ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏, —É–∑–µ–ª –º–æ–∂–µ—Ç —É–∑–Ω–∞—Ç—å –æ B —Ä–∞–Ω—å—à–µ, —á–µ–º –æ A.

**–ü—Ä–∏–º–µ—Ä –∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º**:

**Kafka** —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ producers: Producer A –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ç–æ–ø–∏–∫ –≤ 12:00:00.000, Producer B –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ 12:00:00.100. –ù–æ –∏–∑-–∑–∞ —Å–µ—Ç–µ–≤–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç B –º–æ–∂–µ—Ç –ø—Ä–∏–π—Ç–∏ –Ω–∞ broker —Ä–∞–Ω—å—à–µ –∏ –ø–æ–ª—É—á–∏—Ç—å –º–µ–Ω—å—à–∏–π offset. Consumer, —á–∏—Ç–∞—é—â–∏–π —Ç–æ–ø–∏–∫, —É–≤–∏–¥–∏—Ç —Å–æ–±—ã—Ç–∏—è –≤ –ø–æ—Ä—è–¥–∫–µ, –æ—Ç–ª–∏—á–Ω–æ–º –æ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞.

### 3. –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–∞–∑–ª–∏—á–∏—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –∏ –æ—Ç–∫–∞–∑

–ï—Å–ª–∏ —É–∑–µ–ª –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å, —Ç—ã –Ω–µ –º–æ–∂–µ—à—å —Ç–æ—á–Ω–æ –∑–Ω–∞—Ç—å:
- –£–∑–µ–ª —É–ø–∞–ª?
- –£–∑–µ–ª —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ?
- –°–µ—Ç—å –º–µ–¥–ª–µ–Ω–Ω–∞—è?
- –¢–≤–æ–π –∑–∞–ø—Ä–æ—Å –ø–æ—Ç–µ—Ä—è–ª—Å—è?
- –û—Ç–≤–µ—Ç –ø–æ—Ç–µ—Ä—è–ª—Å—è?

–≠—Ç–æ –¥–µ–ª–∞–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ **–∏–¥–µ–∞–ª—å–Ω–æ —Ç–æ—á–Ω–æ–≥–æ** –º–µ—Ö–∞–Ω–∏–∑–º–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å–±–æ–µ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–∞–π–º–∞—É—Ç–æ–≤.

### 4. –ù–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è

–í —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º –º–∏—Ä–µ (—Å–æ–≥–ª–∞—Å–Ω–æ —Ç–µ–æ—Ä–∏–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏) –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ ‚Äî –≤—Ä–µ–º—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π. –í —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö —ç—Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞ –µ—â—ë –∞–∫—Ç—É–∞–ª—å–Ω–µ–µ: –Ω–µ—Ç –µ–¥–∏–Ω–æ–≥–æ "–Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è", –∫–æ—Ç–æ—Ä—ã–π –º–æ–≥ –±—ã —Å–∫–∞–∑–∞—Ç—å, –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∏ —Å–æ–±—ã—Ç–∏—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É–∑–ª–∞—Ö.

üí° **–í–∞–∂–Ω–æ–µ –æ—Å–æ–∑–Ω–∞–Ω–∏–µ**: –ï—Å–ª–∏ –¥–≤–∞ —Å–æ–±—ã—Ç–∏—è –ø—Ä–æ–∏–∑–æ—à–ª–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É–∑–ª–∞—Ö, –∏ –º–µ–∂–¥—É –Ω–∏–º–∏ –Ω–µ –±—ã–ª–æ –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ (–ø—Ä–∏—á–∏–Ω–Ω–æ-—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ–π —Å–≤—è–∑–∏), —Ç–æ –≤–æ–ø—Ä–æ—Å "–∫–∞–∫–æ–µ –∏–∑ –Ω–∏—Ö –ø—Ä–æ–∏–∑–æ—à–ª–æ —Ä–∞–Ω—å—à–µ?" **–Ω–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª–∞**. –≠—Ç–∏ —Å–æ–±—ã—Ç–∏—è **concurrent** (–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã, –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã).

---

## Physical Time Semantics (–°–µ–º–∞–Ω—Ç–∏–∫–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏)

### –ß—Ç–æ —ç—Ç–æ

Physical Time (—Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è) ‚Äî —ç—Ç–æ –≤—Ä–µ–º—è, –∏–∑–º–µ—Ä—è–µ–º–æ–µ —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ —á–∞—Å–∞–º–∏ (wall clock time). –í Unix-—Å–∏—Å—Ç–µ–º–∞—Ö —ç—Ç–æ –æ–±—ã—á–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥, –ø—Ä–æ—à–µ–¥—à–∏—Ö —Å 1 —è–Ω–≤–∞—Ä—è 1970 –≥–æ–¥–∞ (Unix epoch).

**–ì–∞—Ä–∞–Ω—Ç–∏–∏**:
- ‚úÖ –í—Ä–µ–º—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç "—Ä–µ–∞–ª—å–Ω–æ–º—É" –≤—Ä–µ–º–µ–Ω–∏ –≤–æ –≤–Ω–µ—à–Ω–µ–º –º–∏—Ä–µ
- ‚úÖ –ß–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ (–º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å "—Å–æ–±—ã—Ç–∏–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ –≤ 15:30")
- ‚úÖ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è TTL, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –º–µ—Ç—Ä–∏–∫

**–ù–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç**:
- ‚ùå –ú–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å (–≤—Ä–µ–º—è –º–æ–∂–µ—Ç "–ø—Ä—ã–≥–Ω—É—Ç—å –Ω–∞–∑–∞–¥" –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å NTP)
- ‚ùå –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ (–∫–∞–∂–¥—ã–π —É–∑–µ–ª –∏–º–µ–µ—Ç —Å–≤–æ—ë –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ –≤—Ä–µ–º–µ–Ω–∏)
- ‚ùå –¢–æ—á–Ω–æ–µ —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ

### Clock Drift (–î—Ä–µ–π—Ñ —á–∞—Å–æ–≤)

–§–∏–∑–∏—á–µ—Å–∫–∏–µ —á–∞—Å—ã –Ω–µ –∏–¥–µ–∞–ª—å–Ω—ã ‚Äî –æ–Ω–∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Ä–∞—Å—Ö–æ–¥—è—Ç—Å—è —Å —Ä–µ–∞–ª—å–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º. –¢–∏–ø–∏—á–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –¥—Ä–µ–π—Ñ–∞:
- **–•–æ—Ä–æ—à–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —á–∞—Å—ã**: ~50 ppm (parts per million) ‚Äî –ø—Ä–∏–º–µ—Ä–Ω–æ 4.3 —Å–µ–∫—É–Ω–¥—ã –≤ –¥–µ–Ω—å
- **–ü–ª–æ—Ö–∏–µ —á–∞—Å—ã**: –º–æ–≥—É—Ç –¥—Ä–µ–π—Ñ–æ–≤–∞—Ç—å –Ω–∞ —Å–æ—Ç–Ω–∏ ppm

**–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞**: –ï—Å–ª–∏ —á–∞—Å—ã –¥—Ä–µ–π—Ñ—É—é—Ç —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é 100 ppm:
- –ó–∞ 1 —Å–µ–∫—É–Ω–¥—É: 0.0001 —Å–µ–∫—É–Ω–¥—ã —Ä–∞–∑–Ω–∏—Ü—ã
- –ó–∞ 1 –º–∏–Ω—É—Ç—É: 0.006 —Å–µ–∫—É–Ω–¥—ã
- –ó–∞ 1 —á–∞—Å: 0.36 —Å–µ–∫—É–Ω–¥—ã
- –ó–∞ 1 –¥–µ–Ω—å: 8.64 —Å–µ–∫—É–Ω–¥—ã
- –ó–∞ 1 –º–µ—Å—è—Ü: ~4.3 –º–∏–Ω—É—Ç—ã

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —á–∞—Å—ã –Ω–∞ –¥–≤—É—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö –º–æ–≥—É—Ç —Ä–∞–∑–æ–π—Ç–∏—Å—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –∑–∞ –º–µ—Å—è—Ü!

### NTP (Network Time Protocol)

NTP ‚Äî —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —á–∞—Å–æ–≤ —á–µ—Ä–µ–∑ —Å–µ—Ç—å. –û–Ω:
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç time server (–æ–±—ã—á–Ω–æ –∫–∞–∂–¥—ã–µ 64-1024 —Å–µ–∫—É–Ω–¥—ã)
- –í—ã—á–∏—Å–ª—è–µ—Ç network delay –∏ clock offset
- **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ** –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ —á–∞—Å—ã (slewing), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å–∫–∞—á–∫–æ–≤ –Ω–∞–∑–∞–¥

**–¢–æ—á–Ω–æ—Å—Ç—å NTP**:
- –í –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏: 1-10 –º—Å
- –ß–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç: 10-100 –º—Å
- –í –ø–ª–æ—Ö–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö: –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–µ–∫—É–Ω–¥—ã

**–ü—Ä–æ–±–ª–µ–º—ã NTP**:

1. **Clock jump**: –ï—Å–ª–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –≤–µ–ª–∏–∫–æ, NTP –º–æ–∂–µ—Ç "–ø—Ä—ã–≥–Ω—É—Ç—å" –Ω–∞–∑–∞–¥
2. **Network issues**: –ï—Å–ª–∏ –ø–æ—Ç–µ—Ä—è–Ω–∞ —Å–≤—è–∑—å —Å NTP-—Å–µ—Ä–≤–µ—Ä–æ–º, —á–∞—Å—ã –Ω–∞—á–∏–Ω–∞—é—Ç –¥—Ä–µ–π—Ñ–æ–≤–∞—Ç—å
3. **Asymmetric delays**: NTP –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ –∑–∞–¥–µ—Ä–∂–∫–∞ —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤–∞, –Ω–æ —ç—Ç–æ –Ω–µ –≤—Å–µ–≥–¥–∞ —Ç–∞–∫

**–ò–Ω—Ü–∏–¥–µ–Ω—Ç –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏** (CloudFlare, 2017):

CloudFlare —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å –ø—Ä–æ–±–ª–µ–º–æ–π, –∫–æ–≥–¥–∞ NTP –Ω–∞ –æ–¥–Ω–æ–º –∏–∑ —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å–¥–µ–ª–∞–ª —Å–∫–∞—á–æ–∫ –Ω–∞–∑–∞–¥ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥. –≠—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ —Ç–æ–º—É, —á—Ç–æ:
- –°–∏—Å—Ç–µ–º–∞ –≤—ã–¥–∞–ª–∞ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å timestamp'–æ–º –≤ –ø—Ä–æ—à–ª–æ–º
- –ë—Ä–∞—É–∑–µ—Ä—ã –æ—Ç–∫–ª–æ–Ω–∏–ª–∏ —ç—Ç–æ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∫–∞–∫ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π
- –ß–∞—Å—Ç—å —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–µ—Ä–µ—Å—Ç–∞–ª–∞ –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å—Å—è

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤, –∫–æ–≥–¥–∞ —á–∞—Å—ã —Å–Ω–æ–≤–∞ "–¥–æ–≥–Ω–∞–ª–∏" —Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è.

**–ö–∞–∫ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å physical time**:

1. **–ò—Å–ø–æ–ª—å–∑—É–π NTP –≤–µ–∑–¥–µ**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π –≤—Å–µ —É–∑–ª—ã —Å –Ω–∞–¥—ë–∂–Ω—ã–º–∏ NTP-—Å–µ—Ä–≤–µ—Ä–∞–º–∏
2. **–ú–æ–Ω–∏—Ç–æ—Ä—å clock drift**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–π —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —á–∞—Å–æ–≤ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏
3. **–ù–µ –ø–æ–ª–∞–≥–∞–π—Å—è –Ω–∞ —Ç–æ—á–Ω–æ–µ —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ**: Physical time —Ö–æ—Ä–æ—à –¥–ª—è –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞, –Ω–æ –Ω–µ –¥–ª—è —Å—Ç—Ä–æ–≥–æ–≥–æ
4. **–ò—Å–ø–æ–ª—å–∑—É–π bounded clock skew**: –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 100 –º—Å) –∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä—É–π —Å —É—á—ë—Ç–æ–º —ç—Ç–æ–≥–æ
5. **–ò–∑–±–µ–≥–∞–π —Å—Ä–∞–≤–Ω–µ–Ω–∏–π timestamp'–æ–≤ —Å —Ä–∞–∑–Ω—ã—Ö —É–∑–ª–æ–≤**: –≠—Ç–æ –Ω–µ–Ω–∞–¥—ë–∂–Ω–æ

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è physical time

**PostgreSQL MVCC**:
PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç transaction ID (XID) –¥–ª—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–æ —Ç–∞–∫–∂–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç timestamp –¥–ª—è –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. Timestamp –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π —Å—Ç—Ä–æ–∫ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ (VACUUM)
- Standby delay monitoring
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –ª–æ–≥–∞—Ö

–ù–æ **–Ω–µ** –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π ‚Äî –¥–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è XID.

**Redis TTL**:
Redis –∏—Å–ø–æ–ª—å–∑—É–µ—Ç physical time –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏ –∫–ª—é—á–µ–π. –ï—Å–ª–∏ —á–∞—Å—ã –Ω–∞ master –∏ replica —Ä–∞—Å—Ö–æ–¥—è—Ç—Å—è:
- –ö–ª—é—á–∏ –º–æ–≥—É—Ç —É–¥–∞–ª—è—Ç—å—Å—è –≤ —Ä–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É–∑–ª–∞—Ö
- –ü–æ—Å–ª–µ failover TTL –º–æ–∂–µ—Ç "–ø—Ä—ã–≥–Ω—É—Ç—å" –≤–ø–µ—Ä—ë–¥ –∏–ª–∏ –Ω–∞–∑–∞–¥

**ClickHouse**:
ClickHouse –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è –¥–ª—è:
- –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- TTL —Ç–∞–±–ª–∏—Ü –∏ —Å—Ç–æ–ª–±—Ü–æ–≤
- Materialized views

–ï—Å–ª–∏ —á–∞—Å—ã —Ä–∞—Å—Ö–æ–¥—è—Ç—Å—è –º–µ–∂–¥—É —É–∑–ª–∞–º–∏:
- –î–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –ø–æ–ø–∞—Å—Ç—å –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ø–∞—Ä—Ç–∏—Ü–∏—é
- TTL —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–ø–ª–∏–∫–∞—Ö
- –í–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π

---

## Logical Time Semantics (–°–µ–º–∞–Ω—Ç–∏–∫–∞ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏)

### –ß—Ç–æ —ç—Ç–æ

Logical Time (–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è) ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ, –∫–æ—Ç–æ—Ä—ã–π **–Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —á–∞—Å–æ–≤**. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å "–≤ –∫–∞–∫–æ–µ –≤—Ä–µ–º—è –ø–æ —á–∞—Å–∞–º —ç—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?", –º—ã —Å–ø—Ä–∞—à–∏–≤–∞–µ–º "–∫–∞–∫–∏–µ —Å–æ–±—ã—Ç–∏—è –¥–æ–ª–∂–Ω—ã –±—ã–ª–∏ –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –¥–æ —ç—Ç–æ–≥–æ —Å–æ–±—ã—Ç–∏—è?".

üí° **–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è**: –ù–∞–º –Ω–µ –≤–∞–∂–Ω–æ —Ç–æ—á–Ω–æ–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è. –í–∞–∂–Ω–æ —Ç–æ–ª—å–∫–æ **–ø–æ—Ä—è–¥–æ–∫** —Å–æ–±—ã—Ç–∏–π –∏ –∏—Ö **–ø—Ä–∏—á–∏–Ω–Ω–æ-—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–≤—è–∑–∏** (causality).

**–ì–∞—Ä–∞–Ω—Ç–∏–∏**:
- ‚úÖ –ï—Å–ª–∏ —Å–æ–±—ã—Ç–∏–µ A –ø—Ä–∏—á–∏–Ω–Ω–æ –ø—Ä–µ–¥—à–µ—Å—Ç–≤—É–µ—Ç —Å–æ–±—ã—Ç–∏—é B, —ç—Ç–æ –±—É–¥–µ—Ç –æ—Ç—Ä–∞–∂–µ–Ω–æ –≤ –ª–æ–≥–∏—á–µ—Å–∫–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç clock drift –∏ network latency
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —á–∞—Å–æ–≤

**–ù–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç**:
- ‚ùå –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–µ–∞–ª—å–Ω–æ–º—É —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏
- ‚ùå –ß–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º–æ—Å—Ç—å (–ª–æ–≥–∏—á–µ—Å–∫–∏–π timestamp –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ—Å—Ç–æ —Å—á—ë—Ç—á–∏–∫–æ–º)
- ‚ùå –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å "—Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—à–ª–æ" –º–µ–∂–¥—É —Å–æ–±—ã—Ç–∏—è–º–∏

### Happens-Before Relation (–û—Ç–Ω–æ—à–µ–Ω–∏–µ "–ø—Ä–æ–∏–∑–æ—à–ª–æ –¥–æ")

–≠—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è, –≤–≤–µ–¥—ë–Ω–Ω–∞—è –õ–∞–º–ø–æ—Ä—Ç–æ–º. –°–æ–±—ã—Ç–∏–µ A "happens-before" —Å–æ–±—ã—Ç–∏–µ B (–æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è A ‚Üí B), –µ—Å–ª–∏:

1. **Local ordering**: A –∏ B –ø—Ä–æ–∏–∑–æ—à–ª–∏ –Ω–∞ –æ–¥–Ω–æ–º —É–∑–ª–µ, –∏ A –ø—Ä–æ–∏–∑–æ—à–ª–æ —Ä–∞–Ω—å—à–µ B –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏
2. **Message sending**: A ‚Äî —ç—Ç–æ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è, B ‚Äî –µ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏–µ
3. **Transitivity**: –ï—Å–ª–∏ A ‚Üí B –∏ B ‚Üí C, —Ç–æ A ‚Üí C

–ï—Å–ª–∏ –Ω–∏ A ‚Üí B, –Ω–∏ B ‚Üí A –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, —Ç–æ A –∏ B **concurrent** (–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã) ‚Äî –æ–Ω–∏ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞.

**–ê–Ω–∞–ª–æ–≥–∏—è –∏–∑ –∂–∏–∑–Ω–∏**:

–ü—Ä–µ–¥—Å—Ç–∞–≤—å –ø–µ—Ä–µ–ø–∏—Å–∫—É –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–µ:
- –¢—ã –æ—Ç–ø—Ä–∞–≤–∏–ª —Å–æ–æ–±—â–µ–Ω–∏–µ "–ü—Ä–∏–≤–µ—Ç" –≤ 10:00
- –¢–≤–æ–π –¥—Ä—É–≥ –æ—Ç–≤–µ—Ç–∏–ª "–ü—Ä–∏–≤–µ—Ç!" –≤ 10:01
- –¢—ã –æ—Ç–ø—Ä–∞–≤–∏–ª "–ö–∞–∫ –¥–µ–ª–∞?" –≤ 10:02

–î–∞–∂–µ –µ—Å–ª–∏ —É –≤–∞—Å –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö —á–∞—Å—ã —Ä–∞—Å—Ö–æ–¥—è—Ç—Å—è, —è—Å–Ω–æ, —á—Ç–æ —Ç–≤–æ–π –≤–æ–ø—Ä–æ—Å "–ö–∞–∫ –¥–µ–ª–∞?" –ª–æ–≥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∏–∑–æ—à—ë–ª **–ø–æ—Å–ª–µ** –æ—Ç–≤–µ—Ç–∞ –¥—Ä—É–≥–∞ "–ü—Ä–∏–≤–µ—Ç!", –ø–æ—Ç–æ–º—É —á—Ç–æ –µ—Å—Ç—å –ø—Ä–∏—á–∏–Ω–Ω–æ-—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–≤—è–∑—å —á–µ—Ä–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏—è.

–ù–æ –µ—Å–ª–∏ —Ç—ã –æ—Ç–ø—Ä–∞–≤–∏–ª "–ü—Ä–∏–≤–µ—Ç" –¥—Ä—É–≥—É –ê, –∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –¥—Ä—É–≥ –ë (–≤ –¥—Ä—É–≥–æ–º —á–∞—Ç–µ) –æ—Ç–ø—Ä–∞–≤–∏–ª —Ç–µ–±–µ "–ö–∞–∫ –¥–µ–ª–∞?", —ç—Ç–∏ –¥–≤–∞ —Å–æ–±—ã—Ç–∏—è **concurrent** ‚Äî –º–µ–∂–¥—É –Ω–∏–º–∏ –Ω–µ—Ç –ø—Ä–∏—á–∏–Ω–Ω–æ–π —Å–≤—è–∑–∏.

### –ü—Ä–∏–º–µ—Ä—ã

**Kafka offsets**:
–í Kafka offset ‚Äî —ç—Ç–æ, –ø–æ —Å—É—Ç–∏, –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ partition. Offset –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ—Ä—è–¥–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ partition:
- –ï—Å–ª–∏ offset(msg1) < offset(msg2) –≤ –æ–¥–Ω–æ–º partition, —Ç–æ msg1 –±—ã–ª –∑–∞–ø–∏—Å–∞–Ω —Ä–∞–Ω—å—à–µ msg2
- –ù–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ **—Ä–∞–∑–Ω—ã—Ö** partitions –Ω–µ –∏–º–µ—é—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ ‚Äî –æ–Ω–∏ concurrent

**Redis replication offset**:
Master Redis –∏–º–µ–µ—Ç replication offset ‚Äî —Å—á—ë—Ç—á–∏–∫ –±–∞–π—Ç, –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –≤ replication backlog. –≠—Ç–æ—Ç offset –ø–æ–∑–≤–æ–ª—è–µ—Ç replica –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –æ–Ω–∞ —É–∂–µ –ø—Ä–∏–º–µ–Ω–∏–ª–∞, –∞ –∫–∞–∫–∏–µ –Ω–µ—Ç ‚Äî —ç—Ç–æ –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è –¥–ª—è –ø–æ—Ç–æ–∫–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏.

**MongoDB oplog**:
Oplog –≤ MongoDB ‚Äî —ç—Ç–æ capped collection, –≥–¥–µ –∫–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –∏–º–µ–µ—Ç –ø–æ–ª–µ `ts` (timestamp), –∫–æ—Ç–æ—Ä–æ–µ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —è–≤–ª—è–µ—Ç—Å—è –∫–æ–º–±–∏–Ω–∞—Ü–∏–µ–π:
- –§–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (–¥–ª—è –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ–≥–æ —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è)
- Sequence number (–¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Å–µ–∫—É–Ω–¥—ã)

–≠—Ç–æ –≥–∏–±—Ä–∏–¥ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –∏ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

---

## Lamport Clocks (–ß–∞—Å—ã –õ–∞–º–ø–æ—Ä—Ç–∞)

### –ß—Ç–æ —ç—Ç–æ

Lamport Clock (—á–∞—Å—ã –õ–∞–º–ø–æ—Ä—Ç–∞) ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–µ–π—à–∏–π –º–µ—Ö–∞–Ω–∏–∑–º –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–π –õ–µ—Å–ª–∏ –õ–∞–º–ø–æ—Ä—Ç–æ–º –≤ 1978 –≥–æ–¥—É. –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å—á—ë—Ç—á–∏–∫ –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ö–∞–∂–¥—ã–π —É–∑–µ–ª i –∏–º–µ–µ—Ç —Å—á—ë—Ç—á–∏–∫ LC_i. –ü—Ä–∞–≤–∏–ª–∞:

1. **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ**: –ö–æ–≥–¥–∞ –Ω–∞ —É–∑–ª–µ i –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–æ–±—ã—Ç–∏–µ, LC_i —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 1
2. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è**: –ö–æ–≥–¥–∞ —É–∑–µ–ª i –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –æ–Ω –≤–∫–ª—é—á–∞–µ—Ç –≤ –Ω–µ–≥–æ —Å–≤–æ–π —Ç–µ–∫—É—â–∏–π LC_i
3. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è**: –ö–æ–≥–¥–∞ —É–∑–µ–ª j –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å LC_sender, –æ–Ω —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç LC_j = max(LC_j, LC_sender) + 1

**–ì–∞—Ä–∞–Ω—Ç–∏—è**: –ï—Å–ª–∏ —Å–æ–±—ã—Ç–∏–µ A ‚Üí B (A happens-before B), —Ç–æ LC(A) < LC(B).

**–ù–æ**: –û–±—Ä–∞—Ç–Ω–æ–µ –Ω–µ–≤–µ—Ä–Ω–æ! –ï—Å–ª–∏ LC(A) < LC(B), —ç—Ç–æ **–Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç**, —á—Ç–æ A ‚Üí B. –°–æ–±—ã—Ç–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å concurrent.

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

```
–£–∑–µ–ª A:  Event1[LC=1] --msg--> Event3[LC=3]
                                    |
–£–∑–µ–ª B:  Event2[LC=1] <--msg--  Event4[LC=4]
```

- Event1 –Ω–∞ —É–∑–ª–µ A: LC_A = 1
- Event2 –Ω–∞ —É–∑–ª–µ B: LC_B = 1
- Event1 –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å LC=1
- Event3 –Ω–∞ —É–∑–ª–µ B –ø–æ–ª—É—á–∞–µ—Ç msg: LC_B = max(1, 1) + 1 = 2
- Event3 –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç —Å LC=2
- Event4 –Ω–∞ —É–∑–ª–µ A –ø–æ–ª—É—á–∞–µ—Ç msg: LC_A = max(1, 2) + 1 = 3

–¢–µ–ø–µ—Ä—å Event1[LC=1] –∏ Event2[LC=1] –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π timestamp, —Ö–æ—Ç—è –æ–Ω–∏ concurrent!

### –ü—Ä–æ–±–ª–µ–º–∞ Lamport clocks

Lamport clocks **–Ω–µ –º–æ–≥—É—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å**. –ï—Å–ª–∏ LC(A) < LC(B), –º—ã –Ω–µ –∑–Ω–∞–µ–º:
- A ‚Üí B (A –ø—Ä–∏—á–∏–Ω–Ω–æ –ø—Ä–µ–¥—à–µ—Å—Ç–≤—É–µ—Ç B)?
- –ò–ª–∏ –æ–Ω–∏ concurrent, –ø—Ä–æ—Å—Ç–æ —Å—á—ë—Ç—á–∏–∫ —É A –æ–∫–∞–∑–∞–ª—Å—è –º–µ–Ω—å—à–µ?

–î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω—ã –±–æ–ª–µ–µ –º–æ—â–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã ‚Äî Vector Clocks.

### –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

**–†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –ª–æ–≥–∏ –∏ —Ç—Ä–µ–π—Å–∏–Ω–≥**:
–•–æ—Ç—è –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã, –∏–¥–µ—è Lamport clocks –ª–µ–∂–∏—Ç –≤ –æ—Å–Ω–æ–≤–µ —Å–∏—Å—Ç–µ–º —Ç—Ä–µ–π—Å–∏–Ω–≥–∞ –≤—Ä–æ–¥–µ OpenTelemetry. Trace ID –∏ Span ID –ø–æ–º–æ–≥–∞—é—Ç —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è —á–µ—Ä–µ–∑ –≥—Ä–∞–Ω–∏—Ü—ã —Å–µ—Ä–≤–∏—Å–æ–≤.

**–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è conflict-free –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**:
–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–æ–º–±–∏–Ω–∞—Ü–∏—é Lamport clock + node ID –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö, —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã—Ö ID (–Ω–∞–ø—Ä–∏–º–µ—Ä, Snowflake ID –≤ Twitter).

**–ü—Ä–∏–º–µ—Ä**: Snowflake ID (64 –±–∏—Ç–∞):
- 41 –±–∏—Ç: timestamp (milliseconds since epoch) ‚Äî —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è
- 10 –±–∏—Ç: machine/datacenter ID
- 12 –±–∏—Ç: sequence number (—Å—á—ë—Ç—á–∏–∫ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ç–æ–π –∂–µ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)

–≠—Ç–æ –¥–∞—ë—Ç:
- –ì–ª–æ–±–∞–ª—å–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ ID
- –ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- –í—ã—Å–æ–∫—É—é throughput (4096 ID –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—É –Ω–∞ —É–∑–µ–ª)

**–ò–Ω—Ü–∏–¥–µ–Ω—Ç**:

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ Snowflake ID, —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å –ø—Ä–æ–±–ª–µ–º–æ–π, –∫–æ–≥–¥–∞ –≤—Ä–µ–º—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ "–ø—Ä—ã–≥–Ω—É–ª–æ –Ω–∞–∑–∞–¥" –ø–æ—Å–ª–µ NTP sync. –≠—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ID, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ **–º–µ–Ω—å—à–µ** —É–∂–µ –≤—ã–¥–∞–Ω–Ω—ã—Ö ID. –ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å ID, —ç—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –±–∞–≥–∏:
- –ù–∞—Ä—É—à–µ–Ω–∏–µ PRIMARY KEY constraints (–µ—Å–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã —Å—Ç—Ä–æ–≥–æ)
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ –≤ —Å–∏—Å—Ç–µ–º–∞—Ö, —Å–æ—Ä—Ç–∏—Ä—É—é—â–∏—Ö –ø–æ ID

**–†–µ—à–µ–Ω–∏–µ**: –õ–∏–±–æ —Ö—Ä–∞–Ω–∏—Ç—å "–ø–æ—Å–ª–µ–¥–Ω–∏–π –≤—ã–¥–∞–Ω–Ω—ã–π timestamp" –∏ –æ—Ç–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –≤—ã–¥–∞–≤–∞—Ç—å ID, –µ—Å–ª–∏ —á–∞—Å—ã –ø–æ—à–ª–∏ –Ω–∞–∑–∞–¥, –ª–∏–±–æ "–∂–¥–∞—Ç—å", –ø–æ–∫–∞ –≤—Ä–µ–º—è –Ω–µ –¥–æ–≥–æ–Ω–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤—ã–¥–∞–Ω–Ω—ã–π timestamp.

---

## Vector Clocks (–í–µ–∫—Ç–æ—Ä–Ω—ã–µ —á–∞—Å—ã)

### –ß—Ç–æ —ç—Ç–æ

Vector Clock (–≤–µ–∫—Ç–æ—Ä–Ω—ã–µ —á–∞—Å—ã) ‚Äî —ç—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ Lamport clocks, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç **–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å** —Å–æ–±—ã—Ç–∏–π. –í–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ —Å—á—ë—Ç—á–∏–∫–∞ –∫–∞–∂–¥—ã–π —É–∑–µ–ª —Ö—Ä–∞–Ω–∏—Ç **–≤–µ–∫—Ç–æ—Ä** —Å—á—ë—Ç—á–∏–∫–æ–≤ ‚Äî –ø–æ –æ–¥–Ω–æ–º—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞ –≤ —Å–∏—Å—Ç–µ–º–µ.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ï—Å–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ N —É–∑–ª–æ–≤, –∫–∞–∂–¥—ã–π —É–∑–µ–ª i —Ö—Ä–∞–Ω–∏—Ç –≤–µ–∫—Ç–æ—Ä VC_i = [VC_i[1], VC_i[2], ..., VC_i[N]].

–ü—Ä–∞–≤–∏–ª–∞:

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: VC_i[j] = 0 –¥–ª—è –≤—Å–µ—Ö j
2. **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ**: VC_i[i]++ (—É–∑–µ–ª —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç)
3. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è**: –£–∑–µ–ª i –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–º–µ—Å—Ç–µ —Å VC_i
4. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è**: –£–∑–µ–ª j –ø–æ–ª—É—á–∞–µ—Ç msg —Å VC_sender:
   - –î–ª—è –≤—Å–µ—Ö k: VC_j[k] = max(VC_j[k], VC_sender[k])
   - VC_j[j]++

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤

–î–ª—è –≤–µ–∫—Ç–æ—Ä–æ–≤ VC_A –∏ VC_B:

- **VC_A < VC_B** (A –ø—Ä–æ–∏–∑–æ—à–ª–æ –¥–æ B), –µ—Å–ª–∏:
  - –î–ª—è –≤—Å–µ—Ö i: VC_A[i] ‚â§ VC_B[i]
  - –°—É—â–µ—Å—Ç–≤—É–µ—Ç —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ j: VC_A[j] < VC_B[j]

- **VC_A || VC_B** (A –∏ B –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã), –µ—Å–ª–∏:
  - –°—É—â–µ—Å—Ç–≤—É–µ—Ç i: VC_A[i] < VC_B[i]
  - –ò —Å—É—â–µ—Å—Ç–≤—É–µ—Ç j: VC_A[j] > VC_B[j]

üí° **–ö–ª—é—á–µ–≤–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ**: Vector clocks –ø–æ–∑–≤–æ–ª—è—é—Ç **—Ç–æ—á–Ω–æ** –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —è–≤–ª—è—é—Ç—Å—è –ª–∏ –¥–≤–∞ —Å–æ–±—ã—Ç–∏—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–º–∏.

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

```
–£–∑–µ–ª A: [1,0,0] -> [2,0,0] ---msg[2,0,0]---> [3,3,0]
                                                  |
–£–∑–µ–ª B: [0,1,0] -> [0,2,0] <--msg[3,3,0]--- [0,3,0]
                       |
–£–∑–µ–ª C: [0,0,1]    [0,2,1] (–ø–æ–ª—É—á–∏–ª –æ—Ç B)
```

- Event –Ω–∞ A: [1,0,0] –∏ Event –Ω–∞ B: [0,1,0] ‚Äî **concurrent** (–Ω–µ –æ–¥–∏–Ω –≤–µ–∫—Ç–æ—Ä –Ω–µ < –¥—Ä—É–≥–æ–≥–æ)
- Event [2,0,0] –Ω–∞ A –∏ Event [0,3,0] –Ω–∞ B ‚Äî **concurrent**
- Event [3,3,0] –Ω–∞ A **–ø—Ä–æ–∏–∑–æ—à–ª–æ –ø–æ—Å–ª–µ** [0,2,0] –Ω–∞ B (–ø–æ—Ç–æ–º—É —á—Ç–æ [0,2,0] < [3,3,0])

### –ü—Ä–æ–±–ª–µ–º—ã Vector Clocks

**–†–∞–∑–º–µ—Ä**: –ï—Å–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ N —É–∑–ª–æ–≤, –∫–∞–∂–¥—ã–π –≤–µ–∫—Ç–æ—Ä –∏–º–µ–µ—Ç —Ä–∞–∑–º–µ—Ä O(N). –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–æ–π –¥–ª—è —Å–∏—Å—Ç–µ–º —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —É–∑–ª–æ–≤:
- –í —Å–∏—Å—Ç–µ–º–µ —Å 1000 —É–∑–ª–∞–º–∏ –∫–∞–∂–¥—ã–π timestamp ‚Äî —ç—Ç–æ 1000 —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª
- –ï—Å–ª–∏ —É–∑–ª—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è/—É–¥–∞–ª—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞–º–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–æ–∂–Ω—ã–º

**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏ —Å–ª–æ–∂–Ω–µ–µ, —á–µ–º —Å –æ–±—ã—á–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏.

### –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

**Riak (Key-Value –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)**:

Riak –∏—Å–ø–æ–ª—å–∑—É–µ—Ç vector clocks –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏. –ö–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ:
- –û–Ω –ø–æ–ª—É—á–∞–µ—Ç vector clock –≤–º–µ—Å—Ç–µ —Å –¥–∞–Ω–Ω—ã–º–∏
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –æ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç vector clock –æ–±—Ä–∞—Ç–Ω–æ
- Riak –º–æ–∂–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å:
  - **Superseding** (–∑–∞–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ä—É—é) ‚Äî –µ—Å–ª–∏ –Ω–æ–≤—ã–π VC > —Å—Ç–∞—Ä–æ–≥–æ VC
  - **Concurrent** (–∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç) ‚Äî –µ—Å–ª–∏ –≤–µ–∫—Ç–æ—Ä—ã –Ω–µ—Å–æ–ø–æ—Å—Ç–∞–≤–∏–º—ã

–ï—Å–ª–∏ –∑–∞–ø–∏—Å–∏ concurrent, Riak —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç **–æ–±–µ –≤–µ—Ä—Å–∏–∏** (siblings), –∏ –∫–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç.

**–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –≤ Riak**:

1. –ö–ª–∏–µ–Ω—Ç A —á–∏—Ç–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ "balance: 100" —Å vector clock [1,0,0]
2. –ö–ª–∏–µ–Ω—Ç B —á–∏—Ç–∞–µ—Ç —Ç–æ –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å [1,0,0]
3. –ö–ª–∏–µ–Ω—Ç A –ø–∏—à–µ—Ç "balance: 90" (—Å–Ω—è–ª 10), –æ—Ç–ø—Ä–∞–≤–ª—è—è [1,0,0] ‚Üí —Å–∏—Å—Ç–µ–º–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç [2,0,0]
4. –ö–ª–∏–µ–Ω—Ç B –ø–∏—à–µ—Ç "balance: 120" (–ø–æ–ª–æ–∂–∏–ª 20), –æ—Ç–ø—Ä–∞–≤–ª—è—è [1,0,0] ‚Üí —Å–∏—Å—Ç–µ–º–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç [1,1,0]
5. –¢–µ–ø–µ—Ä—å –µ—Å—Ç—å –¥–≤–∞ –∑–Ω–∞—á–µ–Ω–∏—è: "90" [2,0,0] –∏ "120" [1,1,0]
6. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —á—Ç–µ–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç **–æ–±–∞** –∑–Ω–∞—á–µ–Ω–∏—è –∫–∞–∫ siblings ‚Äî –æ–Ω–∏ concurrent!

–ö–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–±—Ä–∞—Ç—å –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ –∫–∞–∫-—Ç–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å).

**–ü—Ä–æ–±–ª–µ–º–∞**: –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç—ã –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç vector clock –æ–±—Ä–∞—Ç–Ω–æ (–∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–π), —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º—É —Ä–æ—Å—Ç—É —á–∏—Å–ª–∞ siblings –∏ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

**Cassandra** (—Ä–∞–Ω—å—à–µ):
–°—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ Cassandra –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ vector clocks –¥–ª—è conflict resolution, –Ω–æ –ø–æ–∑–∂–µ –ø–µ—Ä–µ—à–ª–∏ –Ω–∞ Last-Write-Wins (LWW) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º timestamp'–æ–≤, –ø–æ—Ç–æ–º—É —á—Ç–æ:
- Vector clocks —Ä–æ—Å–ª–∏ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–º–∏
- –ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏ siblings
- LWW –ø—Ä–æ—â–µ, —Ö–æ—Ç—è –∏ —Ç–µ—Ä—è–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö

**Voldemort** (LinkedIn):
Voldemort (Key-Value —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –æ—Ç LinkedIn) —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç vector clocks –¥–ª—è versioning, –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å Riak.

---

## Hybrid Logical Clocks (HLC) (–ì–∏–±—Ä–∏–¥–Ω—ã–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —á–∞—Å—ã)

### –ß—Ç–æ —ç—Ç–æ

Hybrid Logical Clock (HLC) ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –∫–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –∏ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –û–Ω –±—ã–ª –ø—Ä–µ–¥–ª–æ–∂–µ–Ω –≤ 2014 –≥–æ–¥—É –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ vector clocks —Å –º–µ–Ω—å—à–∏–º–∏ –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ —Ä–∞—Å—Ö–æ–¥–∞–º–∏.

HLC –¥–∞—ë—Ç:
- **–õ–æ–≥–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è**: –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç happens-before ordering
- **–§–∏–∑–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è**: Timestamp –±–ª–∏–∑–æ–∫ –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É wall clock time, —á—Ç–æ —É–¥–æ–±–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

HLC —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
- **pt** (physical time): –§–∏–∑–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è —Å –ª–æ–∫–∞–ª—å–Ω—ã—Ö —á–∞—Å–æ–≤
- **lc** (logical counter): –õ–æ–≥–∏—á–µ—Å–∫–∏–π —Å—á—ë—Ç—á–∏–∫ –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è –∏–¥—ë—Ç –Ω–∞–∑–∞–¥ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏–π –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç "–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ"

Timestamp = (pt, lc)

–ü—Ä–∞–≤–∏–ª–∞:

1. **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ**:
   - pt' = —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è —Å–µ–π—á–∞—Å
   - –ï—Å–ª–∏ pt' > pt: HLC = (pt', 0)
   - –ï—Å–ª–∏ pt' ‚â§ pt: HLC = (pt, lc + 1)

2. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è**: –í–∫–ª—é—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π HLC –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ

3. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è** —Å HLC_msg = (pt_msg, lc_msg):
   - pt' = —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è —Å–µ–π—á–∞—Å
   - pt'' = max(pt', pt_msg, pt)
   - –ï—Å–ª–∏ pt'' = pt' = pt_msg: lc' = max(lc, lc_msg) + 1
   - –ï—Å–ª–∏ pt'' = pt' > pt_msg: lc' = lc + 1
   - –ï—Å–ª–∏ pt'' = pt_msg > pt': lc' = lc_msg + 1
   - HLC = (pt'', lc')

üí° **–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è**: HLC "—Å—Ç–∞—Ä–∞–µ—Ç—Å—è" –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è, –Ω–æ –µ—Å–ª–∏ —á–∞—Å—ã –∏–¥—É—Ç –Ω–∞–∑–∞–¥ –∏–ª–∏ –µ—Å—Ç—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è, –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—á—ë—Ç—á–∏–∫ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç–∏.

### –°–≤–æ–π—Å—Ç–≤–∞ HLC

**–ì–∞—Ä–∞–Ω—Ç–∏–∏**:
- ‚úÖ –ï—Å–ª–∏ A ‚Üí B, —Ç–æ HLC(A) < HLC(B) (–ª–µ–∫—Å–∏–∫–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ)
- ‚úÖ HLC –±–ª–∏–∑–æ–∫ –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö clock skew)
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞–Ω–∏—è –æ –≤—Å–µ—Ö —É–∑–ª–∞—Ö –≤ —Å–∏—Å—Ç–µ–º–µ (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç vector clocks)
- ‚úÖ –†–∞–∑–º–µ—Ä timestamp'–∞ –ø–æ—Å—Ç–æ—è–Ω–µ–Ω: O(1) (–¥–≤–∞ —á–∏—Å–ª–∞), –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —á–∏—Å–ª–∞ —É–∑–ª–æ–≤

**–ù–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç**:
- ‚ùå –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ç–∞–∫ –∂–µ —Ç–æ—á–Ω–æ, –∫–∞–∫ vector clocks
- ‚ùå –°—Ç—Ä–æ–≥–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ (lc –º–æ–∂–µ—Ç "—Å–¥–≤–∏–Ω—É—Ç—å" timestamp –≤–ø–µ—Ä—ë–¥)

### –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

**CockroachDB**:

CockroachDB –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HLC –¥–ª—è:
- **MVCC timestamps**: –ö–∞–∂–¥–∞—è –≤–µ—Ä—Å–∏—è —Å—Ç—Ä–æ–∫–∏ –∏–º–µ–µ—Ç HLC timestamp
- **Transaction ordering**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **External consistency**: –ì–∞—Ä–∞–Ω—Ç–∏–∏ –ª–∏–Ω–µ–∞—Ä–∏–∑—É–µ–º–æ—Å—Ç–∏

CockroachDB —Ç–∞–∫–∂–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç **max clock offset** (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —á–∞—Å–æ–≤ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏). –ï—Å–ª–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ø–æ—Ä–æ–≥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 500 –º—Å), —É–∑–µ–ª **–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è**, —á—Ç–æ–±—ã –Ω–µ –Ω–∞—Ä—É—à–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å.

**–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã –≤ CockroachDB**:

1. –ö–ª–∏–µ–Ω—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é T1 –Ω–∞ —É–∑–ª–µ A –≤ HLC = (1000, 0)
2. T1 —á–∏—Ç–∞–µ—Ç —Å—Ç—Ä–æ–∫—É X
3. –ö–ª–∏–µ–Ω—Ç –∑–∞—Ç–µ–º –Ω–∞—á–∏–Ω–∞–µ—Ç T2 –Ω–∞ —É–∑–ª–µ B –≤ HLC = (999, 0) (—á–∞—Å—ã B –æ—Ç—Å—Ç–∞—é—Ç)
4. –£–∑–µ–ª B –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç A –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç —Å–≤–æ–π HLC –Ω–∞ (1000, 1)
5. T2 –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å X ‚Äî –≤–∏–¥–∏—Ç, —á—Ç–æ X –±—ã–ª –ø—Ä–æ—á–∏—Ç–∞–Ω –≤ (1000, 0), –ø–æ—ç—Ç–æ–º—É T2 –ø–æ–ª—É—á–∞–µ—Ç timestamp (1001, 0) –∏–ª–∏ –ø–æ–∑–∂–µ

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –¥–∞–∂–µ –µ—Å–ª–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —á–∞—Å—ã —Ä–∞—Å—Ö–æ–¥—è—Ç—Å—è, HLC –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.

**–ò–Ω—Ü–∏–¥–µ–Ω—Ç**:

–í –æ–¥–Ω–æ–º –∏–∑ —Ä–∞–Ω–Ω–∏—Ö —Ä–µ–ª–∏–∑–æ–≤ CockroachDB –±—ã–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞, –∫–æ–≥–¥–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–ª—É—á–∞–π–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞ –æ–¥–Ω–æ–º —É–∑–ª–µ (–Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ –≤–ø–µ—Ä—ë–¥). –≠—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ —Ç–æ–º—É, —á—Ç–æ:
- HLC –Ω–∞ —ç—Ç–æ–º —É–∑–ª–µ "–ø—Ä—ã–≥–Ω—É–ª" –≤–ø–µ—Ä—ë–¥
- –í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–∞ –¥—Ä—É–≥–∏—Ö —É–∑–ª–∞—Ö –Ω–∞—á–∞–ª–∏ –ø–æ–ª—É—á–∞—Ç—å timestamp'—ã –≤ –±—É–¥—É—â–µ–º
- –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–ª–∞, –Ω–æ timestamp'—ã —Å—Ç–∞–ª–∏ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —É–∑–µ–ª –±—ã–ª –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω, –∏ —Å–∏—Å—Ç–µ–º–∞ –≤–µ—Ä–Ω—É–ª–∞—Å—å –∫ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é. –≠—Ç–æ—Ç –∏–Ω—Ü–∏–¥–µ–Ω—Ç –ø—Ä–∏–≤—ë–ª –∫ —É–ª—É—á—à–µ–Ω–∏—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ clock skew.

**MongoDB (—Å –≤–µ—Ä—Å–∏–∏ 4.0+)**:

MongoDB –Ω–∞—á–∞–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —á–∞—Å—ã (–±–ª–∏–∑–∫–∏–µ –∫ HLC) –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ **causal consistency** –≤ —Å–µ—Å—Å–∏—è—Ö:
- –ö–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç cluster time (–∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ —Å—á—ë—Ç—á–∏–∫–∞)
- –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç timestamp –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—è, —á—Ç–æ –æ–Ω–∏ "–≤–∏–¥—è—Ç" –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–∞–ø–∏—Å–∏

**YugabyteDB**:

YugabyteDB (—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è SQL –±–∞–∑–∞) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HLC –ø–æ—Ö–æ–∂–∏–º –æ–±—Ä–∞–∑–æ–º –Ω–∞ CockroachDB –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è ACID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –≤–Ω–µ—à–Ω–µ–π —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏.

---

## External Consistency (–í–Ω–µ—à–Ω—è—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å)

### –ß—Ç–æ —ç—Ç–æ

External Consistency (–≤–Ω–µ—à–Ω—è—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å, —Ç–∞–∫–∂–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è linearizability –∏–ª–∏ strict serializability) ‚Äî —ç—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—è, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –≤–µ–¥—ë—Ç —Å–µ–±—è —Ç–∞–∫, –∫–∞–∫ –±—É–¥—Ç–æ –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ** –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É –Ω–∞—á–∞–ª–æ–º –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –æ–ø–µ—Ä–∞—Ü–∏–∏, –∏ —ç—Ç–æ—Ç –ø–æ—Ä—è–¥–æ–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç **—Ä–µ–∞–ª—å–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏**.

üí° **–§–æ—Ä–º–∞–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**: –ï—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—è A –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –¥–æ –Ω–∞—á–∞–ª–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ B –ø–æ —Ä–µ–∞–ª—å–Ω–æ–º—É (wall clock) –≤—Ä–µ–º–µ–Ω–∏, —Ç–æ —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –≤–µ—Å—Ç–∏ —Å–µ–±—è —Ç–∞–∫, –±—É–¥—Ç–æ A –ø—Ä–æ–∏–∑–æ—à–ª–∞ –¥–æ B.

**–ì–∞—Ä–∞–Ω—Ç–∏–∏**:
- ‚úÖ –ö–ª–∏–µ–Ω—Ç, –≤—ã–ø–æ–ª–Ω–∏–≤—à–∏–π –∑–∞–ø–∏—Å—å, —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç –µ—ë –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —á—Ç–µ–Ω–∏–∏
- ‚úÖ –í—Å–µ –∫–ª–∏–µ–Ω—Ç—ã –≤–∏–¥—è—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –ø–æ—Ä—è–¥–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ü–æ—Ä—è–¥–æ–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ (–∫–∞–∫ –µ–≥–æ –Ω–∞–±–ª—é–¥–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–π –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å)

**–ù–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç**:
- ‚ùå –í—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—á–∞—Å—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è)
- ‚ùå –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—Ä–∏ network partitions (CAP —Ç–µ–æ—Ä–µ–º–∞)

### –û—Ç–ª–∏—á–∏–µ –æ—Ç –¥—Ä—É–≥–∏—Ö consistency –º–æ–¥–µ–ª–µ–π

- **Sequential Consistency**: –í—Å–µ –≤–∏–¥—è—Ç –æ–¥–∏–Ω –ø–æ—Ä—è–¥–æ–∫, –Ω–æ —ç—Ç–æ—Ç –ø–æ—Ä—è–¥–æ–∫ –º–æ–∂–µ—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏
- **Causal Consistency**: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏—á–∏–Ω–Ω–æ-—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫, –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å—Å—è –≤ —Ä–∞–∑–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
- **External Consistency**: –°–∞–º–∞—è —Å—Ç—Ä–æ–≥–∞—è ‚Äî –ø–æ—Ä—è–¥–æ–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏

### –ö–∞–∫ —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å

–î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è external consistency –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

1. **–ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫**: –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π timestamp
2. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏**: –ß–∞—Å—ã –Ω–∞ –≤—Å–µ—Ö —É–∑–ª–∞—Ö –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ—á–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
3. **Wait for time**: –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ "–∂–¥–∞—Ç—å", –ø–æ–∫–∞ –≤—Ä–µ–º—è –Ω–µ –ø—Ä–æ–π–¥—ë—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –Ω–∏–∫–∞–∫–∞—è –¥—Ä—É–≥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —Å –º–µ–Ω—å—à–∏–º timestamp'–æ–º –Ω–µ –º–æ–∂–µ—Ç –ø–æ—è–≤–∏—Ç—å—Å—è

### Google Spanner –∏ TrueTime

**Google Spanner** ‚Äî —ç—Ç–æ –ø–µ—Ä–≤–∞—è —Å–∏—Å—Ç–µ–º–∞, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–≤—à–∞—è external consistency –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º –º–∞—Å—à—Ç–∞–±–µ. –ö–ª—é—á–µ–≤–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è ‚Äî **TrueTime API**.

#### TrueTime API

TrueTime –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ –ø—Ä–æ—Å—Ç–æ "—Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è", –∞ **–∏–Ω—Ç–µ—Ä–≤–∞–ª –≤—Ä–µ–º–µ–Ω–∏** [earliest, latest], –≤ –∫–æ—Ç–æ—Ä–æ–º –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∏—Å—Ç–∏–Ω–Ω–æ–µ –≤—Ä–µ–º—è:

```
TT.now() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç: {earliest: 1000, latest: 1007}
```

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç: "–∏—Å—Ç–∏–Ω–Ω–æ–µ –≤—Ä–µ–º—è —Å–µ–π—á–∞—Å –≥–¥–µ-—Ç–æ –º–µ–∂–¥—É 1000 –∏ 1007".

**–ö–∞–∫ —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- GPS-–ø—Ä–∏—ë–º–Ω–∏–∫–∏ –∏ –∞—Ç–æ–º–Ω—ã–µ —á–∞—Å—ã –≤ –∫–∞–∂–¥–æ–º –¥–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä–µ
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ ~1-7 –º—Å (–æ–±—ã—á–Ω–æ)
- –ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ —É–≤–µ—Ä–µ–Ω–∞ –≤ —Ç–æ—á–Ω–æ—Å—Ç–∏, –æ–Ω–∞ —Ä–∞—Å—à–∏—Ä—è–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª

#### Commit Wait

Spanner –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **commit wait** –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è external consistency:

1. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è T –ø–æ–ª—É—á–∞–µ—Ç commit timestamp t_commit
2. Spanner **–∂–¥—ë—Ç**, –ø–æ–∫–∞ TT.now().earliest > t_commit
3. –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç commit

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ:
- –ö–æ–≥–¥–∞ T –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å, –≤—Ä–µ–º—è —Ç–æ—á–Ω–æ –ø—Ä–æ—à–ª–æ t_commit
- –õ—é–±–∞—è –ø–æ—Å–ª–µ–¥—É—é—â–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–æ–ª—É—á–∏—Ç timestamp > t_commit
- –ï—Å–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è T2 –Ω–∞—á–∞–ª–∞—Å—å –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è T1 –ø–æ —Ä–µ–∞–ª—å–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏, —Ç–æ timestamp(T2) > timestamp(T1)

**–ü—Ä–∏–º–µ—Ä**:

```
T1 –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ X=5
- T1 –ø–æ–ª—É—á–∞–µ—Ç t_commit = 1000
- TT.now() = [999, 1003]
- Spanner –∂–¥—ë—Ç, –ø–æ–∫–∞ TT.now().earliest > 1000
- –í –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ TT.now() = [1001, 1005], commit –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è
- T1 –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è

T2 —á–∏—Ç–∞–µ—Ç X (–Ω–∞—á–∞–ª–∞—Å—å –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è T1)
- T2 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç timestamp t_read >= 1001
- T2 –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –≤–∏–¥–∏—Ç X=5
```

**–¶–µ–Ω–∞**: Commit wait –¥–æ–±–∞–≤–ª—è–µ—Ç latency (–æ–±—ã—á–Ω–æ ~5-10 –º—Å) –∫ –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

### –ë–µ–∑ TrueTime

–î—Ä—É–≥–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø—ã—Ç–∞—é—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å external consistency –±–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è:

**CockroachDB**:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç HLC + bounded clock skew (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–∏ —á–∞—Å–æ–≤)
- "Uncertainty interval": –ï—Å–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥–ª–∏ –±—ã—Ç—å –∑–∞–ø–∏—Å–∞–Ω—ã –≤ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–µ, –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è
- –ï—Å–ª–∏ clock skew –ø—Ä–µ–≤—ã—à–∞–µ—Ç –º–∞–∫—Å–∏–º—É–º, —É–∑–µ–ª –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

**YugabyteDB**:
- –ü–æ—Ö–æ–∂–∏–π –ø–æ–¥—Ö–æ–¥ —Å HLC

### –ò–Ω—Ü–∏–¥–µ–Ω—Ç—ã

**–ü—Ä–∏–º–µ—Ä –∏–∑ –ø—Ä–∞–∫—Ç–∏–∫–∏** (–≤—ã–º—ã—à–ª–µ–Ω–Ω—ã–π, –Ω–æ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π):

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç external consistency, –Ω–æ –æ–¥–Ω–∞ –∏–∑ –Ω–æ–¥ –∏–º–µ–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è (–Ω–∞ 1 —Å–µ–∫—É–Ω–¥—É –≤–ø–µ—Ä—ë–¥).

1. –ö–ª–∏–µ–Ω—Ç A –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç X=1 –Ω–∞ node1 (timestamp 1000)
2. –ö–ª–∏–µ–Ω—Ç B –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç X=2 –Ω–∞ node2 (timestamp 1001, –Ω–æ —Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è = 1000)
3. –ö–ª–∏–µ–Ω—Ç C —á–∏—Ç–∞–µ—Ç X ‚Äî –≤–∏–¥–∏—Ç X=2, –ø–æ—Ç–æ–º—É —á—Ç–æ timestamp 1001 > 1000
4. –ó–∞—Ç–µ–º –∫–ª–∏–µ–Ω—Ç C —á–∏—Ç–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ timestamp 1000 ‚Äî –≤–∏–¥–∏—Ç X=1

–° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è client C, X "—Å–∫–∞–∫–Ω—É–ª" —Å 2 –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ 1! –≠—Ç–æ –Ω–∞—Ä—É—à–µ–Ω–∏–µ external consistency.

**–ö–∞–∫ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å**:

1. **–°—Ç—Ä–æ–≥–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏**: NTP –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è external consistency ‚Äî –Ω—É–∂–µ–Ω PTP (Precision Time Protocol) –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ clock skew**: –ü–æ—Å—Ç–æ—è–Ω–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —á–∞—Å–æ–≤
3. **Bounded skew**: –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π —É–∑–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ "–≤—ã–ø–∞–ª–∏" –∏–∑ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–∫–Ω–∞
4. **–ò—Å–ø–æ–ª—å–∑—É–π –≥–æ—Ç–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã**: –ï—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–Ω–∞ external consistency, –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Spanner, CockroachDB –∏–ª–∏ YugabyteDB, —á–µ–º –ø—ã—Ç–∞—Ç—å—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∞–º–æ–º—É

---

## Bounded Staleness (–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —É—Å—Ç–∞—Ä–µ–ª–æ—Å—Ç—å)

### –ß—Ç–æ —ç—Ç–æ

Bounded Staleness (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —É—Å—Ç–∞—Ä–µ–ª–æ—Å—Ç—å) ‚Äî —ç—Ç–æ consistency –º–æ–¥–µ–ª—å, –∫–æ—Ç–æ—Ä–∞—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ —É—Å—Ç–∞—Ä–µ–≤–∞—é—Ç –±–æ–ª—å—à–µ, —á–µ–º –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∏–ª–∏ –≤–µ—Ä—Å–∏–∏.

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞:

1. **Time-bounded staleness**: –î–∞–Ω–Ω—ã–µ –Ω–µ —Å—Ç–∞—Ä–µ–µ —á–µ–º T —Å–µ–∫—É–Ω–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10 —Å–µ–∫—É–Ω–¥)
2. **Version-bounded staleness**: –î–∞–Ω–Ω—ã–µ –Ω–µ —Å—Ç–∞—Ä–µ–µ —á–µ–º K –≤–µ—Ä—Å–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ –Ω–µ –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 100 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)

**–ì–∞—Ä–∞–Ω—Ç–∏–∏**:
- ‚úÖ –ß—Ç–µ–Ω–∏–µ –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ, –Ω–æ –Ω–µ –±–æ–ª–µ–µ —á–µ–º –Ω–∞ –∑–∞–¥–∞–Ω–Ω—É—é –≤–µ–ª–∏—á–∏–Ω—É
- ‚úÖ –ú–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å —Å replica –±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ master (–Ω–∏–∑–∫–∞—è latency)
- ‚úÖ –ö–ª–∏–µ–Ω—Ç –∑–Ω–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å—Ç–µ–ø–µ–Ω—å —É—Å—Ç–∞—Ä–µ–ª–æ—Å—Ç–∏

**–ù–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç**:
- ‚ùå –ß—Ç–µ–Ω–∏–µ —Å–∞–º—ã—Ö —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –ú–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å —á—Ç–µ–Ω–∏–π (–º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –≤–µ—Ä—Å–∏—é N, –∑–∞—Ç–µ–º N-5, –µ—Å–ª–∏ —á–∏—Ç–∞—Ç—å —Å —Ä–∞–∑–Ω—ã—Ö —Ä–µ–ø–ª–∏–∫)

### –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ

Bounded staleness ‚Äî —ç—Ç–æ **–∫–æ–º–ø—Ä–æ–º–∏—Å—Å** –º–µ–∂–¥—É:
- **Strong consistency** (–≤—Å–µ–≥–¥–∞ —á–∏—Ç–∞—Ç—å —Å–∞–º—ã–µ —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–æ –∏ –¥–æ—Ä–æ–≥–æ)
- **Eventual consistency** (–±—ã—Å—Ç—Ä–æ, –Ω–æ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ, –Ω–∞—Å–∫–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ —É—Å—Ç–∞—Ä–µ–ª–∏)

–ú–Ω–æ–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–≥—É—Ç –∂–∏—Ç—å —Å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –µ—Å–ª–∏ —É—Å—Ç–∞—Ä–µ–ª–æ—Å—Ç—å –∏–∑–≤–µ—Å—Ç–Ω–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞.

**–ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤**:

1. **–î–∞—à–±–æ—Ä–¥ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏**: –ï—Å–ª–∏ –º–µ—Ç—Ä–∏–∫–∏ –æ—Ç—Å—Ç–∞—é—Ç –Ω–∞ 30 —Å–µ–∫—É–Ω–¥, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
2. **–õ–µ–Ω—Ç–∞ –Ω–æ–≤–æ—Å—Ç–µ–π**: –ï—Å–ª–∏ –ø–æ—Å—Ç –ø–æ—è–≤–∏—Ç—Å—è —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥, —ç—Ç–æ –ø—Ä–∏–µ–º–ª–µ–º–æ
3. **–ü–æ–∏—Å–∫–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å**: –ï—Å–ª–∏ –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ—è–≤–∏—Ç—Å—è –≤ –ø–æ–∏—Å–∫–µ —á–µ—Ä–µ–∑ –º–∏–Ω—É—Ç—É, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ

### –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

**Google Cloud Spanner**:

Spanner –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π staleness –¥–ª—è —á—Ç–µ–Ω–∏–π:
- **Strong read**: –ß–∏—Ç–∞—Ç—å —Å–∞–º—ã–µ —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ (–≤—ã—Å–æ–∫–∞—è latency)
- **Exact staleness**: –ß–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Ç–æ—á–Ω–æ–º timestamp –≤ –ø—Ä–æ—à–ª–æ–º
- **Bounded staleness**: –ß–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å—Ç–∞—Ä–µ–µ —á–µ–º T —Å–µ–∫—É–Ω–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10 —Å–µ–∫—É–Ω–¥)

Bounded staleness –ø–æ–∑–≤–æ–ª—è–µ—Ç —á–∏—Ç–∞—Ç—å —Å –±–ª–∏–∂–∞–π—à–µ–π —Ä–µ–ø–ª–∏–∫–∏, —á—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç latency –¥–ª—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.

**Azure Cosmos DB**:

Cosmos DB –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç bounded staleness –∫–∞–∫ –æ–¥–∏–Ω –∏–∑ –ø—è—Ç–∏ —É—Ä–æ–≤–Ω–µ–π consistency:
- –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å: "staleness ‚â§ K –≤–µ—Ä—Å–∏–π" –∏–ª–∏ "staleness ‚â§ T —Å–µ–∫—É–Ω–¥"
- –°–∏—Å—Ç–µ–º–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —á—Ç–µ–Ω–∏–µ –Ω–µ –≤–µ—Ä–Ω—ë—Ç –¥–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ä–µ–µ —ç—Ç–æ–≥–æ –ø–æ—Ä–æ–≥–∞

**MongoDB**:

MongoDB –ø–æ–∑–≤–æ–ª—è–µ—Ç —á–∏—Ç–∞—Ç—å —Å secondary nodes —Å **read concern "local"**:
- –î–∞–Ω–Ω—ã–µ –Ω–∞ secondary –º–æ–≥—É—Ç –æ—Ç—Å—Ç–∞–≤–∞—Ç—å –æ—Ç primary
- –û—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ –æ–±—ã—á–Ω–æ —Å–µ–∫—É–Ω–¥—ã, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ
- –ù–µ—Ç –∂—ë—Å—Ç–∫–æ–π –≥–∞—Ä–∞–Ω—Ç–∏–∏ –Ω–∞ staleness

–î–ª—è bounded staleness –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- **Read concern "majority"** + **maxStalenessSeconds**: –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤—ã —á–∏—Ç–∞–µ—Ç–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ–º, –∏ –Ω–µ —Å—Ç–∞—Ä–µ–µ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

**–ü—Ä–∏–º–µ—Ä**:

```
–ù–∞—Å—Ç—Ä–æ–π–∫–∞: maxStalenessSeconds = 120 (2 –º–∏–Ω—É—Ç—ã)

- Primary –∑–∞–ø–∏—Å–∞–ª –¥–æ–∫—É–º–µ–Ω—Ç –≤ 12:00:00
- Secondary1 –ø—Ä–∏–º–µ–Ω–∏–ª –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ 12:00:05
- Secondary2 –ø—Ä–∏–º–µ–Ω–∏–ª –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ 12:00:10

–ö–ª–∏–µ–Ω—Ç —á–∏—Ç–∞–µ—Ç –≤ 12:00:30 —Å maxStalenessSeconds=120:
- –ú–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å —Å Primary (–¥–∞–Ω–Ω—ã–µ —Å–≤–µ–∂–∏–µ)
- –ú–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å —Å Secondary1 (–æ—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ 25 —Å–µ–∫ < 120)
- –ú–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å —Å Secondary2 (–æ—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ 20 —Å–µ–∫ < 120)

–ö–ª–∏–µ–Ω—Ç —á–∏—Ç–∞–µ—Ç –≤ 12:03:00:
- –ï—Å–ª–∏ Secondary2 –≤—Å—ë –µ—â—ë –Ω–∞ –≤–µ—Ä—Å–∏–∏ 12:00:10 (–æ—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ 2:50 > 2:00), —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –≤–µ—Ä–Ω—ë—Ç –¥–∞–Ω–Ω—ã–µ —Å —ç—Ç–æ–≥–æ secondary
```

**RabbitMQ (Quorum Queues)**:

RabbitMQ quorum queues (–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ Raft) –º–æ–≥—É—Ç –∏–º–µ—Ç—å consumer staleness:
- –ï—Å–ª–∏ consumer —á–∏—Ç–∞–µ—Ç —Å follower –Ω–æ–¥—ã, –æ–Ω –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –≤ —Å–∞–º–æ–º —Å–≤–µ–∂–µ–º –ø–æ—Ä—è–¥–∫–µ
- –ù–æ –æ—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ –æ–±—ã—á–Ω–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)

### –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å

1. **Track replication lag**: –ö–∞–∂–¥–∞—è replica –¥–æ–ª–∂–Ω–∞ –∑–Ω–∞—Ç—å, –Ω–∞—Å–∫–æ–ª—å–∫–æ –æ–Ω–∞ –æ—Ç—Å—Ç–∞—ë—Ç –æ—Ç master'–∞
   - –í PostgreSQL: `pg_stat_replication` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `replay_lag`
   - –í MongoDB: `rs.status()` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `optimeDate` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–ª–µ–Ω–∞

2. **Reject stale reads**: –ï—Å–ª–∏ replica –æ—Ç—Å—Ç–∞—ë—Ç –±–æ–ª—å—à–µ –ø–æ—Ä–æ–≥–∞, –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –±–æ–ª–µ–µ —Å–≤–µ–∂—É—é —Ä–µ–ø–ª–∏–∫—É

3. **Timestamp-based reads**: –ö–ª–∏–µ–Ω—Ç —É–∫–∞–∑—ã–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π staleness timestamp, replica –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ –æ–Ω–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é

### –ü—Ä–æ–±–ª–µ–º—ã

**–ß–∞—Å—ã –Ω–∞ —Ä–µ–ø–ª–∏–∫–∞—Ö**:
–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è staleness, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —á—Ç–æ–±—ã —á–∞—Å—ã –Ω–∞ master –∏ replicas –±—ã–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã. –ò–Ω–∞—á–µ:
- Replica –¥—É–º–∞–µ—Ç, —á—Ç–æ –æ–Ω–∞ –æ—Ç—Å—Ç–∞—ë—Ç –Ω–∞ 10 —Å–µ–∫—É–Ω–¥, —Ö–æ—Ç—è –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–∞ 20
- –ò–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç, —Å—á–∏—Ç–∞–µ—Ç —Å–µ–±—è —Å–≤–µ–∂–µ–π, —Ö–æ—Ç—è —Å–∏–ª—å–Ω–æ –æ—Ç—Å—Ç–∞—ë—Ç

**Network lag**:
–î–∞–∂–µ –µ—Å–ª–∏ replica "—Å–≤–µ–∂–∞—è", —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç master –º–æ–≥–ª–æ –∑–∞–¥–µ—Ä–∂–∞—Ç—å—Å—è –≤ —Å–µ—Ç–∏. –ì–∞—Ä–∞–Ω—Ç–∏—è staleness ‚Äî —ç—Ç–æ –≤ –ª—É—á—à–µ–º —Å–ª—É—á–∞–µ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞.

**–ò–Ω—Ü–∏–¥–µ–Ω—Ç**:

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç MongoDB —Å `maxStalenessSeconds=60`. –û–¥–∏–Ω –∏–∑ secondary —É–∑–ª–æ–≤ –Ω–∞—á–∞–ª –æ—Ç—Å—Ç–∞–≤–∞—Ç—å –∏–∑-–∑–∞ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –¥–∏—Å–∫–∞:
- –†–µ–∞–ª—å–Ω–æ–µ –æ—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ –¥–æ—Å—Ç–∏–≥–ª–æ 5 –º–∏–Ω—É—Ç
- –ù–æ –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —ç—Ç–æ –Ω–µ –±—ã–ª–æ –∑–∞–º–µ—á–µ–Ω–æ
- –ö–ª–∏–µ–Ω—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∏ —á–∏—Ç–∞—Ç—å —Å —ç—Ç–æ–≥–æ secondary
- –û–Ω–∏ –≤–∏–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã–µ 5-–º–∏–Ω—É—Ç–Ω–æ–π –¥–∞–≤–Ω–æ—Å—Ç–∏, —Ö–æ—Ç—è –æ–∂–∏–¥–∞–ª–∏ –º–∞–∫—Å–∏–º—É–º 1 –º–∏–Ω—É—Ç—É

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–∂–∞–ª–æ–≤–∞–ª–∏—Å—å –Ω–∞ "–∏—Å—á–µ–∑–∞—é—â–∏–µ" –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ secondary –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º–∞ –≤–µ—Ä–Ω—É–ª–∞—Å—å –∫ –Ω–æ—Ä–º–µ.

---

## Clock Skew Assumptions (–ü—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è –æ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–∏ —á–∞—Å–æ–≤)

### –ß—Ç–æ —ç—Ç–æ

Clock Skew (—Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —á–∞—Å–æ–≤) ‚Äî —ç—Ç–æ —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –ø–æ–∫–∞–∑–∞–Ω–∏—è–º–∏ —á–∞—Å–æ–≤ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É–∑–ª–∞—Ö. Clock skew –Ω–µ–∏–∑–±–µ–∂–µ–Ω –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö, –∏ –º–Ω–æ–≥–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –¥–µ–ª–∞—é—Ç **–ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è** –æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º –¥–æ–ø—É—Å—Ç–∏–º–æ–º skew.

Clock Skew Assumptions (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è –æ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–∏ —á–∞—Å–æ–≤) ‚Äî —ç—Ç–æ —è–≤–Ω—ã–µ –≥–∞—Ä–∞–Ω—Ç–∏–∏ –∏–ª–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º—É —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—é —á–∞—Å–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–∞.

**–¢–∏–ø–∏—á–Ω–æ–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: "–ß–∞—Å—ã –Ω–∞ –≤—Å–µ—Ö —É–∑–ª–∞—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ Œµ" (–Ω–∞–ø—Ä–∏–º–µ—Ä, Œµ = 100 –º—Å).

### –í–∏–¥—ã clock skew

1. **Absolute skew**: –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É —á–∞—Å–∞–º–∏ –Ω–∞ –¥–≤—É—Ö —É–∑–ª–∞—Ö –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –º–æ–º–µ–Ω—Ç
   - –ü—Ä–∏–º–µ—Ä: –£–∑–µ–ª A –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 12:00:00.000, —É–∑–µ–ª B –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 12:00:00.100 ‚Üí skew = 100 –º—Å

2. **Drift rate**: –°–∫–æ—Ä–æ—Å—Ç—å, —Å –∫–æ—Ç–æ—Ä–æ–π —á–∞—Å—ã —Ä–∞—Å—Ö–æ–¥—è—Ç—Å—è
   - –ü—Ä–∏–º–µ—Ä: –ß–∞—Å—ã –Ω–∞ —É–∑–ª–µ A –∏–¥—É—Ç –Ω–∞ 100 ppm –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –Ω–∞ —É–∑–ª–µ B

3. **Maximum skew bound**: –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π skew –≤ —Å–∏—Å—Ç–µ–º–µ
   - –ü—Ä–∏–º–µ—Ä: "–í—Å–µ —á–∞—Å—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ 50 –º—Å"

### –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ

–ú–Ω–æ–≥–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –∏ –≥–∞—Ä–∞–Ω—Ç–∏–∏ –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö **–ø–æ–ª–∞–≥–∞—é—Ç—Å—è** –Ω–∞ bounded clock skew:

- **Distributed locks —Å TTL**: –ï—Å–ª–∏ —á–∞—Å—ã —Ä–∞—Å—Ö–æ–¥—è—Ç—Å—è —Å–ª–∏—à–∫–æ–º —Å–∏–ª—å–Ω–æ, lock –º–æ–∂–µ—Ç "–∏—Å—Ç–µ—á—å" –Ω–∞ –æ–¥–Ω–æ–º —É–∑–ª–µ, –Ω–æ –Ω–µ –Ω–∞ –¥—Ä—É–≥–æ–º
- **External consistency**: –¢—Ä–µ–±—É–µ—Ç, —á—Ç–æ–±—ã timestamp'—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ —Ä–µ–∞–ª—å–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏
- **Time-based leases**: Lease –º–æ–∂–µ—Ç "–∏—Å—Ç–µ—á—å" –≤ —Ä–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É–∑–ª–∞—Ö
- **Timestamp ordering**: –ï—Å–ª–∏ —á–∞—Å—ã —Ä–∞—Å—Ö–æ–¥—è—Ç—Å—è, –ø–æ—Ä—è–¥–æ–∫ timestamp'–æ–≤ –º–æ–∂–µ—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É —Å–æ–±—ã—Ç–∏–π

### –ü—Ä–∏–º–µ—Ä—ã —Å–∏—Å—Ç–µ–º —Å clock skew assumptions

**Google Spanner**:
- –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ TrueTime –¥–∞—ë—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª [earliest, latest]
- –®–∏—Ä–∏–Ω–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ (uncertainty) –æ–±—ã—á–Ω–æ 1-7 –º—Å, –Ω–æ –º–æ–∂–µ—Ç —Ä–∞—Å—Ç–∏ –¥–æ ~10 –º—Å
- –°–∏—Å—Ç–µ–º–∞ **–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ –ø—Ä–∏ –ª—é–±–æ–º skew**, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ —è–≤–Ω–æ —É—á–∏—Ç—ã–≤–∞–µ—Ç uncertainty

**CockroachDB**:
- –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç bounded clock skew (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é max_offset = 500 –º—Å)
- –ï—Å–ª–∏ —É–∑–µ–ª –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç, —á—Ç–æ –µ–≥–æ —á–∞—Å—ã —Ä–∞—Å—Ö–æ–¥—è—Ç—Å—è —Å –¥—Ä—É–≥–∏–º —É–∑–ª–æ–º –±–æ–ª—å—à–µ —á–µ–º –Ω–∞ max_offset, –æ–Ω **–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è** (crash)
- –≠—Ç–æ –∂—ë—Å—Ç–∫–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏

**Cassandra**:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Last-Write-Wins (LWW) —Å client-side timestamps
- **–ù–µ –¥–µ–ª–∞–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –≥–∞—Ä–∞–Ω—Ç–∏–π** –æ clock skew ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ï—Å–ª–∏ —á–∞—Å—ã –∫–ª–∏–µ–Ω—Ç–∞ "–≤ –±—É–¥—É—â–µ–º", –µ–≥–æ –∑–∞–ø–∏—Å—å "–ø–æ–±–µ–¥–∏—Ç" –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ —Å –¥—Ä—É–≥–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

**Redis**:
- TTL –∫–ª—é—á–µ–π –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ï—Å–ª–∏ —á–∞—Å—ã "–ø—Ä—ã–≥–Ω—É—Ç" –≤–ø–µ—Ä—ë–¥, –∫–ª—é—á–∏ "–∏—Å—Ç–µ–∫—É—Ç" —Ä–∞–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏
- –ï—Å–ª–∏ —á–∞—Å—ã "–ø—Ä—ã–≥–Ω—É—Ç" –Ω–∞–∑–∞–¥, –∫–ª—é—á–∏ –±—É–¥—É—Ç –∂–∏—Ç—å –¥–æ–ª—å—à–µ

**PostgreSQL replication**:
- Timestamps –≤ –ª–æ–≥–∞—Ö —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –ù–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è LSN (Log Sequence Number), –∞ –Ω–µ timestamps
- –ü–æ—ç—Ç–æ–º—É clock skew –Ω–µ –Ω–∞—Ä—É—à–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å, –Ω–æ –º–æ–∂–µ—Ç —Å–±–∏—Ç—å —Å —Ç–æ–ª–∫—É –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ

### –ö–∞–∫ –∏–∑–º–µ—Ä–∏—Ç—å clock skew

**–ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±**:

1. –£–∑–µ–ª A –ø–æ—Å—ã–ª–∞–µ—Ç —Å–≤–æ–π timestamp T_A —É–∑–ª—É B
2. –£–∑–µ–ª B —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç T_A —Å–æ —Å–≤–æ–∏–º –≤—Ä–µ–º–µ–Ω–µ–º T_B
3. Skew = |T_A - T_B|

**–ü—Ä–æ–±–ª–µ–º–∞**: –≠—Ç–æ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç network delay. –†–µ–∞–ª—å–Ω—ã–π skew –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω—å—à–µ –∏–ª–∏ –±–æ–ª—å—à–µ.

**–ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π —Å–ø–æ—Å–æ–±** (–∫–∞–∫ –¥–µ–ª–∞–µ—Ç NTP):

1. –£–∑–µ–ª A –ø–æ—Å—ã–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å —Å timestamp T1
2. –£–∑–µ–ª B –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ —Å–≤–æ—ë –≤—Ä–µ–º—è T2, –æ—Ç–≤–µ—á–∞–µ—Ç –≤ T3
3. –£–∑–µ–ª A –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –≤ T4
4. Round-trip time = (T4 - T1)
5. One-way delay (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤–æ) = (T4 - T1) / 2
6. Clock offset = ((T2 - T1) + (T3 - T4)) / 2

–ù–æ —ç—Ç–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ ‚Äî —Å–µ—Ç—å –º–æ–∂–µ—Ç –±—ã—Ç—å –∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–π.

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ clock skew —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π

**1. Crash/Stop**:
–°–∞–º—ã–π —Ä–∞–¥–∏–∫–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ ‚Äî –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —É–∑–µ–ª, –µ—Å–ª–∏ –µ–≥–æ —á–∞—Å—ã "–≤—ã–ø–∞–ª–∏" –∏–∑ –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å, –Ω–æ —Å–Ω–∏–∂–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å.

–ü—Ä–∏–º–µ—Ä: CockroachDB –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ clock skew > max_offset.

**2. Reject operations**:
–£–∑–µ–ª –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –≤—Ä–µ–º–µ–Ω–∏.

–ü—Ä–∏–º–µ—Ä: –ù–µ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–ø–∏—Å–∏ —Å timestamp'–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Å–∏–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

**3. Use logical clocks**:
–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è (Lamport clocks, Vector clocks, HLC), –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç physical time.

**4. Monitor and alert**:
–ü–æ—Å—Ç–æ—è–Ω–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å clock skew –∏ –∞–ª–µ—Ä—Ç–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤, –µ—Å–ª–∏ –æ–Ω –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ø–æ—Ä–æ–≥.

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
- **chrony/ntpstat**: –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–µ —á–∞—Å—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å NTP
- **Prometheus + node_exporter**: –ú–æ–∂–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ `node_timex_offset_seconds`
- **Custom monitoring**: –£–∑–ª—ã –º–æ–≥—É—Ç –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è timestamp'–∞–º–∏ –∏ –≤—ã—á–∏—Å–ª—è—Ç—å skew

### –¢–∏–ø–∏—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è clock skew

**–° NTP**:
- –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å: 1-10 –º—Å
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç: 10-100 –º—Å
- –ü–ª–æ—Ö–∏–µ —É—Å–ª–æ–≤–∏—è (congestion, –¥–∞–ª—ë–∫–∏–π NTP server): —Å–µ–∫—É–Ω–¥—ã

**–° PTP (Precision Time Protocol)**:
- –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å: sub-millisecond (< 1 –º—Å)
- –° hardware timestamping: –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥—ã

**–° GPS/Atomic clocks** (–∫–∞–∫ –≤ Google Spanner):
- Sub-millisecond: –æ–±—ã—á–Ω–æ < 7 –º—Å

**–ë–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**:
- –ß–∞—Å—ã –º–æ–≥—É—Ç —Ä–∞—Å—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ —Å–µ–∫—É–Ω–¥—ã –∏–ª–∏ –¥–∞–∂–µ –º–∏–Ω—É—Ç—ã –∑–∞ –¥–µ–Ω—å

### –ò–Ω—Ü–∏–¥–µ–Ω—Ç—ã —Å clock skew

**CloudFlare (2017)**:
- Leap second (–≤–∏—Å–æ–∫–æ—Å–Ω–∞—è —Å–µ–∫—É–Ω–¥–∞) –≤—ã–∑–≤–∞–ª–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å Nginx –∏ –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–µ—Ä–≤–µ—Ä—ã "–ø—Ä—ã–≥–Ω—É–ª–∏" –Ω–∞–∑–∞–¥ –Ω–∞ —Å–µ–∫—É–Ω–¥—É
- –≠—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ –≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å–±–æ—è–º –≤ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏

**AWS (2012, Leap Second)**:
- Leap second –≤—ã–∑–≤–∞–ª–∞ bug –≤ Linux kernel
- CPU usage —Ä–µ–∑–∫–æ –≤—ã—Ä–æ—Å –Ω–∞ –º–Ω–æ–≥–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö
- Cassandra, Hadoop –∏ –¥—Ä—É–≥–∏–µ —Å–∏—Å—Ç–µ–º—ã –∏—Å–ø—ã—Ç–∞–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã

**–ù–µ–Ω–∞–∑–≤–∞–Ω–Ω—ã–π —Å—Ç–∞—Ä—Ç–∞–ø** (–∏–∑ –ø—Ä–∞–∫—Ç–∏–∫–∏):
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤—Ä—É—á–Ω—É—é "–∏—Å–ø—Ä–∞–≤–∏–ª" –≤—Ä–µ–º—è –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–µ, –Ω–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–≤ —Å–µ—Ä–≤–∏—Å
- –í—Ä–µ–º—è "–ø—Ä—ã–≥–Ω—É–ª–æ" –Ω–∞ 10 –º–∏–Ω—É—Ç –≤–ø–µ—Ä—ë–¥
- –í—Å–µ TTL –∫–ª—é—á–∏ –≤ Redis "–∏—Å—Ç–µ–∫–ª–∏" –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞—á–∞–ª–æ –≤–∏–¥–µ—Ç—å cache misses –∏ –Ω–∞–≥—Ä—É–∂–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Å–ø—Ä–∞–≤–∏–ª–∞—Å—å —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π
- –°–∏—Å—Ç–µ–ºa —É–ø–∞–ª–∞ –Ω–∞ 30 –º–∏–Ω—É—Ç, –ø–æ–∫–∞ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ –±—ã–ª–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –º–µ–Ω—è–π —Å–∏—Å—Ç–µ–º–Ω–æ–µ –≤—Ä–µ–º—è –≤—Ä—É—á–Ω—É—é –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–∞—Ö!

---

## –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ –≤—Ä–µ–º–µ–Ω–∏

| –ú–µ—Ö–∞–Ω–∏–∑–º | –†–∞–∑–º–µ—Ä | –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Ñ–∏–∑. –≤—Ä–µ–º–µ–Ω–∏ | –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏ | –ß–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º–æ—Å—Ç—å | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|----------|--------|-------------------------------|---------------------------|---------------------|---------------|
| **Physical Time** | O(1) ‚Äî 1 —á–∏—Å–ª–æ | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ | Redis TTL, ClickHouse partitions, –ª–æ–≥–∏ |
| **Lamport Clock** | O(1) ‚Äî 1 —á–∏—Å–ª–æ | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç (—Ç–æ–ª—å–∫–æ happens-before) | ‚ùå –ù–µ—Ç | –¢—Ä–µ–π—Å–∏–Ω–≥, Snowflake ID |
| **Vector Clock** | O(N) ‚Äî –≤–µ–∫—Ç–æ—Ä | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç | Riak, Voldemort (–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ) |
| **HLC** | O(1) ‚Äî 2 —á–∏—Å–ª–∞ | ~–ß–∞—Å—Ç–∏—á–Ω–æ | ‚ùå –ù–µ—Ç (—Ç–æ–ª—å–∫–æ happens-before) | ~–î–∞ (–±–ª–∏–∑–∫–æ –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É) | CockroachDB, MongoDB, YugabyteDB |
| **TrueTime (Spanner)** | O(1) ‚Äî –∏–Ω—Ç–µ—Ä–≤–∞–ª | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ | Google Spanner |

### –í—ã–±–æ—Ä –º–µ—Ö–∞–Ω–∏–∑–º–∞

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Physical Time**:
- –ù—É–∂–Ω–∞ —á–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º–æ—Å—Ç—å (–ª–æ–≥–∏, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
- TTL –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á
- –°—Ç—Ä–æ–≥–∏–π –ø–æ—Ä—è–¥–æ–∫ –Ω–µ –∫—Ä–∏—Ç–∏—á–µ–Ω
- –ì–æ—Ç–æ–≤ –∂–∏—Ç—å —Å clock skew

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Lamport Clocks**:
- –ù—É–∂–µ–Ω –ø—Ä–∏—á–∏–Ω–Ω–æ-—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ (happens-before)
- –ù–µ –Ω—É–∂–Ω–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- –•–æ—á–µ—à—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Vector Clocks**:
- –ù—É–∂–Ω–æ —Ç–æ—á–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ì–æ—Ç–æ–≤ –ø–ª–∞—Ç–∏—Ç—å –∑–∞ O(N) —Ä–∞–∑–º–µ—Ä
- –°–∏—Å—Ç–µ–º–∞ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º —á–∏—Å–ª–æ–º —É–∑–ª–æ–≤ (–Ω–µ —Ç—ã—Å—è—á–∏)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HLC**:
- –ù—É–∂–µ–Ω happens-before, –Ω–æ —Ö–æ—á–µ—à—å –±–ª–∏–∑–æ—Å—Ç—å –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏
- –ù–µ —Ö–æ—á–µ—à—å O(N) –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ Vector Clocks
- –ù—É–∂–Ω–∞ –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è (–¥–ª—è MVCC, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TrueTime**:
- –ù—É–∂–Ω–∞ —Å—Ç—Ä–æ–≥–∞—è external consistency
- –ï—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—é (GPS, –∞—Ç–æ–º–Ω—ã–µ —á–∞—Å—ã)
- –ì–æ—Ç–æ–≤ –ø–ª–∞—Ç–∏—Ç—å –∑–∞ latency (commit wait)

---

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–±–æ—Ç—ã —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º

### 1. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π NTP (–∏–ª–∏ PTP)

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å**:
- –ù–∞—Å—Ç—Ä–æ–π –≤—Å–µ —É–∑–ª—ã –Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å –Ω–∞–¥—ë–∂–Ω—ã–º–∏ NTP-—Å–µ—Ä–≤–µ—Ä–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑—É–π –Ω–µ—Å–∫–æ–ª—å–∫–æ NTP-—Å–µ—Ä–≤–µ—Ä–æ–≤ –¥–ª—è redundancy
- –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π –ª–æ–∫–∞–ª—å–Ω—ã–µ NTP-—Å–µ—Ä–≤–µ—Ä—ã (–≤ —Ç–æ–º –∂–µ –¥–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä–µ)

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã**:
- **chrony** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –ª—É—á—à–µ, —á–µ–º ntpd)
- **ntpd** (—Å—Ç–∞—Ä–∞—è, –Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
- **systemd-timesyncd** (–ª—ë–≥–∫–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤)

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```
chronyc tracking
```

–°–º–æ—Ç—Ä–∏ –Ω–∞:
- **System time offset**: –ù–∞—Å–∫–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–µ —á–∞—Å—ã –æ—Ç—Å—Ç–∞—é—Ç/–æ–ø–µ—Ä–µ–∂–∞—é—Ç NTP
- **Root delay / Root dispersion**: –ö–∞—á–µ—Å—Ç–≤–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### 2. –ú–æ–Ω–∏—Ç–æ—Ä—å clock skew

**–ß—Ç–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å**:
- –†–∞–∑–Ω–∏—Ü—É –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ
- NTP offset (–Ω–∞—Å–∫–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–µ —á–∞—Å—ã —Ä–∞—Å—Ö–æ–¥—è—Ç—Å—è —Å NTP)
- Clock drift rate

**–ö–∞–∫**:
- –°–æ–±–∏—Ä–∞–π –º–µ—Ç—Ä–∏–∫–∏ `node_timex_offset_seconds` —á–µ—Ä–µ–∑ Prometheus
- –ù–∞—Å—Ç—Ä–æ–π –∞–ª–µ—Ä—Ç—ã, –µ—Å–ª–∏ clock skew –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ø–æ—Ä–æ–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 100 –º—Å)
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–π timestamp'—ã –æ—Ç —Ä–∞–∑–Ω—ã—Ö —É–∑–ª–æ–≤

**CockroachDB –ø—Ä–∏–º–µ—Ä**:
CockroachDB –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- `clock-offset.meannanos`: –°—Ä–µ–¥–Ω–∏–π offset –º–µ–∂–¥—É —É–∑–ª–∞–º–∏
- `clock-offset.stddevnanos`: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ

–ò –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ offset > max_offset.

### 3. –ù–µ –∏–∑–º–µ–Ω—è–π –≤—Ä–µ–º—è –≤—Ä—É—á–Ω—É—é

**–ü–ª–æ—Ö–æ**:
```
# ‚ùå –ù–ï –î–ï–õ–ê–ô –¢–ê–ö –Ω–∞ production!
date --set="2025-01-01 00:00:00"
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç**:
- –ß–∞—Å—ã "–ø—Ä—ã–≥–Ω—É—Ç" –≤–ø–µ—Ä—ë–¥ –∏–ª–∏ –Ω–∞–∑–∞–¥
- –≠—Ç–æ –º–æ–∂–µ—Ç –Ω–∞—Ä—É—à–∏—Ç—å –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å timestamp'–æ–≤
- TTL –≤ Redis, Kafka, –∏ –¥—Ä—É–≥–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö "—Å–æ–±—å—é—Ç—Å—è"
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ timestamp'—ã

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ**:
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Ä–µ–º—è:
1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª–∞–≥–∞—é—Ç—Å—è –Ω–∞ –≤—Ä–µ–º—è
2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Ä–µ–º—è
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã

–ò–ª–∏ –ª—É—á—à–µ: –¥–∞—Ç—å NTP –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Ä–µ–º—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ (slewing).

### 4. –ò—Å–ø–æ–ª—å–∑—É–π –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏–π

–î–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è **–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, latency, timeout) –∏—Å–ø–æ–ª—å–∑—É–π –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ–µ –≤—Ä–µ–º—è (monotonic clock), –∞ –Ω–µ wall clock.

**–ü–æ—á–µ–º—É**:
- Wall clock –º–æ–∂–µ—Ç "–ø—Ä—ã–≥–Ω—É—Ç—å" –Ω–∞–∑–∞–¥ –ø—Ä–∏ NTP sync
- Monotonic clock –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –º–æ–Ω–æ—Ç–æ–Ω–µ–Ω (–≤—Å–µ–≥–¥–∞ —Ä–∞—Å—Ç—ë—Ç)

**–ö–∞–∫**:
- –í Linux: `clock_gettime(CLOCK_MONOTONIC, ...)`
- –í Go: `time.Now()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç monotonic clock –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è —Ä–∞–∑–Ω–æ—Å—Ç–∏ –≤—Ä–µ–º—ë–Ω
- –í Python: `time.monotonic()`
- –í Rust: `std::time::Instant`

**–ü–ª–æ—Ö–æ**:
```python
start = time.time()  # Wall clock
do_work()
duration = time.time() - start  # –ú–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º!
```

**–•–æ—Ä–æ—à–æ**:
```python
start = time.monotonic()  # Monotonic clock
do_work()
duration = time.monotonic() - start  # –í—Å–µ–≥–¥–∞ >= 0
```

### 5. –î–ª—è ordering –∏—Å–ø–æ–ª—å–∑—É–π –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è

–ï—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–µ–Ω —Å—Ç—Ä–æ–≥–∏–π –ø–æ—Ä—è–¥–æ–∫ —Å–æ–±—ã—Ç–∏–π:
- –ù–µ –ø–æ–ª–∞–≥–∞–π—Å—è –Ω–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è —Å —Ä–∞–∑–Ω—ã—Ö —É–∑–ª–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π sequence numbers, offset'—ã, –∏–ª–∏ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —á–∞—Å—ã

**–ü—Ä–∏–º–µ—Ä—ã**:
- **Kafka**: offset –≤ partition
- **PostgreSQL**: LSN (Log Sequence Number) –¥–ª—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏
- **MongoDB**: oplog timestamp (–∫–æ–º–±–∏–Ω–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ + sequence)

### 6. –ü—Ä–æ–µ–∫—Ç–∏—Ä—É–π —Å —É—á—ë—Ç–æ–º clock skew

–ï—Å–ª–∏ —Ç–≤–æ—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ physical time:
- –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π skew (–Ω–∞–ø—Ä–∏–º–µ—Ä, 100 –º—Å)
- –î–æ–±–∞–≤–ª—è–π "–∑–∞–ø–∞—Å" (safety margin) –∫ timeout'–∞–º –∏ TTL
- –¢–µ—Å—Ç–∏—Ä—É–π —Å–∏—Å—Ç–µ–º—É —Å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º clock skew

**–ü—Ä–∏–º–µ—Ä**:
–ï—Å–ª–∏ —Ç—ã –¥–µ–ª–∞–µ—à—å distributed lock —Å TTL = 10 —Å–µ–∫—É–Ω–¥:
- –ö–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —Å—á–∏—Ç–∞—Ç—å lock –≤–∞–ª–∏–¥–Ω—ã–º —Ç–æ–ª—å–∫–æ 9 —Å–µ–∫—É–Ω–¥ (—Å —É—á—ë—Ç–æ–º –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ skew)
- –≠—Ç–æ –¥–∞—ë—Ç "–∑–∞–ø–∞—Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏" –≤ 1 —Å–µ–∫—É–Ω–¥—É

### 7. –ò—Å–ø–æ–ª—å–∑—É–π bounded staleness –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è —á—Ç–µ–Ω–∏—è

–ï—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω–∞ strong consistency:
- –ß–∏—Ç–∞–π —Å replicas —Å bounded staleness (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10 —Å–µ–∫—É–Ω–¥ —É—Å—Ç–∞—Ä–µ–ª–æ—Å—Ç–∏)
- –≠—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç latency –∏ –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ master

**–°–∏—Å—Ç–µ–º—ã**:
- Google Spanner: bounded staleness reads
- MongoDB: `maxStalenessSeconds`
- PostgreSQL: hot standby + –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ `replay_lag`

### 8. –¢–µ—Å—Ç–∏—Ä—É–π —Å —Ö–∞–æ—Å–æ–º –≤—Ä–µ–º–µ–Ω–∏

**Chaos Engineering –¥–ª—è –≤—Ä–µ–º–µ–Ω–∏**:
- –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ —Å–æ–∑–¥–∞–≤–∞–π clock skew –º–µ–∂–¥—É —É–∑–ª–∞–º–∏
- "–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π" –≤—Ä–µ–º—è –Ω–∞ –æ–¥–Ω–æ–º —É–∑–ª–µ
- –î–µ–ª–∞–π clock jump (–≤–ø–µ—Ä—ë–¥ –∏ –Ω–∞–∑–∞–¥)

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã**:
- **libfaketime**: –ü–æ–∑–≤–æ–ª—è–µ—Ç "–ø–æ–¥–¥–µ–ª–∞—Ç—å" –≤—Ä–µ–º—è –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–∞
- **Jepsen**: –§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º, –º–æ–∂–µ—Ç —Å–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å clock issues
- **Namespaces + NTP**: –ó–∞–ø—É—Å–∫–∞–π —É–∑–ª—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö network namespaces —Å —Ä–∞–∑–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º

### 9. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è –æ –≤—Ä–µ–º–µ–Ω–∏

–Ø–≤–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π:
- –ö–∞–∫–∏–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è –¥–µ–ª–∞–µ—Ç —Ç–≤–æ—è —Å–∏—Å—Ç–µ–º–∞ –æ clock skew
- –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ —ç—Ç–∏ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è –Ω–∞—Ä—É—à–µ–Ω—ã
- –ö–∞–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π

**–ü—Ä–∏–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**:
```
–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ –≤—Å–µ —É–∑–ª—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ 100 –º—Å.
- –ï—Å–ª–∏ clock skew > 100 –º—Å, –≤–æ–∑–º–æ–∂–Ω—ã –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: –º–µ—Ç—Ä–∏–∫–∞ `clock_skew_ms` –≤ Prometheus
- –ê–ª–µ—Ä—Ç: –µ—Å–ª–∏ clock_skew_ms > 50 –º—Å
- –î–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å NTP, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —É–∑–µ–ª —Å –±–æ–ª—å—à–∏–º skew
```

### 10. –ò–∑—É—á–∞–π –ø–æ—Å—Çmortems –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–∞–Ω–∏–π

–ú–Ω–æ–≥–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –ø—É–±–ª–∏–∫—É—é—Ç postmortem'—ã –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º:
- CloudFlare leap second incident
- AWS leap second issues
- GitHub clock skew problems

–ò–∑—É—á–∞–π –∏—Ö, —á—Ç–æ–±—ã –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—Ç—å —Ç–µ –∂–µ –æ—à–∏–±–∫–∏.

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í—Ä–µ–º—è –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö ‚Äî —ç—Ç–æ –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö —Å–ª–æ–∂–Ω—ã—Ö –∏ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º. –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã:

### –ì–ª–∞–≤–Ω—ã–µ —É—Ä–æ–∫–∏

1. **–ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ "—Å–µ–π—á–∞—Å"**: –ö–∞–∂–¥—ã–π —É–∑–µ–ª –∂–∏–≤—ë—Ç –≤ —Å–≤–æ—ë–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –æ –≤—Ä–µ–º–µ–Ω–∏

2. **Physical time –Ω–µ–Ω–∞–¥—ë–∂–µ–Ω**: –ß–∞—Å—ã —Ä–∞—Å—Ö–æ–¥—è—Ç—Å—è, NTP –º–æ–∂–µ—Ç –¥–∞–≤–∞—Ç—å —Å–±–æ–∏, –≤—Ä–µ–º—è –º–æ–∂–µ—Ç "–ø—Ä—ã–≥–∞—Ç—å"

3. **Logical time –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —á–∞—Å–æ–≤**: –ù–æ –æ–Ω –Ω–µ —á–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º –∏ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏

4. **Hybrid –ø–æ–¥—Ö–æ–¥—ã ‚Äî –±–∞–ª–∞–Ω—Å**: HLC –¥–∞—ë—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –æ–±–æ–∏—Ö –º–∏—Ä–æ–≤

5. **External consistency –¥–æ—Ä–æ–≥–æ**: –¢—Ä–µ–±—É–µ—Ç —Ç–æ—á–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏ commit wait

6. **Bounded staleness ‚Äî –∫–æ–º–ø—Ä–æ–º–∏—Å—Å**: –î–∞—ë—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –ø—Ä–∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ–π —É—Å—Ç–∞—Ä–µ–ª–æ—Å—Ç–∏

7. **Clock skew –Ω–µ–∏–∑–±–µ–∂–µ–Ω**: –ü—Ä–æ–µ–∫—Ç–∏—Ä—É–π —Å —É—á—ë—Ç–æ–º —ç—Ç–æ–≥–æ, –º–æ–Ω–∏—Ç–æ—Ä—å, –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π NTP/PTP –Ω–∞ –≤—Å–µ—Ö —É–∑–ª–∞—Ö
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä—å clock skew –∏ –∞–ª–µ—Ä—Ç–∏—Ä—É–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è –¥–ª—è ordering
- ‚úÖ –ù–µ –∏–∑–º–µ–Ω—è–π –≤—Ä–µ–º—è –≤—Ä—É—á–Ω—É—é –Ω–∞ production
- ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–π —Å chaos engineering –¥–ª—è –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è –æ –≤—Ä–µ–º–µ–Ω–∏

### –í—ã–±–æ—Ä –ø–æ–¥—Ö–æ–¥–∞

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –ü–æ–¥—Ö–æ–¥ |
|-----------|--------|
| –ß–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º—ã–µ timestamp'—ã | Physical time |
| TTL –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ | Physical time + NTP |
| Happens-before ordering | Lamport Clocks –∏–ª–∏ HLC |
| –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏ | Vector Clocks |
| External consistency | TrueTime –∏–ª–∏ HLC + bounded skew |
| –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–µ —á—Ç–µ–Ω–∏–µ | Bounded staleness |
| –°—Ç—Ä–æ–≥–∏–π –ø–æ—Ä—è–¥–æ–∫ –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ | Sequence numbers (offset, LSN) |

### –§–∏–ª–æ—Å–æ—Ñ–∏—è

üí° **–ü–æ–º–Ω–∏**: –í—Ä–µ–º—è ‚Äî —ç—Ç–æ –∏–ª–ª—é–∑–∏—è –≤ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Äî —ç—Ç–æ –ø—Ä–∏—á–∏–Ω–Ω–æ-—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Å–æ–±—ã—Ç–∏—è–º–∏. –í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî —ç—Ç–æ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏—è –∏ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã.

–ü—Ä–æ–µ–∫—Ç–∏—Ä—É—è —Å–∏—Å—Ç–µ–º—É, –≤—Å–µ–≥–¥–∞ —Å–ø—Ä–∞—à–∏–≤–∞–π —Å–µ–±—è:
- –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ –º–Ω–µ –Ω—É–∂–Ω–æ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è, –∏–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ—Ä—è–¥–∫–∞?
- –ö–∞–∫–æ–π clock skew —è –º–æ–≥—É –¥–æ–ø—É—Å—Ç–∏—Ç—å?
- –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ —á–∞—Å—ã —Å–æ–±—å—é—Ç—Å—è?
- –ö–∞–∫ —è —É–∑–Ω–∞—é, —á—Ç–æ —á–∞—Å—ã —Å–±–∏–ª–∏—Å—å?
- –ß—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ?

–û—Ç–≤–µ—Ç—ã –Ω–∞ —ç—Ç–∏ –≤–æ–ø—Ä–æ—Å—ã –ø–æ–º–æ–≥—É—Ç —Ç–µ–±–µ –≤—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –∏ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –Ω–∞–¥—ë–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É.

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ —Å—Ç–∞—Ç—å–∏

1. **"Time, Clocks, and the Ordering of Events in a Distributed System"** ‚Äî Leslie Lamport, 1978
   - –û—Å–Ω–æ–≤–æ–ø–æ–ª–∞–≥–∞—é—â–∞—è —Ä–∞–±–æ—Ç–∞ –æ –ª–æ–≥–∏—á–µ—Å–∫–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ happens-before

2. **"Logical Physical Clocks and Consistent Snapshots in Globally Distributed Databases"** ‚Äî Kulkarni et al., 2014
   - –û–ø–∏—Å–∞–Ω–∏–µ Hybrid Logical Clocks

3. **"Spanner: Google's Globally-Distributed Database"** ‚Äî Corbett et al., 2012
   - TrueTime –∏ external consistency

### –ö–Ω–∏–≥–∏

1. **"Designing Data-Intensive Applications"** ‚Äî Martin Kleppmann
   - –ì–ª–∞–≤–∞ 8: The Trouble with Distributed Systems
   - –û—Ç–ª–∏—á–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –≤—Ä–µ–º–µ–Ω–∏

2. **"Database Internals"** ‚Äî Alex Petrov
   - –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ MVCC –∏ timestamp-based concurrency control

### –°–∏—Å—Ç–µ–º—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è

- **CockroachDB**: –û—Ç–∫—Ä—ã—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è HLC –∏ external consistency
- **Riak**: Vector clocks –¥–ª—è versioning
- **MongoDB**: –≠–≤–æ–ª—é—Ü–∏—è –æ—Ç vector clocks –∫ HLC
- **Cassandra**: Last-Write-Wins –∏ –ø—Ä–æ–±–ª–µ–º—ã —Å timestamp'–∞–º–∏

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- **chrony**: –õ—É—á—à–∏–π NTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è Linux
- **Jepsen**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º, –≤–∫–ª—é—á–∞—è clock issues
- **Prometheus + Grafana**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ clock skew

### –ë–ª–æ–≥–∏ –∏ —Å—Ç–∞—Ç—å–∏

- Aphyr (Kyle Kingsbury) ‚Äî Jepsen blog: –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –∞–Ω–∞–ª–∏–∑–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º
- Martin Kleppmann ‚Äî –ë–ª–æ–≥ –æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö
- Google Cloud Blog ‚Äî –°—Ç–∞—Ç—å–∏ –æ Spanner –∏ TrueTime

---

**–£–¥–∞—á–∏ –≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–∏—Å—Ç–µ–º, –≥–¥–µ –≤—Ä–µ–º—è ‚Äî —Ç–≤–æ–π —Å–æ—é–∑–Ω–∏–∫, –∞ –Ω–µ –≤—Ä–∞–≥!** ‚è∞
